{"version":3,"sources":["utils/filters.js","config/constants.js","utils/defaultData.js","SharedComponents/CustomIcon.js","utils/apiMockAdapter.js","utils/api.js","utils/apiFunctions.js","Components/Header/HeaderModes.js","Components/Header/HeaderProjects.js","Components/Header/Header.js","SharedComponents/MenuItemsList.js","Components/MenuItemSettings/MenuItemSettings.js","Components/MenuItemChief/MenuItemChief.js","Components/HeaderLogin/HeaderLogin.js","SharedComponents/CheckboxListFilter/CheckboxListFilter.js","Components/DevelopersFilter/DevelopersFilter.js","Components/MainLeftSide/MainLeftSide.js","Components/LoadingComponent/LoadingComponent.js","SharedComponents/CustomSuspenseFallback.js","Components/Table/TblHeaderBtnMenu/TblHeaderBtnMenu.js","utils/tblHeaderHelpers.js","Components/Table/TblHeadEnhanced/TblHeadEnhanced.js","Components/Table/TblCell/TblCell.js","Components/Table/TblCellInput/TblCellInput.js","Components/Table/TblCellIcon/TblCellIcon.js","Components/Table/TblHeaderSearch/TblHeaderSearch.js","Components/Table/TblHeaderPagination/TblHeaderPagination.js","Components/Table/TblHeader/TblHeader.js","Components/Popup/PopupConfirmChoice/PopupConfirmChoice.js","Components/Table/TblGroupRow/TblGroupRow.js","Components/Table/TblRowText/TblRowText.js","Components/Table/TblLoading/TblLoading.js","Components/DataTable/DataTable.js","Components/Content/Content.js","App.js","index.js","config/data.js","storages/commonStorage.js","utils/date.js"],"names":["filters","clear","getKeys","forEach","key","startsWith","data","clearAll","perm","setKeys","tbl","Object","values","filter","a","isFilter","value","id","setValue","mode","field","vocFilter","keys","metaData","dataTable","f","vocabulary","push","length","join","checkFilter","includes","checkValue","task","filterData","filterDataKeys","i","search","fieldsArray","j","specificParameters","mainValue","compare","replace","split","type","fieldsList","k","propertyValue","taskValue","asRegexp","date","RegExp","parseInt","this","developer","project","filterTasks","dataTableShow","modes","realData","mainModes","e","map","urlApi","TEST","getDefaultValues","property","metaTable","today","Date","moment","format","undefined","inputData","objectKey","objectValue","CustomIcon","props","size","fontSize","style","padding","class","left","color","title","tip","className","onClick","action","href","target","rel","width","height","display","onKeyPress","role","tabIndex","React","memo","user","require","developers","projects","discussion","calendar","event","mock","MockAdapter","axios","delayResponse","onGet","reply","onPut","status","error","onPatch","onDelete","onPost","defaults","headers","get","post","put","patch","delete","Api","then","_handleApiResult","bind","body","fnName","res","storage","alert","dispatch","message","console","statusText","Error","getUser","result","login","getProjectDeveloper","dataList","getProject","getDeveloper","info","getData","m","tables","getMetaData","infoR","infoKey","mobile","showInTableMobile","showInTable","validValues","dataTableName","resetDataTable","prop","propInfo","doData","feature","json","putData","patchData","deleteData","postData","method","log","fileUpload","file","formData","FormData","append","fetch","response","ok","HeaderModes","reloadDataTable","hostpath","window","location","getMode","pathname","pathArray","slice","shift","tableName","document","useState","handleChange","newValue","useEffect","subscribe","table","storageTableName","getState","TABLE","AppBar","position","path","render","Tabs","onChange","indicatorColor","textColor","variant","scrollButtons","index","Tab","label","a11yProps","disabled","to","component","Link","HeaderProjects","projectList","setProjects","reloadActiveProjects","projectsHash","projectsActive","projectsOther","projectInfo","showAsDisabled","projectsReloaded","sort","b","unsubscribe","state","dataLoading","STATE","unsubscribeUpd","upd","UPD","update","unsubscribeData","DATA","redraw","list","classes","root","tabStyles","Header","MenuItemsList","itemsList","name","hasStartCheckbox","checkFunction","item","handleItemClick","MenuItem","backgroundColor","Checkbox","edge","checked","disableRipple","MenuItemSettings","menuEl","setMenuEl","menuElColors","setMenuElColors","menuElColumns","setMenuElColumns","checkedElSubList","setCheckedElSubList","openMenuItem","cb","currentTarget","closeMenuItem","columnsList","Menu","anchorEl","keepMounted","open","onClose","documentElement","colorIcons","getComputedStyle","getPropertyValue","setProperty","colorHover","checkedElSubListNew","concat","stage","MenuItemChief","currentDate","DateW","currentWeek","getWeek","handleClickItem","menuItem","week","getFullYear","getDay","sendNotification","Boolean","ListItemIcon","Typography","noWrap","HeaderLogin","dataRef","username","setUsername","trigger","Tooltip","IconButton","content","current","CheckboxListFilter","setChecked","List","dense","options","option","optionsMap","labelId","ListItem","button","currentIndex","indexOf","newChecked","splice","filterType","updateData","inputProps","ListItemText","primary","Divider","DevelopersFilter","inputFilter","developersList","setDevelopers","resortActive","developerList","activeDevsList","row","author","activeDevs","nonActiveDevs","dev","resortDevelopers","inputDevelopers","sortedDevelopers","outputDevelopers","MainLeftSide","setOpen","handleOpen","isOpened","widthDefault","d","Drawer","anchor","paper","borderRadius","LoadingComponent","textAlign","paddingTop","CircularProgress","CustomSuspenseFallback","TableRow","TableCell","TblHeaderBtnMenu","itemList","all","noClosed","setAnchorEl","filterField","setFilterField","handleClick","utils","MomentUtils","margin","marginLeft","getColumnWidths","widths","headCell","headCellWidth","innerWidth","isGroup","isInlineEditable","getColumnWidth","hasAdditionalCell","hasSpecAction","hasSpecNotes","hasEditMenu","hasDeleteButton","hasDoneButton","getAdditionalCellProps","TblHeadEnhanced","setIsHovered","isHovered","setState","createSortHandler","onRequestSort","createGroupHandler","onRequestGroup","groupBy","order","orderBy","headCells","tableIndex","filterVisibility","headCellId","getFilterVisibility","groupVisibility","getGroupVisibility","minWidth","filterList","groupList","align","onMouseEnter","onMouseLeave","sortDirection","TableSortLabel","active","direction","onFilter","PureComponent","TblCell","fullTextIcon","zoomLink","youTubeLink","TblCellInput","defaultValue","actionOk","actionCancel","setItem","Input","fullWidth","autoFocus","endAdornment","InputAdornment","TblActionMenu","lazy","TblCellIcon","showCell","showInner","args","fallback","actionMenuList","onBeforeClick","TblHeaderSearch","setSearch","clearSearch","handleSearch","placeholder","onKeyDown","startAdornment","TblHeaderPagination","countPages","count","page","rowsPerPage","onChangePage","onChangeRowsPerPage","countTotal","Math","ceil","goToFirstPage","goToPrevPage","goToNextPage","goToLastPage","TablePagination","rowsPerPageOptions","onPageChange","onRowsPerPageChange","labelRowsPerPage","labelDisplayedRows","from","backIconButtonProps","paddingBottom","nextIconButtonProps","toolbar","select","ActionsComponent","placement","enterDelay","TblHeader","showCondition","colSpan","onSearch","PopupConfirmChoice","actionName","choice","setChoice","setOptions","Dialog","DialogTitle","DialogContent","RadioGroup","test","FormControlLabel","control","Radio","DialogActions","Button","startIcon","getYearWeekStr","TblGroupRow","fullColsNum","getDateGroup","groupValue","groupHide","showGrouped","setGroup","dayOptions","weekData","foreEach","toggleDescription","weekOptions","weekObj","weekDate","setDate","getDate","weekStr","startOf","endOf","copyPreviousWeekDiscussions","TblRowText","text","TblLoading","TblSecondaryList","TblFullTextRow","stableSort","array","cmp","stabilizedThis","el","getSorting","desc","valA","Number","isInteger","toString","valB","descSort","DataTable","setData","setEditItem","setPage","setOrder","setOrderBy","editItem","setShowFullTextID","showFullTextID","setRowsPerPage","setHeadCells","setWeekDescription","weekDescription","commonFieldSearch","setSort","sortFieldIndex","handleRequestSort","handleRequestGroup","byWeek","handleChangePage","newPage","handleChangeRowsPerPage","defaultSort","defaultGroupField","realID","editTableRow","rowData","errorResult","addTableRow","updateTable","addTableRowArray","rowDataArray","Promise","returnDataArray","jsonOk","returnData","returnError","returnJson","deleteTableRow","handleInlineEditOk","editProperty","editValue","handleInlineEditClose","dialogEditOk","editPropertyValue","completeTableRow","dateEnd","toISOString","setStatusTableRow","showFullText","loadLinked","loadTableName","mainTable","idTask","titleRow","showResults","showAddRows","secDataList","participants","string","addLinkedData","infoData","linkedData","loadSecondaryList","dataListName","menuActionLoadDiscussions","menuActionLoadThemeTasks","sendNotificationWeekDate","notifyWeek","menuList","haveDiscussion","hasGoToDiscussion","hasSublistData","actionNew","hasSetStatusMenu","isListOfItems","listItems","statusList","hasNotificationButton","hasShowResults","getYouTubeLink","videoConf","url","getZoomLink","getRowClass","toLocaleDateString","rowClass","priority","getGroupRowNames","dayName","getFullText","fullText","element","fullTextIndexCell","hasFullTextLink","getFullTextIcon","getCellValue","_d","getWhiteSpace","whiteSpace","getRowDisplayIfGroup","loadData","defaultSortDirection","defaultSortField","unsubscribeTable","selectedWeek","chosenWeek","infoArray","newWeekDate","day","noPagination","hasMenuCell","getHasMenuCell","Table","stickyHeader","TableHead","rowCount","_data","hasTitleRow","TableBody","showGroupByRow","groupField","_groupHide","r","hover","paddingLeft","Component","MainCalendar","DataAdd","Content","setTableName","ref","dates","Hint","App","_divDataTable","useRef","resetFilter","navigator","userAgent","match","basepath","ReactDOM","basename","querySelector","createStore","combineReducers","ALERT","meta","META","dowOffset","newYear","weeknum","daynum","floor","getTime","getTimezoneOffset","nYear","nday","getWeekStr","dayOffset","toDateTimeStr","_isAMomentObject","toLocaleTimeString"],"mappings":"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","file":"static/js/main.6e64db66.chunk.js","sourcesContent":["import { metaData, dataTable } from '../config/data';\r\n\r\nclass Filters {\r\n  constructor() {\r\n    this.data = { developer: [], project: '' };\r\n    this.perm = {};\r\n  }\r\n\r\n  // clear all data\r\n  clear = () => {\r\n    this.getKeys().forEach((key) => {\r\n      if (key.startsWith('_')) {\r\n        delete this.data[key];\r\n      } else if (typeof this.data[key] === 'string') {\r\n        this.data[key] = '';\r\n      } else {\r\n        this.data[key] = [];\r\n      }\r\n    });\r\n  };\r\n\r\n  // clear all data\r\n  clearAll = () => {\r\n    this.clear();\r\n    this.perm = {};\r\n  };\r\n\r\n  setKeys = (tbl) => {\r\n    Object.values(tbl)\r\n      .filter((a) => a.isFilter)\r\n      .forEach((value) => {\r\n        if (typeof this.data[value.id] === 'undefined') this.data[value.id] = '';\r\n      });\r\n  };\r\n\r\n  // set single filter field + all fields where this one is as Vocabulary\r\n  setValue = (mode = 'data', field, value) => {\r\n    this[mode][field] = value;\r\n\r\n    const vocFilter = [];\r\n    Object.keys(metaData.dataTable).forEach((f) => {\r\n      if (metaData.dataTable[f].vocabulary === field) vocFilter.push(f);\r\n    });\r\n\r\n    if (vocFilter.length > 0) {\r\n      if (vocFilter.length === 1) {\r\n        this[mode][vocFilter[0]] = value;\r\n      } else {\r\n        this[mode][`_${vocFilter.join('OR')}`] = value;\r\n      }\r\n    }\r\n  };\r\n\r\n  // get all keys\r\n  getKeys = (mode = 'data') => Object.keys(this[mode]);\r\n\r\n  // check if field is filter\r\n  checkFilter = (f) => this.getKeys().includes(f);\r\n\r\n  // check if row data is ok for filter\r\n  checkValue = (task) => {\r\n    let filter = true;\r\n    const filterData = {};\r\n\r\n    this.getKeys('data').forEach((key) => {\r\n      filterData[key] = this.data[key];\r\n    });\r\n    this.getKeys('perm').forEach((key) => {\r\n      filterData[key] = this.perm[key];\r\n    });\r\n\r\n    const filterDataKeys = Object.keys(filterData);\r\n    for (let i = 0; i < filterDataKeys.length; i++) {\r\n      const f = filterDataKeys[i];\r\n      if (!filterData[f] || filterData[f] === '') continue;\r\n      if (!metaData.dataTable[f] && f.search(/^_.+OR.+$/) === -1 && f !== 'commonFieldSearch')\r\n        continue;\r\n\r\n      // filter for SEARCH\r\n      if (f === 'commonFieldSearch') {\r\n        const fieldsArray = Object.keys(task);\r\n        for (let j = 0; j < fieldsArray.length; j++) {\r\n          const field = fieldsArray[j];\r\n          if (field === 'value') continue;\r\n          if (\r\n            field !== metaData.specificParameters.mainValue // && metaData.dataTable[field]?.type !== 'fulltext'\r\n          )\r\n            continue;\r\n          if (typeof task[field] !== 'string') continue;\r\n          filter = this.compare(filterData[f], task[field], true);\r\n          if (filter) break;\r\n        }\r\n      } else if (f.search(/^_(.+OR.+)$/) !== -1) {\r\n        const fieldsString = f.replace(/^_(.+OR.+)/, '$1');\r\n        const fieldsArray = fieldsString.split('OR');\r\n        for (let j = 0; j < fieldsArray.length; j++) {\r\n          const field = fieldsArray[j];\r\n          if (!metaData.dataTable[field]) continue;\r\n\r\n          if (metaData.dataTable[field].type === 'multi-select') {\r\n            const fieldsList = task[field].split(',');\r\n            for (let k = 0; k < fieldsList.length; k++) {\r\n              filter = this.compare(filterData[f], fieldsList[k]);\r\n              if (filter) break;\r\n            }\r\n          } else {\r\n            filter = this.compare(filterData[f], task[field]);\r\n          }\r\n          if (filter) break;\r\n        }\r\n      } else if (metaData.dataTable[f].type === 'multi-select') {\r\n        const fieldsList = task[f].split(',');\r\n        for (let k = 0; k < fieldsList.length; k++) {\r\n          filter = this.compare(filterData[f], fieldsList[k]);\r\n          if (filter) break;\r\n        }\r\n      } else {\r\n        filter = this.compare(filterData[f], task[f]);\r\n      }\r\n      if (!filter) break;\r\n    }\r\n    return filter;\r\n  };\r\n\r\n  // compare two direct values: filter and row data value\r\n  compare = (propertyValue, taskValue, asRegexp = 'false') => {\r\n    let filter = true;\r\n    if (typeof propertyValue === 'string') {\r\n      if (\r\n        propertyValue !== '' &&\r\n        taskValue &&\r\n        taskValue !== '' &&\r\n        taskValue.search(/\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}/) !== -1\r\n      ) {\r\n        const date = taskValue.replace(/(\\d{4}-\\d{2}-\\d{2}) \\d{2}:\\d{2}:\\d{2}/, '$1');\r\n\r\n        if (propertyValue !== date) filter = false;\r\n      } else if (taskValue && propertyValue !== '' && !asRegexp) {\r\n        if (propertyValue !== taskValue) filter = false;\r\n      } else if (taskValue && propertyValue !== '' && asRegexp) {\r\n        if (taskValue.search(new RegExp(propertyValue, 'i')) === -1) filter = false;\r\n      } else if ((!taskValue || taskValue === '') && propertyValue !== '') {\r\n        filter = false;\r\n      }\r\n    } else if (typeof propertyValue === 'number') {\r\n      if (propertyValue && propertyValue > 0 && propertyValue !== parseInt(taskValue, 10))\r\n        filter = false;\r\n    } else if (propertyValue && propertyValue.length > 0 && !propertyValue.includes(taskValue)) {\r\n      filter = false;\r\n    }\r\n\r\n    return filter;\r\n  };\r\n}\r\n\r\nexport const filters = new Filters({});\r\n\r\n/* universal filter function */\r\nexport function filterTasks() {\r\n  const dataTableShow = [];\r\n  dataTable.forEach((task) => {\r\n    const filter = filters.checkValue(task);\r\n    if (filter) dataTableShow.push(task);\r\n  });\r\n\r\n  return dataTableShow;\r\n}\r\n","export const modes = [\r\n  { id: 'task', value: 'Задачи', realData: true },\r\n  { id: 'discussion', value: 'Совещания', realData: true },\r\n  { id: 'calendar', value: 'Календарь', realData: true },\r\n  { id: 'event', value: 'Изменения', realData: true },\r\n];\r\n\r\nexport const mainModes = modes.filter((e) => e.realData).map((e) => e.id);\r\n\r\nexport const urlApi = '/smisplan2/cgi/api-smisplan-getInfo.pl';\r\nexport const TEST = true;\r\n","import moment from 'moment';\r\nimport { metaData, dataTable } from '../config/data';\r\n\r\nexport default function getDefaultValues(id, property, metaTable, mode = 'defaultValue') {\r\n  const today = new Date();\r\n  let value;\r\n  switch (metaTable[property][mode]) {\r\n    case 'date':\r\n      value = moment(today, 'YYYY-MM-DD').format('YYYY-MM-DD');\r\n      break;\r\n    case 'time':\r\n      value = moment(today, 'YYYY-MM-DD').format('HH:mm:00');\r\n      break;\r\n    case 'datetime':\r\n      value = moment(today, 'YYYY-MM-DD').format('YYYY-MM-DD HH:mm:00');\r\n      break;\r\n    case 'empty':\r\n      value = undefined;\r\n      break;\r\n    default:\r\n      if (metaTable[property][mode].search(/object:/) !== -1) {\r\n        const inputData = metaTable[property][mode].split(',');\r\n        const objectKey = inputData[0].split(':')[1];\r\n        const objectValue = inputData[1].split(':')[1];\r\n        if (objectKey === 'data') {\r\n          value = dataTable[id][objectValue];\r\n        } else if (objectKey === 'meta') {\r\n          value = metaData[objectValue];\r\n        }\r\n      } else {\r\n        value = metaTable[property][mode];\r\n      }\r\n\r\n      break;\r\n  }\r\n\r\n  return value;\r\n}\r\n","import React from 'react';\r\nimport { IconButton, Tooltip } from '@material-ui/core';\r\n\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport PlaylistAddIcon from '@material-ui/icons/PlaylistAdd';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport PrintIcon from '@material-ui/icons/Print';\r\nimport DoubleArrowIcon from '@material-ui/icons/DoubleArrow';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport CommentIcon from '@material-ui/icons/Comment';\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport FormatIndentDecreaseIcon from '@material-ui/icons/FormatIndentDecrease';\r\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ContactSupportIcon from '@material-ui/icons/ContactSupport';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport GroupAddIcon from '@material-ui/icons/GroupAdd';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport HowToRegIcon from '@material-ui/icons/HowToReg';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport AttachmentIcon from '@material-ui/icons/Attachment';\r\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\r\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\r\nimport ViewListIcon from '@material-ui/icons/ViewList';\r\nimport AddToPhotosIcon from '@material-ui/icons/AddToPhotos';\r\n\r\nfunction CustomIcon(props) {\r\n  const size = props.size || '30px';\r\n  const fontSize = props.fontSize || 'medium';\r\n  const type = props.type ? props.type : 'material-ui';\r\n\r\n  const style = props.style || {};\r\n  style.padding = '0';\r\n  if (props.class === 'icn_arrow_left_fill') style.left = '-30px';\r\n\r\n  let color = 'default';\r\n  // if (props.class === 'icn_ok') { }\r\n  if (props.class === 'icn_cancel') {\r\n    color = 'secondary';\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {type === 'material-ui' && (\r\n        <Tooltip title={props.tip ? props.tip : ''}>\r\n          <IconButton\r\n            className=\"icn\"\r\n            style={style}\r\n            color={color}\r\n            onClick={typeof props.action === 'function' ? props.action : null}\r\n          >\r\n            {props.class === 'icn_filter' && <FilterListIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_tasks_add' && <PlaylistAddIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_tasks_edit' && <EditIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_tasks_delete' && <DeleteIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_tasks_complete' && <CheckIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_ok' && (\r\n              <CheckCircleIcon style={{ color: 'green' }} fontSize={fontSize} />\r\n            )}\r\n            {props.class === 'icn_cancel' && <CancelIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_filterOff' && <VisibilityIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_print' && <PrintIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_arrow_right' && <ArrowRightIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_arrow_left' && <ArrowLeftIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_arrow_down' && <ArrowDropDownIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_arrow_up' && <ArrowDropUpIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_arrow_right_fill' && <DoubleArrowIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_arrow_left_fill' && <ChevronLeftIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_description' && <DescriptionIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_comment' && <CommentIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_settings' && <SettingsIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_menu' && <MenuIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_group' && <FormatIndentDecreaseIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_secDataList' && <AccountTreeIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_secDataListCollapse' && <ArrowDropUpIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_question' && <ContactSupportIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_moreH' && <MoreHorizIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_moreV' && <MoreVertIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_meeeting' && <GroupAddIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_discussion' && <HowToRegIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_notification' && <NotificationsActiveIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_search' && <SearchIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_clear' && <ClearIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_download' && <CloudUploadIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_save' && <SaveIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_save_doc' && <AssignmentIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_attachment' && <AttachmentIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_chief' && <RecordVoiceOverIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_discussionList' && <ViewListIcon fontSize={fontSize} />}\r\n            {props.class === 'icn_discussionCopy' && <AddToPhotosIcon fontSize={fontSize} />}\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n      {type === 'link' && (\r\n        <a\r\n          href={props.href}\r\n          target=\"_blank\"\r\n          title={props.tip ? props.tip : ''}\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          <div\r\n            style={{ width: size, height: size, display: 'inline-block' }}\r\n            onClick={props.action}\r\n            onKeyPress={() => {}}\r\n            className={props.class}\r\n            role=\"link\"\r\n            aria-label=\"link\"\r\n            tabIndex={0}\r\n          />\r\n        </a>\r\n      )}\r\n      {type !== 'link' && type !== 'material-ui' && (\r\n        <div\r\n          style={{ width: size, height: size, display: 'inline-block' }}\r\n          onClick={props.action}\r\n          onKeyPress={() => {}}\r\n          className={props.class}\r\n          role=\"button\"\r\n          aria-label=\"button\"\r\n          tabIndex={0}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default React.memo(CustomIcon);\r\n","import axios from 'axios';\r\nimport MockAdapter from 'axios-mock-adapter';\r\nimport { urlApi } from '../config/constants';\r\n\r\nconst user = require('../config/dummyData/user.json');\r\nconst developers = require('../config/dummyData/developers.json');\r\nconst projects = require('../config/dummyData/projects.json');\r\n\r\nconst metaData = {\r\n  task: null,\r\n  discussion: null,\r\n  calendar: null,\r\n  event: null,\r\n};\r\n\r\nmetaData.task = require('../config/dummyData/task_meta.json');\r\nmetaData.discussion = require('../config/dummyData/discussion_meta.json');\r\nmetaData.calendar = require('../config/dummyData/calendar_meta.json');\r\nmetaData.event = require('../config/dummyData/event_meta.json');\r\n\r\nconst data = {\r\n  task: null,\r\n  discussion: null,\r\n  calendar: null,\r\n  event: null,\r\n};\r\n\r\ndata.task = require('../config/dummyData/task.json');\r\ndata.discussion = require('../config/dummyData/discussion.json');\r\ndata.calendar = require('../config/dummyData/calendar.json');\r\ndata.event = require('../config/dummyData/event.json');\r\n\r\nconst mock = new MockAdapter(axios, { delayResponse: 100 });\r\n\r\nexport default function setMockAdapter() {\r\n  // get basic information\r\n  mock.onGet(`${urlApi}/user/`).reply(200, user);\r\n\r\n  mock.onGet(`${urlApi}/developer/`).reply(200, developers);\r\n\r\n  mock.onGet(`${urlApi}/project/`).reply(200, projects);\r\n\r\n  // get meta data information\r\n  mock.onGet(`${urlApi}/task-meta/`).reply(200, metaData.task);\r\n\r\n  mock.onGet(`${urlApi}/discussion-meta/`).reply(200, metaData.discussion);\r\n\r\n  mock.onGet(`${urlApi}/calendar-meta/`).reply(200, metaData.calendar);\r\n\r\n  mock.onGet(`${urlApi}/event-meta/`).reply(200, metaData.event);\r\n\r\n  // get data\r\n  mock.onGet(`${urlApi}/task/`).reply(200, data.task);\r\n\r\n  mock.onGet(`${urlApi}/discussion/`).reply(200, data.discussion);\r\n\r\n  mock.onGet(`${urlApi}/calendar/`).reply(200, data.calendar);\r\n\r\n  mock.onGet(`${urlApi}/event/`).reply(200, data.event);\r\n\r\n  // put data\r\n  mock.onPut(`${urlApi}/task/`).reply(200, { status: 'OK', error: '', data: { id: 777 } });\r\n\r\n  mock.onPut(`${urlApi}/discussion/`).reply(200, { status: 'OK', error: '', data: { id: 777 } });\r\n\r\n  // patch data\r\n  mock.onPatch(`${urlApi}/task/`).reply(200, { status: 'OK', error: '', data: {} });\r\n\r\n  mock.onPatch(`${urlApi}/discussion/`).reply(200, { status: 'OK', error: '', data: {} });\r\n\r\n  // delete data\r\n  mock.onDelete(`${urlApi}/task/`).reply(200, { status: 'OK', error: '' });\r\n\r\n  mock.onDelete(`${urlApi}/discussion/`).reply(200, { status: 'OK', error: '' });\r\n\r\n  // post data\r\n  mock.onPost(`${urlApi}/task/`).reply(200, { status: 'OK', error: '' });\r\n\r\n  mock.onPost(`${urlApi}/discussion/`).reply(200, { status: 'OK', error: '' });\r\n}\r\n","import axios from 'axios';\r\nimport storage from '../storages/commonStorage';\r\nimport { urlApi, TEST } from '../config/constants';\r\nimport setMockAdapter from './apiMockAdapter';\r\n\r\nsetMockAdapter();\r\n\r\naxios.defaults.headers.get['Content-Type'] = 'application/json';\r\naxios.defaults.headers.post['Content-Type'] = 'application/json';\r\naxios.defaults.headers.put['Content-Type'] = 'application/json';\r\naxios.defaults.headers.patch['Content-Type'] = 'application/json';\r\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\r\n\r\nexport default class Api {\r\n  static async getUser() {\r\n    return axios.get(`${urlApi}/user/`).then(Api._handleApiResult.bind(null, 'getUser'));\r\n  }\r\n\r\n  static async getProject() {\r\n    return axios.get(`${urlApi}/project/`).then(Api._handleApiResult.bind(null, 'getProject'));\r\n  }\r\n\r\n  static async getDeveloper() {\r\n    return axios.get(`${urlApi}/developer/`).then(Api._handleApiResult.bind(null, 'getDeveloper'));\r\n  }\r\n\r\n  static async getMetaData(mode) {\r\n    return axios\r\n      .get(`${urlApi}/${mode.replace('_', '-')}/`)\r\n      .then(Api._handleApiResult.bind(null, 'getMetaData'));\r\n  }\r\n\r\n  static async getData(mode) {\r\n    return axios.get(`${urlApi}/${mode}/`).then(Api._handleApiResult.bind(null, 'getData'));\r\n  }\r\n\r\n  static async putData(mode, body) {\r\n    return axios.put(`${urlApi}/${mode}/`, body).then(Api._handleApiResult.bind(null, 'putData'));\r\n  }\r\n\r\n  static async patchData(mode, body) {\r\n    return axios\r\n      .patch(`${urlApi}/${mode}/`, body)\r\n      .then(Api._handleApiResult.bind(null, 'patchData'));\r\n  }\r\n\r\n  static async deleteData(mode, body) {\r\n    return axios\r\n      .delete(`${urlApi}/${mode}/`, body)\r\n      .then(Api._handleApiResult.bind(null, 'deleteData'));\r\n  }\r\n\r\n  static async postData(mode, body) {\r\n    return axios.post(`${urlApi}/${mode}/`, body).then(Api._handleApiResult.bind(null, 'postData'));\r\n  }\r\n\r\n  static _handleApiResult(fnName, res) {\r\n    // console.log(res);\r\n    if (TEST) {\r\n      return res.data.data;\r\n    }\r\n\r\n    if (res.data.status !== 'OK') {\r\n      storage.alert.dispatch({ type: 'SHOW_ALERT', status: 'fail', message: 'Ошибка' });\r\n      console.error(`Ошибка запроса: ${res.data.error}`);\r\n    }\r\n\r\n    if (!['OK', 'Created', 'No Content'].includes(res.statusText)) {\r\n      storage.alert.dispatch({ type: 'SHOW_ALERT', status: 'fail', message: 'Ошибка' });\r\n      console.error(`Ошибка HTTP:  + ${res.statusText}`);\r\n    }\r\n\r\n    return ['OK', 'Created', 'No Content'].includes(res.statusText)\r\n      ? res.data\r\n      : Error(`Ошибка получения результата в ${fnName}: ${res.status} ${res.statusText}`);\r\n  }\r\n}\r\n","import { metaData, dataTable, resetDataTable } from '../config/data';\r\nimport { filters } from './filters';\r\nimport { mainModes } from '../config/constants';\r\nimport Api from './api';\r\n\r\nconst getUser = async () => {\r\n  const result = await Api.getUser();\r\n\r\n  if (result !== 'ERROR') {\r\n    metaData.user = result;\r\n    metaData.login = result.login;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst getProjectDeveloper = async (mode) => {\r\n  const dataList = {};\r\n  let result;\r\n\r\n  if (mode === 'project') result = await Api.getProject();\r\n  if (mode === 'developer') result = await Api.getDeveloper();\r\n\r\n  if (result !== 'ERROR') {\r\n    result.forEach((info) => {\r\n      dataList[info.id] = { id: info.id, value: info.value };\r\n    });\r\n  }\r\n\r\n  return dataList;\r\n};\r\n\r\n/* get meta/data etc function */\r\n// eslint-disable-next-line consistent-return\r\nexport const getData = async (mode, type = 'initialize') => {\r\n  if (mode === 'user') {\r\n    const result = await getUser();\r\n    return result;\r\n  }\r\n\r\n  if (mode === 'project' || mode === 'developer') {\r\n    const result = await getProjectDeveloper(mode);\r\n\r\n    if (!result || Object.keys(result).length === 0) {\r\n      throw new Error('Data not uploaded');\r\n    } else {\r\n      metaData[`${mode}List`] = { ...result };\r\n      return result;\r\n    }\r\n  }\r\n\r\n  if (mainModes.map((m) => `${m}_meta`).includes(mode)) {\r\n    if (!metaData.tables[mode]) {\r\n      const result = await Api.getMetaData(mode);\r\n\r\n      if (result !== 'ERROR') {\r\n        metaData.tables[mode] = {};\r\n        metaData.tables[mode].dataTable = {};\r\n\r\n        result.forEach((infoR) => {\r\n          const infoKey = Object.keys(infoR)[0];\r\n          const info = Object.values(infoR)[0];\r\n\r\n          Object.keys(info).forEach((key) => {\r\n            if (metaData.mobile && typeof info.showInTableMobile !== 'undefined')\r\n              info.showInTable = info.showInTableMobile;\r\n\r\n            if (info[key] === 'true') info[key] = true;\r\n            if (info[key] === 'false') info[key] = false;\r\n          });\r\n\r\n          if (infoKey === 'specificParameters') {\r\n            metaData.tables[mode][infoKey] = info;\r\n          } else if (typeof info.validValues !== 'undefined' && info.validValues !== '') {\r\n            metaData.tables[mode][`${info.id}List`] = info.validValues;\r\n          } else if (\r\n            (typeof info.validValues === 'undefined' || info.validValues === '') &&\r\n            (info.type === 'select' || info.type === 'multi-select') &&\r\n            info.vocabulary &&\r\n            metaData[`${info.vocabulary}List`]\r\n          ) {\r\n            metaData.tables[mode][`${info.id}List`] = metaData[`${info.vocabulary}List`];\r\n          }\r\n\r\n          if (infoKey !== 'specificParameters') {\r\n            metaData.tables[mode].dataTable[info.id] = info;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    if (metaData.tables[mode] && mode === `${metaData.dataTableName}_meta`) {\r\n      Object.keys(metaData.tables[mode]).forEach((key) => {\r\n        metaData[key] = metaData.tables[mode][key];\r\n      });\r\n      resetDataTable();\r\n    }\r\n\r\n    Object.keys(metaData.dataTable).forEach((prop) => {\r\n      const propInfo = metaData.dataTable[prop];\r\n      if (\r\n        (propInfo.type === 'select' || propInfo.type === 'multi-select') &&\r\n        !metaData[`${prop}List`] &&\r\n        propInfo.vocabulary &&\r\n        metaData[`${propInfo.vocabulary}List`]\r\n      ) {\r\n        metaData[`${prop}List`] = metaData[`${propInfo.vocabulary}List`];\r\n      }\r\n    });\r\n\r\n    filters.setKeys(metaData.dataTable);\r\n  }\r\n\r\n  const data = [];\r\n  if (mainModes.includes(mode)) {\r\n    const result = await Api.getData(mode);\r\n\r\n    if (result !== 'ERROR') {\r\n      if (type === 'initialize') resetDataTable();\r\n\r\n      for (let i = 0; i < result.length; i++) {\r\n        const info = result[i];\r\n\r\n        try {\r\n          info.id = parseInt(info.id, 10);\r\n        } catch (e) {\r\n          console.error('Ошибка: невозможно поле id сделать integer');\r\n        }\r\n\r\n        if (type === 'meta') {\r\n          if (!metaData[`${mode}List`]) metaData[`${mode}List`] = {};\r\n          metaData[`${mode}List`][info.id] = info;\r\n        } else if (type === 'initialize') {\r\n          dataTable.push(info);\r\n        } else if (type === 'direct') {\r\n          data.push(info);\r\n        }\r\n      }\r\n\r\n      if (type === 'direct') {\r\n        return data;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/* put/delete/patch data */\r\nexport const doData = async (mode, data, id, feature = 'task') => {\r\n  let json = {};\r\n  let error = true;\r\n\r\n  if (!['put', 'delete', 'patch', 'notify'].includes(mode)) {\r\n    console.error(`Mode [${mode}] is not available`);\r\n  } else {\r\n    try {\r\n      const body = {\r\n        feature,\r\n        data: { data, id },\r\n      };\r\n\r\n      let result;\r\n      if (mode === 'put') result = await Api.putData(feature, body);\r\n      if (mode === 'patch') result = await Api.patchData(feature, body);\r\n      if (mode === 'delete') result = await Api.deleteData(feature, body);\r\n      if (mode === 'notify') result = await Api.postData(feature, { ...body, method: mode });\r\n\r\n      json = result;\r\n      if (result !== 'ERROR') {\r\n        error = false;\r\n      }\r\n    } catch (err) {\r\n      console.log(`Unexpected error ${err}`); // Failed to fetch\r\n    }\r\n  }\r\n\r\n  return [error, json];\r\n};\r\n\r\n/* file uploader function */\r\nexport async function fileUpload(file) {\r\n  const urlUploadApi = '/smisplan/cgi/upload.pl';\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  let json = {};\r\n  let error = true;\r\n  try {\r\n    const response = await fetch(urlUploadApi, {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n\r\n    if (response && response.ok) {\r\n      json = await response.json();\r\n\r\n      if (json.status === 'OK') {\r\n        error = false;\r\n      } else if (json.error) {\r\n        console.log(`Ошибка запроса: ${json.error}`);\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.log(`Unexpected error ${err}`); // Failed to fetch\r\n  }\r\n\r\n  return [json, error];\r\n}\r\n","import React from 'react';\r\nimport { Tab, Tabs, AppBar } from '@material-ui/core';\r\nimport { Switch, Route, Link, Redirect } from 'react-router-dom';\r\n\r\nimport storage from '../../storages/commonStorage';\r\nimport { modes, mainModes } from '../../config/constants';\r\nimport { filters } from '../../utils/filters';\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `modes-tab-${index}`,\r\n    'aria-controls': `modes-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nfunction HeaderModes({ reloadDataTable }) {\r\n  const hostpath = window.location.href.search(/localhost:3000/) !== -1 ? '' : 'smisplan2';\r\n  // const hostpath = '';\r\n\r\n  const getMode = (pathname) => {\r\n    const pathArray = pathname.split('/').slice(1);\r\n    if (pathArray[0] === hostpath) pathArray.shift();\r\n\r\n    return mainModes.includes(pathArray[0]) ? pathArray[0] : 'task';\r\n  };\r\n\r\n  const tableName = getMode(document.location.pathname);\r\n  console.log(tableName);\r\n\r\n  const [value, setValue] = React.useState(\r\n    `${hostpath && `/${hostpath}`}/${mainModes.includes(tableName) ? tableName : 'task'}`\r\n  );\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n    const mode = getMode(newValue);\r\n\r\n    filters.clearAll();\r\n    reloadDataTable(mode);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const subscribe = () => {\r\n      storage.table.subscribe(() => {\r\n        const storageTableName = storage.table.getState().TABLE.tableName;\r\n        if (storageTableName) {\r\n          setValue(`${hostpath && `/${hostpath}`}/${storageTableName}`);\r\n        }\r\n      });\r\n    };\r\n\r\n    subscribe();\r\n    return subscribe();\r\n  }, [hostpath]);\r\n\r\n  return (\r\n    <AppBar position=\"static\" className=\"header-modes-projects__bar\" color=\"default\">\r\n      <Route\r\n        path=\"/\"\r\n        render={() => (\r\n          <>\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              aria-label=\"scrollable auto tabs example\"\r\n            >\r\n              {modes.map((mode, index) => (\r\n                <Tab\r\n                  className=\"header-modes-projects__modes-item\"\r\n                  label={mode.value}\r\n                  {...a11yProps(index)}\r\n                  key={mode.id}\r\n                  disabled={mode.disabled}\r\n                  value={`${hostpath && `/${hostpath}`}/${mode.id}`}\r\n                  to={`${hostpath && `/${hostpath}`}/${mode.id}`}\r\n                  component={Link}\r\n                />\r\n              ))}\r\n            </Tabs>\r\n            <Switch>\r\n              {modes.map((mode) => (\r\n                <Route path={`${hostpath && `/${hostpath}`}/${mode.id}`} key={`Link-${mode.id}`} />\r\n              ))}\r\n              <Redirect to={`${hostpath && `/${hostpath}`}/${tableName}`} />\r\n            </Switch>\r\n          </>\r\n        )}\r\n      />\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default React.memo(HeaderModes);\r\n","import React from 'react';\r\nimport { Tab, Tabs, AppBar } from '@material-ui/core';\r\n\r\nimport { filters } from '../../utils/filters';\r\nimport { getData } from '../../utils/apiFunctions';\r\nimport storage from '../../storages/commonStorage';\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `projects-tab-${index}`,\r\n    'aria-controls': `projects-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nfunction HeaderProjects({ dataTable, projectList }) {\r\n  const [value, setValue] = React.useState(0);\r\n  const [projects, setProjects] = React.useState(Object.values(projectList || {}));\r\n\r\n  const reloadActiveProjects = () => {\r\n    const projectsHash = {};\r\n\r\n    dataTable.forEach((data) => {\r\n      projectsHash[data.project] = true;\r\n    });\r\n    const projectsActive = {};\r\n    const projectsOther = {};\r\n\r\n    Object.keys(projectList).forEach((project) => {\r\n      const projectInfo = { ...projectList[project] };\r\n\r\n      if (projectsHash[project] && !projectsActive[project]) {\r\n        projectInfo.showAsDisabled = false;\r\n        projectsActive[project] = projectInfo;\r\n      }\r\n\r\n      if (!projectsHash[project] && !projectsOther[project]) {\r\n        projectInfo.showAsDisabled = true;\r\n        projectsOther[project] = projectInfo;\r\n      }\r\n    });\r\n\r\n    const projectsReloaded = [];\r\n    Object.values(projectsActive)\r\n      .sort((a, b) => (a.value >= b.value ? 1 : -1))\r\n      .map((project) => projectsReloaded.push(project));\r\n    Object.values(projectsOther)\r\n      .sort((a, b) => (a.value >= b.value ? 1 : -1))\r\n      .map((project) => projectsReloaded.push(project));\r\n\r\n    setProjects(projectsReloaded);\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    filters.setValue('data', 'project', newValue === 0 ? '' : projects[newValue - 1].id);\r\n\r\n    storage.data.dispatch({ type: 'REDRAW', redraw: true });\r\n    setValue(newValue);\r\n  };\r\n\r\n  const unsubscribe = storage.state.subscribe(() => {\r\n    const { dataLoading } = storage.state.getState().STATE;\r\n\r\n    if (dataLoading && dataLoading === 'data') {\r\n      setValue(0);\r\n      reloadActiveProjects();\r\n    }\r\n  });\r\n\r\n  const unsubscribeUpd = storage.upd.subscribe(() => {\r\n    if (storage.upd.getState().UPD.update) {\r\n      reloadActiveProjects();\r\n    }\r\n  });\r\n\r\n  const unsubscribeData = storage.data.subscribe(() => {\r\n    const { redraw } = storage.data.getState().DATA;\r\n    if (redraw && (!filters.data.project || filters.data.project === '') && value > 0) {\r\n      setValue(0);\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    getData('project').then((list) => setProjects(Object.values(list)));\r\n\r\n    unsubscribe();\r\n    unsubscribeUpd();\r\n    unsubscribeData();\r\n\r\n    return () => {\r\n      unsubscribe();\r\n      unsubscribeUpd();\r\n      unsubscribeData();\r\n    };\r\n  }, []);\r\n\r\n  const classes = {};\r\n\r\n  return (\r\n    <AppBar position=\"static\" className=\"header-modes-projects__bar\" color=\"default\">\r\n      <Tabs\r\n        value={value}\r\n        onChange={handleChange}\r\n        indicatorColor=\"primary\"\r\n        textColor=\"primary\"\r\n        variant=\"scrollable\"\r\n        scrollButtons=\"on\"\r\n        aria-label=\"scrollable auto tabs example\"\r\n      >\r\n        <Tab\r\n          label=\"Все\"\r\n          {...a11yProps(0)}\r\n          key=\"all\"\r\n          classes={{ root: classes.tabStyles }}\r\n          className=\"header-modes-projects__modes-item\"\r\n        />\r\n\r\n        {projects.map((project, index) => (\r\n          <Tab\r\n            label={project.value}\r\n            {...a11yProps(index + 1)}\r\n            key={project.id}\r\n            disabled={project.showAsDisabled}\r\n            classes={{ root: classes.tabStyles }}\r\n            className=\"header-modes-projects__modes-item\"\r\n          />\r\n        ))}\r\n      </Tabs>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default React.memo(HeaderProjects);\r\n","import React from 'react';\r\n\r\nimport HeaderModes from './HeaderModes';\r\nimport HeaderProjects from './HeaderProjects';\r\nimport './Header.css';\r\n\r\nfunction Header({ dataTable, projectList, reloadDataTable }) {\r\n  return (\r\n    <div className=\"header-modes-projects\">\r\n      <HeaderModes reloadDataTable={reloadDataTable} />\r\n      <HeaderProjects className=\"divProjectList\" dataTable={dataTable} projectList={projectList} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Header);\r\n","import React from 'react';\r\nimport { MenuItem, Checkbox } from '@material-ui/core';\r\nimport { filters } from '../utils/filters';\r\n\r\nfunction MenuItemsList({ itemsList, name, onChange, hasStartCheckbox, checkFunction }) {\r\n  return itemsList.map((item) => {\r\n    const handleItemClick = onChange.bind(null, item.id);\r\n    return (\r\n      <MenuItem\r\n        key={`menu-${name}-${item.id}`}\r\n        style={{ backgroundColor: filters.data[name] === item.id ? 'var(--color-active)' : '' }}\r\n        onClick={handleItemClick}\r\n      >\r\n        {hasStartCheckbox && (\r\n          <Checkbox\r\n            className=\"menu-item-settings__menu-checkbox\"\r\n            edge=\"start\"\r\n            checked={checkFunction(item.id)}\r\n            tabIndex={-1}\r\n            disableRipple\r\n          />\r\n        )}\r\n        {item.value}\r\n      </MenuItem>\r\n    );\r\n  });\r\n}\r\n\r\nexport default React.memo(MenuItemsList);\r\n","import React from 'react';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport ArrowRight from '@material-ui/icons/ArrowRight';\r\n\r\nimport { metaData } from '../../config/data';\r\nimport storage from '../../storages/commonStorage';\r\nimport CustomIcon from '../../SharedComponents/CustomIcon';\r\nimport MenuItemsList from '../../SharedComponents/MenuItemsList';\r\nimport './MenuItemSettings.css';\r\n\r\nexport default function MenuItemSettings({ name }) {\r\n  const [menuEl, setMenuEl] = React.useState(null);\r\n  const [menuElColors, setMenuElColors] = React.useState(null);\r\n  const [menuElColumns, setMenuElColumns] = React.useState(null);\r\n  const [checkedElSubList, setCheckedElSubList] = React.useState([]);\r\n\r\n  const unsubscribe = storage.state.subscribe(() => {\r\n    const { dataLoading } = storage.state.getState().STATE;\r\n    if (dataLoading && dataLoading === 'data') {\r\n      setCheckedElSubList(\r\n        Object.keys(metaData.dataTable).filter((k) => metaData.dataTable[k].showInTable)\r\n      );\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    unsubscribe();\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const handleChangeColor = (filter) => {\r\n    const root = document.documentElement;\r\n\r\n    const colorIcons = getComputedStyle(root).getPropertyValue(`--icons-filter-${filter}`);\r\n    root.style.setProperty('--icons-filter', colorIcons);\r\n    const colorHover = getComputedStyle(root).getPropertyValue(`--hover-filter-${filter}`);\r\n    root.style.setProperty('--hover-filter', colorHover);\r\n\r\n    setMenuElColors(null);\r\n    setMenuEl(null);\r\n  };\r\n\r\n  // const handleChangeColumns = (id) => () => {\r\n  const handleChangeColumns = (id) => {\r\n    let checkedElSubListNew = [];\r\n    if (checkedElSubList.includes(id)) {\r\n      metaData.dataTable[id].showInTable = false;\r\n      checkedElSubListNew = checkedElSubList.filter((a) => a !== id);\r\n    } else {\r\n      metaData.dataTable[id].showInTable = true;\r\n      checkedElSubListNew = checkedElSubList.concat(id);\r\n    }\r\n\r\n    storage.state.dispatch({ type: 'SET_DATALOADING', stage: 'meta' });\r\n\r\n    setCheckedElSubList(checkedElSubListNew);\r\n    setMenuElColumns(null);\r\n    setMenuEl(null);\r\n  };\r\n\r\n  const openMenuItem = (cb) => (e) => cb(e.currentTarget);\r\n  const closeMenuItem = (cb, item) => () => cb(item);\r\n\r\n  const colorsList = [\r\n    { id: 'standart', value: 'Стандaртная схема' },\r\n    { id: 'red', value: 'Красная схема' },\r\n    { id: 'blue', value: 'Синяя схема' },\r\n  ];\r\n  const columnsList = Object.values(metaData.dataTable)\r\n    .filter((a) => a.value && a.value !== '')\r\n    .sort((a, b) => (a.value >= b.value ? 1 : -1));\r\n\r\n  return (\r\n    <div>\r\n      <CustomIcon\r\n        class=\"icn_settings\"\r\n        tip=\"Опции и настройки\"\r\n        fontSize=\"large\"\r\n        action={openMenuItem(setMenuEl)}\r\n      />\r\n      <Menu\r\n        anchorEl={menuEl}\r\n        keepMounted\r\n        open={!!menuEl}\r\n        onClose={closeMenuItem(setMenuEl, null)}\r\n        className=\"menu-item-settings\"\r\n      >\r\n        {/* Colors menu - START */}\r\n        <MenuItem className=\"menu-item-settings__item\" onClick={openMenuItem(setMenuElColors)}>\r\n          <div>Цветовая схема</div>\r\n          <ArrowRight fontSize=\"medium\" />\r\n        </MenuItem>\r\n        <Menu\r\n          anchorEl={menuElColors}\r\n          keepMounted\r\n          open={!!menuElColors}\r\n          onClose={closeMenuItem(setMenuElColors, null)}\r\n          className=\"menu-item-settings__item-menu\"\r\n        >\r\n          <MenuItemsList itemsList={colorsList} name={name} onChange={handleChangeColor} />\r\n        </Menu>\r\n\r\n        {/* Columns menu - START */}\r\n        <MenuItem className=\"menu-item-settings__item\" onClick={openMenuItem(setMenuElColumns)}>\r\n          <div>Колонки</div>\r\n          <ArrowRight fontSize=\"medium\" />\r\n        </MenuItem>\r\n        <Menu\r\n          anchorEl={menuElColumns}\r\n          keepMounted\r\n          open={!!menuElColumns}\r\n          onClose={closeMenuItem(setMenuElColumns, null)}\r\n          className=\"menu-item-settings__item-menu\"\r\n        >\r\n          <MenuItemsList\r\n            itemsList={columnsList}\r\n            name={name}\r\n            onChange={handleChangeColumns}\r\n            hasStartCheckbox\r\n            checkFunction={(e) => checkedElSubList.includes(e)}\r\n          />\r\n        </Menu>\r\n\r\n        <MenuItem key=\"manual\" onClick={closeMenuItem(setMenuEl, null)}>\r\n          <div className=\"menu-item-settings__item\">Инструкция</div>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Menu, MenuItem, ListItemIcon, Typography } from '@material-ui/core';\r\n\r\nimport { filters } from '../../utils/filters';\r\nimport { doData } from '../../utils/apiFunctions';\r\nimport storage from '../../storages/commonStorage';\r\nimport CustomIcon from '../../SharedComponents/CustomIcon';\r\nimport DateW from '../../utils/date';\r\nimport './MenuItemChief.css';\r\n\r\nfunction MenuItemChief(props) {\r\n  const [menuEl, setMenuEl] = React.useState(null);\r\n\r\n  const currentDate = new DateW();\r\n  const currentWeek = currentDate.getWeek();\r\n\r\n  const handleOpenMenuEl = (e) => setMenuEl(e.currentTarget);\r\n  const handleCloseMenuEl = () => setMenuEl(null);\r\n\r\n  const sendNotification = () => {\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт отправка уведомлений...',\r\n    });\r\n    const data = {\r\n      week: `${currentDate.getFullYear()}.${currentWeek + (currentDate.getDay() >= 5 ? 1 : 0)}`,\r\n      mode: 'done',\r\n      feature: 'discussion',\r\n    };\r\n    doData('notify', data, undefined, 'notification').then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при отправке уведомления',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Уведомление послано успешно',\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const goToCurrentWeekDiscussion = () => {\r\n    const loadTableName = 'discussion';\r\n\r\n    props.reloadDataTable(loadTableName, () => {\r\n      filters.data.week = `${currentDate.getFullYear()}.${\r\n        currentWeek + (currentDate.getDay() >= 5 ? 1 : 0)\r\n      }`;\r\n    });\r\n  };\r\n\r\n  const handleClickItem = (menuItem) => () => {\r\n    if (menuItem === 'notification') {\r\n      sendNotification();\r\n    } else if (menuItem === 'discussion') {\r\n      goToCurrentWeekDiscussion();\r\n    }\r\n    setMenuEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <CustomIcon\r\n        class={props.class}\r\n        tip=\"Для начальника\"\r\n        fontSize=\"large\"\r\n        action={handleOpenMenuEl}\r\n      />\r\n\r\n      <Menu\r\n        id={`filter-menu-id-${props.name}`}\r\n        anchorEl={menuEl}\r\n        keepMounted\r\n        open={Boolean(menuEl)}\r\n        onClose={handleCloseMenuEl}\r\n        className=\"menu-item-chief\"\r\n      >\r\n        <MenuItem key={`menu-${props.name}-discussion`} onClick={handleClickItem('discussion')}>\r\n          <ListItemIcon>\r\n            <CustomIcon class=\"icn_discussionList\" tip=\"Перейти к списку расписаний на неделю\" />\r\n          </ListItemIcon>\r\n          <Typography variant=\"inherit\" noWrap>\r\n            Расписание обсуждений\r\n          </Typography>\r\n        </MenuItem>\r\n\r\n        <MenuItem key={`menu-${props.name}-notification`} onClick={handleClickItem('notification')}>\r\n          <ListItemIcon>\r\n            <CustomIcon\r\n              class=\"icn_notification\"\r\n              tip=\"Отправить оповещения об обсуждениях на текущей неделе\"\r\n            />\r\n          </ListItemIcon>\r\n          <Typography variant=\"inherit\" noWrap>\r\n            Уведомление об обсуждениях\r\n          </Typography>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(MenuItemChief);\r\n","import React from 'react';\r\nimport { IconButton, Tooltip } from '@material-ui/core';\r\nimport PrintIcon from '@material-ui/icons/Print';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport ReactToPrint from 'react-to-print';\r\n\r\nimport { filters } from '../../utils/filters';\r\nimport { getData } from '../../utils/apiFunctions';\r\nimport MenuItemSettings from '../MenuItemSettings/MenuItemSettings';\r\nimport MenuItemChief from '../MenuItemChief/MenuItemChief';\r\nimport storage from '../../storages/commonStorage';\r\nimport './HeaderLogin.css';\r\n\r\nfunction HeaderLogin({ reloadDataTable, dataRef }) {\r\n  const [username, setUsername] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    getData('user').then((user) => setUsername(user.username));\r\n  }, []);\r\n\r\n  const filtersOff = () => {\r\n    filters.clear();\r\n    storage.data.dispatch({ type: 'REDRAW', redraw: true });\r\n  };\r\n\r\n  return (\r\n    <div className=\"header-login\">\r\n      <div className=\"header-login__menu\">\r\n        <ReactToPrint\r\n          trigger={() => (\r\n            <Tooltip title=\"Распечатать\">\r\n              <IconButton className=\"icn\" style={{ padding: '0px' }}>\r\n                <PrintIcon fontSize=\"large\" />\r\n              </IconButton>\r\n            </Tooltip>\r\n          )}\r\n          content={() => dataRef.current}\r\n        />\r\n\r\n        <MenuItemSettings class=\"icn_filter\" name=\"MenuSettings\" />\r\n\r\n        <MenuItemChief class=\"icn_chief\" name=\"MenuChief\" reloadDataTable={reloadDataTable} />\r\n\r\n        <Tooltip title=\"Сбросить фильтры\">\r\n          <IconButton className=\"icn\" style={{ padding: '0px' }} onClick={filtersOff}>\r\n            <VisibilityIcon fontSize=\"large\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </div>\r\n      <div className=\"header-login__login\">\r\n        <b>Логин</b>: {username}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(HeaderLogin);\r\n","import React from 'react';\r\nimport { List, ListItem, ListItemText, ListItemIcon, Checkbox } from '@material-ui/core';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport { filters } from '../../utils/filters';\r\nimport storage from '../../storages/commonStorage';\r\nimport './CheckboxListFilter.css';\r\n\r\nfunction CheckboxListFilter(props) {\r\n  const [checked, setChecked] = React.useState([]);\r\n\r\n  const handleToggle = (value) => () => {\r\n    if (value !== '') {\r\n      const currentIndex = checked.indexOf(value);\r\n      const newChecked = [...checked];\r\n\r\n      if (currentIndex === -1) {\r\n        newChecked.push(value);\r\n      } else {\r\n        newChecked.splice(currentIndex, 1);\r\n      }\r\n\r\n      filters.setValue('data', props.filterType, [...newChecked]);\r\n\r\n      storage.data.dispatch({ type: 'REDRAW', redraw: true });\r\n      setChecked(newChecked);\r\n    } else {\r\n      storage.data.dispatch({ type: 'REDRAW', redraw: true });\r\n      props.updateData();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <List dense className=\"checkbox-list-filter\">\r\n      {props.options.map((key) => {\r\n        const option = key !== 'divider' ? props.optionsMap[key] : null;\r\n        const labelId = key !== 'divider' ? `checkbox-list-label-${option.id}` : null;\r\n\r\n        return key !== 'divider' ? (\r\n          <ListItem\r\n            key={option.id}\r\n            role={undefined}\r\n            size=\"small\"\r\n            className=\"checkbox-list-filter__list-item\"\r\n            button\r\n            onClick={handleToggle(option.id)}\r\n          >\r\n            <ListItemIcon>\r\n              <Checkbox\r\n                className=\"checkbox-list-filter__checkbox\"\r\n                edge=\"start\"\r\n                checked={checked.includes(option.id)}\r\n                tabIndex={-1}\r\n                disableRipple\r\n                inputProps={{ 'aria-labelledby': labelId }}\r\n              />\r\n            </ListItemIcon>\r\n            <ListItemText\r\n              id={labelId}\r\n              primary={`${option.value}`}\r\n              className=\"checkbox-list-filter__text\"\r\n            />\r\n          </ListItem>\r\n        ) : (\r\n          <Divider key=\"divider\" />\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default React.memo(CheckboxListFilter);\r\n","import React from 'react';\r\nimport CheckboxListFilter from '../../SharedComponents/CheckboxListFilter/CheckboxListFilter';\r\n\r\nimport { filters } from '../../utils/filters';\r\nimport storage from '../../storages/commonStorage';\r\n\r\nexport default function DevelopersFilter({ inputFilter, developersList, metaData, dataTable }) {\r\n  const [developers, setDevelopers] = React.useState(developersList);\r\n\r\n  const resortActive = (developerList) => {\r\n    const activeDevsList = [];\r\n    if (dataTable) {\r\n      dataTable.forEach((row) => {\r\n        if (row.author && row.author !== '' && !activeDevsList.includes(row.author)) {\r\n          activeDevsList.push(row.author);\r\n        }\r\n        if (row.developer && row.developer !== '' && !activeDevsList.includes(row.developer)) {\r\n          activeDevsList.push(row.developer);\r\n        }\r\n      });\r\n    }\r\n\r\n    const activeDevs = {};\r\n    const nonActiveDevs = {};\r\n    if (Object.keys(developerList).length > 0) {\r\n      Object.keys(developerList).forEach((dev) => {\r\n        if (activeDevsList.includes(dev)) {\r\n          activeDevs[dev] = developerList[dev];\r\n        } else {\r\n          nonActiveDevs[dev] = developerList[dev];\r\n        }\r\n      });\r\n    }\r\n\r\n    return [activeDevs, nonActiveDevs];\r\n  };\r\n\r\n  const resortDevelopers = (inputDevelopers = metaData.developerList) => {\r\n    const sortedDevelopers = resortActive(inputDevelopers);\r\n\r\n    const outputDevelopers = [];\r\n    if (Object.keys(sortedDevelopers[0]).length > 0) {\r\n      Object.keys(sortedDevelopers[0])\r\n        .sort((a, b) => (sortedDevelopers[0][a].value >= sortedDevelopers[0][b].value ? 1 : -1))\r\n        .map((key) => outputDevelopers.push(key));\r\n      outputDevelopers.push('divider');\r\n      Object.keys(sortedDevelopers[1])\r\n        .sort((a, b) => (sortedDevelopers[1][a].value >= sortedDevelopers[1][b].value ? 1 : -1))\r\n        .map((key) => outputDevelopers.push(key));\r\n    } else if (Object.keys(sortedDevelopers[1]).length > 0) {\r\n      Object.keys(sortedDevelopers[1])\r\n        .sort((a, b) => (sortedDevelopers[1][a].value >= sortedDevelopers[1][b].value ? 1 : -1))\r\n        .map((key) => outputDevelopers.push(key));\r\n    } else {\r\n      Object.keys(inputDevelopers)\r\n        .sort((a, b) => (inputDevelopers[a].value >= inputDevelopers[b].value ? 1 : -1))\r\n        .map((key) => outputDevelopers.push(key));\r\n    }\r\n\r\n    return outputDevelopers;\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = storage.state.subscribe(() => {\r\n      const { dataLoading } = storage.state.getState().STATE;\r\n      if (dataLoading && dataLoading === 'data') {\r\n        setDevelopers(resortDevelopers());\r\n      }\r\n\r\n      if (inputFilter) {\r\n        filters.setValue('data', 'developer', [inputFilter]);\r\n        storage.data.dispatch({ type: 'REDRAW', redraw: true });\r\n      }\r\n    });\r\n\r\n    const unsubscribeUpd = storage.upd.subscribe(() => {\r\n      if (storage.upd.getState().UPD.update) {\r\n        setDevelopers(resortDevelopers());\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n      unsubscribeUpd();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <CheckboxListFilter\r\n      options={developers}\r\n      optionsMap={metaData.developerList}\r\n      inputFilter={inputFilter}\r\n      filterType=\"developer\"\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Drawer } from '@material-ui/core';\r\n\r\nimport CustomIcon from '../../SharedComponents/CustomIcon';\r\nimport storage from '../../storages/commonStorage';\r\nimport DevelopersFilter from '../DevelopersFilter/DevelopersFilter';\r\nimport './MainLeftSide.css';\r\n\r\nfunction MainLeftSide({ developers, developer, metaData, dataTable }) {\r\n  const [open, setOpen] = React.useState(true);\r\n\r\n  const handleOpen = (isOpened) => {\r\n    const root = document.documentElement;\r\n\r\n    const widthDefault = getComputedStyle(root).getPropertyValue('--width-left-side');\r\n    root.style.setProperty('--width-left-side-bottom', !isOpened ? '0px' : widthDefault);\r\n\r\n    setOpen(isOpened);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = storage.state.subscribe(() => {\r\n      const { dataLoading } = storage.state.getState().STATE;\r\n      if (dataLoading && dataLoading === 'data') {\r\n        if (['discussion', 'calendar'].includes(metaData.dataTableName)) {\r\n          handleOpen(false);\r\n        } else {\r\n          handleOpen(true);\r\n        }\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const handleToggle = () => handleOpen(!open);\r\n\r\n  const developersList = Object.values(developers).map((d) => ({ id: d.id, value: d.value }));\r\n\r\n  return [\r\n    <Drawer\r\n      key=\"leftSideDrawer\"\r\n      variant=\"persistent\"\r\n      anchor=\"left\"\r\n      open={open}\r\n      classes={{ paper: 'left-side-bar' }}\r\n    >\r\n      <DevelopersFilter\r\n        inputFilter={developer}\r\n        developersList={developersList}\r\n        metaData={metaData}\r\n        dataTable={dataTable}\r\n      />\r\n    </Drawer>,\r\n    <div key=\"showHideButton\" className=\"divSpacingBottom\">\r\n      <CustomIcon\r\n        class={`${open ? 'icn_arrow_left_fill' : 'icn_arrow_right_fill'}`}\r\n        tip={`${open ? 'Свернуть' : 'Показать'}`}\r\n        fontSize=\"large\"\r\n        action={handleToggle}\r\n        style={{ borderRadius: '0px' }}\r\n      />\r\n    </div>,\r\n  ];\r\n}\r\n\r\nexport default React.memo(MainLeftSide);\r\n","import CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nexport default function LoadingComponent() {\r\n  return (\r\n    <div style={{ textAlign: 'center', paddingTop: '200px' }}>\r\n      <CircularProgress style={{ width: '100px', height: '100px' }} />;\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { TableRow, TableCell } from '@material-ui/core';\r\nimport LoadingComponent from '../Components/LoadingComponent/LoadingComponent';\r\n\r\nfunction CustomSuspenseFallback({ type }) {\r\n  return (\r\n    <>\r\n      {type === 'loading' && <LoadingComponent />}\r\n      {type === 'textNode' && <p>...</p>}\r\n      {type === 'row' && (\r\n        <TableRow>\r\n          <TableCell>...</TableCell>\r\n        </TableRow>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default React.memo(CustomSuspenseFallback);\r\n","import React from 'react';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport MomentUtils from '@date-io/moment';\r\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\r\n\r\nimport { filters, filterTasks } from '../../../utils/filters';\r\nimport MenuItemsList from '../../../SharedComponents/MenuItemsList';\r\nimport CustomIcon from '../../../SharedComponents/CustomIcon';\r\n\r\nfunction TblHeaderBtnMenu({ type, name, itemList, action, all, noClosed }) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [filterField, setFilterField] = React.useState(filters.data[name]);\r\n\r\n  const handleClick = (event) => setAnchorEl(event.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  const handleClickItem = (field, value) => {\r\n    if (type === 'filter') {\r\n      if (typeof itemList !== 'object' && ['datetime', 'date'].includes(itemList)) {\r\n        setFilterField(value);\r\n      }\r\n\r\n      if (value === 'all') {\r\n        filters.data = {};\r\n      } else if (value === 'noClosed' && typeof itemList === 'object') {\r\n        filters.data[field] = [];\r\n        Object.values(itemList)\r\n          .filter((item) => item.id !== 'done')\r\n          .forEach((item) => filters.data[field].push(item.id));\r\n      } else {\r\n        filters.data[field] = value;\r\n      }\r\n      action(filterTasks());\r\n    } else if (type === 'group') {\r\n      action(value);\r\n    }\r\n\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {type === 'filter' && <CustomIcon class=\"icn_filter\" tip=\"фильтр\" action={handleClick} />}\r\n      {type === 'group' && <CustomIcon class=\"icn_group\" tip=\"группировать\" action={handleClick} />}\r\n\r\n      <Menu\r\n        id={`filter-menu-id-${name}`}\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n        className=\"tbl-header-btn-menu\"\r\n      >\r\n        {all && <MenuItem onClick={() => handleClickItem(name, 'all')}>Все</MenuItem>}\r\n\r\n        {noClosed && name === 'status' && (\r\n          <MenuItem onClick={() => handleClickItem(name, 'noClosed')}>Все открытые</MenuItem>\r\n        )}\r\n\r\n        {typeof itemList === 'object' && (\r\n          <MenuItemsList\r\n            // itemsList={itemList}\r\n            itemsList={Object.values(itemList)}\r\n            name={name}\r\n            onChange={(item) => handleClickItem(name, itemList[item].id)}\r\n          />\r\n        )}\r\n\r\n        {typeof itemList !== 'object' && itemList === 'datetime' && (\r\n          <MenuItem>\r\n            <MuiPickersUtilsProvider\r\n              utils={MomentUtils}\r\n              style={{ width: '0px', margin: '0px', marginLeft: '-18px' }}\r\n              className=\"tbl-header-btn-menu__datepicker\"\r\n            >\r\n              <KeyboardDatePicker\r\n                format=\"YYYY-MM-DD\"\r\n                margin=\"normal\"\r\n                onChange={(property, value) => {\r\n                  handleClickItem(name, value);\r\n                }}\r\n                value={filterField}\r\n                style={{ width: '0px', margin: '0px', marginLeft: '-18px' }}\r\n                className=\"tbl-header-btn-menu__datepicker\"\r\n              />\r\n            </MuiPickersUtilsProvider>\r\n          </MenuItem>\r\n        )}\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(TblHeaderBtnMenu);\r\n","import { filters } from './filters';\r\n\r\nconst getColumnWidth = (metaData, property) => {\r\n  const headCell = metaData.dataTable[property];\r\n  let width = '';\r\n  let headCellWidth = headCell.value.length * (window.innerWidth <= 1400 ? 8 : 10) + 24;\r\n  if (headCell.isFilter && !metaData.mobile) headCellWidth += 30;\r\n  if (headCell.isGroup && !metaData.mobile) headCellWidth += 30;\r\n  switch (headCell.type) {\r\n    case 'int':\r\n      width = headCellWidth > 45 ? `${headCellWidth}px` : '45px';\r\n      break;\r\n\r\n    case 'string':\r\n      if (!headCell.isInlineEditable && headCell.id !== 'theme') {\r\n        if (window.innerWidth <= 1400) {\r\n          width = headCellWidth > 90 ? `${headCellWidth}px` : '90px';\r\n        } else {\r\n          width = headCellWidth > 110 ? `${headCellWidth}px` : '110px';\r\n        }\r\n      }\r\n      break;\r\n\r\n    case 'select':\r\n      if (!headCell.isInlineEditable) {\r\n        if (window.innerWidth <= 1400) {\r\n          width = headCellWidth > 105 ? `${headCellWidth}px` : '105px';\r\n        } else {\r\n          width = headCellWidth > 120 ? `${headCellWidth}px` : '120px';\r\n        }\r\n      }\r\n      break;\r\n\r\n    case 'multi-select':\r\n      if (!headCell.isInlineEditable) {\r\n        if (window.innerWidth <= 1400) {\r\n          width = headCellWidth > 155 ? `${headCellWidth}px` : '155px';\r\n        } else {\r\n          width = headCellWidth > 170 ? `${headCellWidth}px` : '170px';\r\n        }\r\n      }\r\n      break;\r\n\r\n    case 'datetime':\r\n    case 'date':\r\n    case 'time':\r\n      if (!headCell.isInlineEditable) {\r\n        if (window.innerWidth <= 1400) {\r\n          width = headCellWidth > 80 ? `${headCellWidth}px` : '80px';\r\n        } else {\r\n          width = headCellWidth > 100 ? `${headCellWidth}px` : '100px';\r\n        }\r\n      }\r\n      break;\r\n    default:\r\n      width = '';\r\n  }\r\n  return width;\r\n};\r\n\r\nconst getAdditionalCellProps = (props) => {\r\n  let hasAdditionalCell = false;\r\n  if (\r\n    props &&\r\n    (props.hasSpecAction ||\r\n      props.hasSpecNotes ||\r\n      props.hasEditMenu ||\r\n      props.hasDeleteButton ||\r\n      props.hasDoneButton)\r\n  ) {\r\n    hasAdditionalCell = true;\r\n  }\r\n\r\n  return hasAdditionalCell;\r\n};\r\n\r\nexport const getColumnWidths = (metaData) => {\r\n  const widths = {};\r\n  Object.keys(metaData.dataTable).forEach((property) => {\r\n    if (metaData.dataTable[property].showInTable) {\r\n      widths[property] = getColumnWidth(metaData, property);\r\n    }\r\n  });\r\n\r\n  const hasAdditionalCell = getAdditionalCellProps(metaData.specificParameters);\r\n  return { widths, hasAdditionalCell };\r\n};\r\n\r\nexport const getFilterVisibility = (isHovered, headCellId) => {\r\n  const filterVifibility =\r\n    isHovered === headCellId || (filters.checkFilter(headCellId) && filters.data[headCellId] !== '')\r\n      ? 'visible'\r\n      : 'invisible';\r\n  return filterVifibility;\r\n};\r\n\r\nexport const getGroupVisibility = (isHovered, groupBy, headCellId) => {\r\n  const groupVifibility =\r\n    isHovered === headCellId || (groupBy && groupBy === headCellId) ? 'visible' : 'invisible';\r\n  return groupVifibility;\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport { TableRow, TableCell, TableSortLabel } from '@material-ui/core';\r\n\r\nimport TblHeaderBtnMenu from '../TblHeaderBtnMenu/TblHeaderBtnMenu';\r\nimport { metaData } from '../../../config/data';\r\nimport {\r\n  getColumnWidths,\r\n  getFilterVisibility,\r\n  getGroupVisibility,\r\n} from '../../../utils/tblHeaderHelpers';\r\n\r\nexport default class TblHeadEnhanced extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isHovered: '' };\r\n  }\r\n\r\n  setIsHovered = (isHovered) => () => this.setState({ isHovered });\r\n\r\n  createSortHandler = (property) => (event) => this.props.onRequestSort(event, property);\r\n\r\n  createGroupHandler = (property) => {\r\n    const { onRequestGroup, groupBy } = this.props;\r\n    onRequestGroup(undefined, groupBy === property ? '' : property);\r\n  };\r\n\r\n  render() {\r\n    const { widths, hasAdditionalCell } = getColumnWidths(metaData);\r\n\r\n    const { order, orderBy, groupBy, headCells } = this.props;\r\n    const { isHovered } = this.state;\r\n    const sort = {};\r\n    this.props.sort.forEach((f) => {\r\n      sort[f.field] = f;\r\n    });\r\n\r\n    return (\r\n      <TableRow className=\"data-table__header-row\">\r\n        {Object.values(headCells)\r\n          .filter((a) => a.showInTable)\r\n          .sort((a, b) => (a.tableIndex <= b.tableIndex ? -1 : 1))\r\n          .map((headCell) => {\r\n            const filterVisibility = getFilterVisibility(isHovered, headCell.id);\r\n            const groupVisibility = getGroupVisibility(isHovered, groupBy, headCell.id);\r\n            const minWidth = headCell.id === 'theme' ? '220px' : '';\r\n            const width = widths[headCell.id];\r\n            const filterList = ['datetime', 'date'].includes(headCell.type)\r\n              ? 'datetime'\r\n              : metaData[`${headCell.id}List`];\r\n            const groupList = {};\r\n            if (headCell.isGroup) {\r\n              groupList[headCell.id] = { id: headCell.id, value: headCell.value };\r\n              if (headCell.type === 'date') {\r\n                groupList.week = { id: 'week', value: 'Неделя' };\r\n              }\r\n            }\r\n\r\n            return (\r\n              <Fragment key={headCell.id}>\r\n                <TableCell\r\n                  align=\"left\"\r\n                  padding=\"none\"\r\n                  className=\"data-table__header-cell\"\r\n                  style={{ minWidth, width }}\r\n                  onMouseEnter={this.setIsHovered(headCell.id)}\r\n                  onMouseLeave={this.setIsHovered(undefined)}\r\n                  sortDirection={orderBy === headCell.id ? order : false}\r\n                >\r\n                  <TableSortLabel\r\n                    active={!!sort[headCell.id]}\r\n                    direction={sort[headCell.id] ? sort[headCell.id].order : 'asc'}\r\n                    onClick={this.createSortHandler(headCell.id)}\r\n                  >\r\n                    {headCell.value}\r\n                    {sort[headCell.id] ? <span /> : null}\r\n                  </TableSortLabel>\r\n\r\n                  {!metaData.mobile && headCell.isGroup && (\r\n                    <div className={`data-table__pagination-button ${groupVisibility}`}>\r\n                      <TblHeaderBtnMenu\r\n                        class=\"icn_filter\"\r\n                        name={headCell.id}\r\n                        action={this.createGroupHandler}\r\n                        type=\"group\"\r\n                        itemList={groupList}\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {!metaData.mobile && headCell.isFilter && (\r\n                    <div className={`data-table__pagination-button ${filterVisibility}`}>\r\n                      <TblHeaderBtnMenu\r\n                        class=\"icn_filter\"\r\n                        name={headCell.id}\r\n                        action={this.props.onFilter}\r\n                        all\r\n                        noClosed\r\n                        type=\"filter\"\r\n                        itemList={filterList}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </TableCell>\r\n                {headCell.isInlineEditable && headCell.type === 'string' && (\r\n                  <TableCell style={{ width: '10px' }} />\r\n                )}\r\n              </Fragment>\r\n            );\r\n          })}\r\n        {hasAdditionalCell && <TableCell style={{ width: metaData.table ? '53px' : '1px' }} />}\r\n      </TableRow>\r\n    );\r\n  }\r\n}\r\n","export default function TblCell({ headCell, value, fullTextIcon, zoomLink, youTubeLink }) {\r\n  return (\r\n    <>\r\n      {headCell.isInlineEditable && headCell.type === 'string' && (\r\n        <>\r\n          {fullTextIcon}\r\n          {zoomLink}\r\n          {youTubeLink}\r\n          {value}\r\n        </>\r\n      )}\r\n\r\n      {!headCell.isInlineEditable && !['multi-select', 'select'].includes(headCell.type) && (\r\n        <>\r\n          {fullTextIcon}\r\n          {value}\r\n        </>\r\n      )}\r\n\r\n      {/* Select non-editable cell value */}\r\n      {!headCell.isInlineEditable && headCell.type === 'select' && <>{value}</>}\r\n\r\n      {/* Multi-select non-editable cell value */}\r\n      {!headCell.isInlineEditable && headCell.type === 'multi-select' && (\r\n        <div className=\"data-table__cell-multiselect\">{value}</div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Input } from '@material-ui/core';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport CustomIcon from '../../../SharedComponents/CustomIcon';\r\n\r\nexport default function TblCellInput({ defaultValue, actionOk, actionCancel }) {\r\n  const [item, setItem] = React.useState(defaultValue);\r\n  const handleOk = () => actionOk(item.property, item.value);\r\n\r\n  return (\r\n    <Input\r\n      type=\"text\"\r\n      fullWidth\r\n      autoFocus\r\n      value={item.value}\r\n      onChange={(e) => setItem({ ...item, value: e.target.value })}\r\n      /* edit item ok / cancel buttons */\r\n      endAdornment={\r\n        <InputAdornment position=\"end\">\r\n          <div className=\"data-table__cell-edit-buttons\">\r\n            <CustomIcon class=\"icn_ok\" action={handleOk} />\r\n            <CustomIcon class=\"icn_cancel\" action={actionCancel} />\r\n          </div>\r\n        </InputAdornment>\r\n      }\r\n    />\r\n  );\r\n}\r\n","import { Suspense, lazy } from 'react';\r\nimport { TableCell } from '@material-ui/core';\r\nimport CustomSuspenseFallback from '../../../SharedComponents/CustomSuspenseFallback';\r\nimport CustomIcon from '../../../SharedComponents/CustomIcon';\r\n\r\nconst TblActionMenu = lazy(() => import('../TblActionMenu/TblActionMenu'));\r\n\r\nexport default function TblCellIcon({ showCell, showInner, type, action, ...args }) {\r\n  return (\r\n    <>\r\n      {showCell && (\r\n        <TableCell\r\n          className={`data-table__cell ${type}}`}\r\n          align=\"center\"\r\n          padding=\"none\"\r\n          style={args.style}\r\n        >\r\n          {showInner && type === 'data-table__cell_inline-edit' && (\r\n            <div className={`data-table__hover-icon ${type}`}>\r\n              <CustomIcon class=\"icn_tasks_edit\" tip={args.tip} action={action} />\r\n            </div>\r\n          )}\r\n          {showInner && type === 'data-table__hover-icon' && (\r\n            <div className={type}>\r\n              <Suspense fallback={<CustomSuspenseFallback type=\"textNode\" />}>\r\n                <TblActionMenu\r\n                  id={args.row.id}\r\n                  task={args.row}\r\n                  list={args.actionMenuList}\r\n                  onBeforeClick={action}\r\n                />\r\n              </Suspense>\r\n            </div>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Input } from '@material-ui/core';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport CustomIcon from '../../../SharedComponents/CustomIcon';\r\n\r\nfunction TblHeaderSearch(props) {\r\n  const [search, setSearch] = React.useState('');\r\n\r\n  const clearSearch = () => {\r\n    setSearch('');\r\n    props.setSearch('');\r\n  };\r\n\r\n  const handleSearch = () => props.setSearch(search);\r\n  const handleChange = (e) => setSearch(e.target.value);\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') handleSearch();\r\n    if (e.key === 'Escape') clearSearch();\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      type=\"text\"\r\n      placeholder=\"Поиск\"\r\n      value={search}\r\n      inputProps={{ style: { fontSize: 'var(--font-size-table)', width: '200px' } }}\r\n      onChange={handleChange}\r\n      onKeyDown={handleKeyDown}\r\n      startAdornment={\r\n        <InputAdornment position=\"start\">\r\n          <CustomIcon class=\"icn_search\" tip=\"Найти\" action={handleSearch} />\r\n        </InputAdornment>\r\n      }\r\n      endAdornment={\r\n        <InputAdornment position=\"end\">\r\n          <CustomIcon class=\"icn_clear\" tip=\"Сбросить поиск\" action={clearSearch} />\r\n        </InputAdornment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default React.memo(TblHeaderSearch);\r\n","import { TablePagination, Tooltip, IconButton } from '@material-ui/core';\r\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\r\nimport LastPageIcon from '@material-ui/icons/LastPage';\r\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\n\r\nexport default function TblHeaderPagination(props) {\r\n  const { count: countPages, page, rowsPerPage, onChangePage, onChangeRowsPerPage } = props;\r\n\r\n  const countTotal = Math.ceil(countPages / rowsPerPage);\r\n\r\n  const goToFirstPage = (e) => onChangePage(e, 0);\r\n  const goToPrevPage = (e) => onChangePage(e, page - 1);\r\n  const goToNextPage = (e) => onChangePage(e, page + 1);\r\n  const goToLastPage = (e) => onChangePage(e, countTotal - 1);\r\n\r\n  const TablePaginationActions = () => (\r\n    <div className=\"data-table__pagination-actions\">\r\n      <Tooltip title=\"Первая страница\" placement=\"bottom\" enterDelay={300}>\r\n        <span>\r\n          <IconButton\r\n            onClick={goToFirstPage}\r\n            disabled={page === 0}\r\n            aria-label=\"Первая\"\r\n            className=\"data-table__pagination-select\"\r\n          >\r\n            <FirstPageIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n      <Tooltip title=\"Предыдущая\" placement=\"bottom\" enterDelay={300}>\r\n        <span>\r\n          <IconButton\r\n            onClick={goToPrevPage}\r\n            disabled={page === 0}\r\n            aria-label=\"Предыдущая\"\r\n            className=\"data-table__pagination-select\"\r\n          >\r\n            <KeyboardArrowLeftIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n      <Tooltip title=\"Следующая\" placement=\"bottom\" enterDelay={300}>\r\n        <span>\r\n          <IconButton\r\n            onClick={goToNextPage}\r\n            disabled={page >= countTotal - 1}\r\n            aria-label=\"Следующая\"\r\n            className=\"data-table__pagination-select\"\r\n          >\r\n            <KeyboardArrowRightIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n      <Tooltip title=\"Последняя страница\" placement=\"bottom\" enterDelay={300}>\r\n        <span>\r\n          <IconButton\r\n            onClick={goToLastPage}\r\n            disabled={page >= countTotal - 1}\r\n            aria-label=\"Последняя\"\r\n            className=\"data-table__pagination-select\"\r\n          >\r\n            <LastPageIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <TablePagination\r\n      rowsPerPageOptions={[50, 100, 200]}\r\n      component=\"div\"\r\n      count={countPages}\r\n      rowsPerPage={rowsPerPage}\r\n      page={page}\r\n      // onChangePage={onChangePage}\r\n      // onChangeRowsPerPage={onChangeRowsPerPage}\r\n      onPageChange={onChangePage}\r\n      onRowsPerPageChange={onChangeRowsPerPage}\r\n      labelRowsPerPage=\"Выводить по\"\r\n      labelDisplayedRows={({ from, to, count }) => `${from}-${to} из ${count}`}\r\n      backIconButtonProps={{ style: { paddingTop: '0px', paddingBottom: '0px' } }}\r\n      nextIconButtonProps={{ style: { paddingTop: '0px', paddingBottom: '0px' } }}\r\n      classes={{\r\n        toolbar: 'data-table__pagination-toolbar',\r\n        select: 'data-table__pagination-select',\r\n      }}\r\n      className=\"data-table__pagination\"\r\n      ActionsComponent={TablePaginationActions}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { TableRow, TableCell } from '@material-ui/core';\r\nimport TblHeaderSearch from '../TblHeaderSearch/TblHeaderSearch';\r\nimport TblHeaderPagination from '../TblHeaderPagination/TblHeaderPagination';\r\n\r\nfunction TblHeader({\r\n  showCondition,\r\n  colSpan,\r\n  count,\r\n  onSearch,\r\n  page,\r\n  rowsPerPage,\r\n  onChangePage,\r\n  onChangeRowsPerPage,\r\n}) {\r\n  return showCondition ? (\r\n    <TableRow>\r\n      <TableCell colSpan={colSpan} className=\"data-table__pagination-cell\">\r\n        <TblHeaderSearch setSearch={onSearch} />\r\n\r\n        <TblHeaderPagination\r\n          count={count}\r\n          page={page}\r\n          rowsPerPage={rowsPerPage}\r\n          onChangePage={onChangePage}\r\n          onChangeRowsPerPage={onChangeRowsPerPage}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  ) : null;\r\n}\r\n\r\nexport default React.memo(TblHeader);\r\n","import React from 'react';\r\nimport { Dialog, DialogTitle, DialogActions, DialogContent } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nimport CustomIcon from '../../../SharedComponents/CustomIcon';\r\nimport './PopupConfirmChoice.css';\r\n\r\n// Standart dialog: confirm with choice\r\nfunction PopupConfirmChoice(props) {\r\n  const { id, action, actionName, class: className } = props;\r\n  const [open, setOpen] = React.useState(false);\r\n  const [choice, setChoice] = React.useState(0);\r\n  const [options, setOptions] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    if (open) setOptions(props.options());\r\n  }, [open, props]);\r\n\r\n  const handleOk = () => {\r\n    action(id, choice);\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleOpen = () => setOpen(true);\r\n\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const handleChange = (event) => {\r\n    const value = /^\\d+$/.test(event.target.value)\r\n      ? parseInt(event.target.value, 10)\r\n      : event.target.value;\r\n    setChoice(value);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CustomIcon class={className} tip={actionName} action={handleOpen} />\r\n\r\n      <Dialog open={open} onClose={() => setOpen(false)} aria-labelledby=\"dialog-title\" fullWidth>\r\n        <DialogTitle id=\"dialog-title\">Вы подтверждаете действие: {actionName} ?</DialogTitle>\r\n        <DialogContent>\r\n          <span className=\"popup-confirm-choice__content\">Действие невозможно отменить!</span>\r\n\r\n          <RadioGroup\r\n            aria-label=\"choice\"\r\n            name=\"choice\"\r\n            value={choice}\r\n            onChange={handleChange}\r\n            className=\"popup-confirm-choice__radio-group\"\r\n          >\r\n            {options.map((item) => (\r\n              <FormControlLabel\r\n                key={`modal-choice-${item.value}`}\r\n                value={item.value}\r\n                control={<Radio />}\r\n                label={item.name}\r\n              />\r\n            ))}\r\n          </RadioGroup>\r\n        </DialogContent>\r\n        <DialogActions className=\"popup-confirm-choice__actions\">\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={handleOk}\r\n            color=\"primary\"\r\n            className=\"MuiButton-outlinedOk\"\r\n            startIcon={<CheckIcon />}\r\n          >\r\n            Да\r\n          </Button>\r\n          <Button variant=\"outlined\" onClick={handleClose} color=\"secondary\" startIcon={<CloseIcon />}>\r\n            Отмена\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default React.memo(PopupConfirmChoice);\r\n","import { MenuItem, ListItemIcon, Typography, TableRow, TableCell } from '@material-ui/core';\r\nimport moment from 'moment';\r\nimport PopupConfirmChoice from '../../Popup/PopupConfirmChoice/PopupConfirmChoice';\r\nimport DateW from '../../../utils/date';\r\nimport CustomIcon from '../../../SharedComponents/CustomIcon';\r\n\r\nconst currentWeek = new DateW().getYearWeekStr();\r\n\r\nexport default function TblGroupRow(props) {\r\n  const weekOptionsChoice = () => {\r\n    const weekOptions = [];\r\n    for (let i = 0; i < 2; i++) {\r\n      const weekObj = { value: i };\r\n\r\n      const weekDate = new Date();\r\n      weekDate.setDate(weekDate.getDate() + 7 * i);\r\n      const weekStr = `${moment(weekDate, 'YYYY-MM-DD').startOf('week').format('DD MMMM')} - ${moment(\r\n        weekDate,\r\n        'YYYY-MM-DD'\r\n      )\r\n        .endOf('week')\r\n        .format('DD MMMM YYYY')} г`;\r\n\r\n      if (i === 0) {\r\n        weekObj.name = `Текущая неделя: ${weekStr}`;\r\n      } else if (i === 1) {\r\n        weekObj.name = `Следующая неделя: ${weekStr}`;\r\n      } else {\r\n        weekObj.name = `${i}-я неделя: ${weekStr}`;\r\n      }\r\n\r\n      weekOptions.push(weekObj);\r\n    }\r\n\r\n    return weekOptions;\r\n  };\r\n\r\n  const dayOptionsChoice = () => {\r\n    const dayOptions = [{ value: 0, name: 'Вся неделя' }];\r\n\r\n    props.weekData\r\n      .sort((a, b) => (a.date < b.date ? -1 : 1))\r\n      .foreEach((data) => {\r\n        if (!dayOptions.map((e) => e.value).includes(data.date)) {\r\n          const date = moment(data.date, 'YYYY-MM-DD');\r\n          dayOptions.push({ value: data.date, name: date.format('dddd, DD MMMM YYYY') });\r\n        }\r\n      });\r\n    return dayOptions;\r\n  };\r\n\r\n  const { fullColsNum, getDateGroup, row, groupBy, groupValue, groupHide } = props;\r\n  const showGrouped = groupHide[getDateGroup(row[groupBy])];\r\n  return (\r\n    <TableRow>\r\n      <TableCell\r\n        colSpan={props.tableName === 'discussion' ? fullColsNum - 4 : fullColsNum - 1}\r\n        className=\"data-table__row-title\"\r\n      >\r\n        <MenuItem\r\n          colSpan={fullColsNum}\r\n          style={{ paddingTop: '0px', paddingBottom: '0px' }}\r\n          onClick={() => {\r\n            groupHide[getDateGroup(row[groupBy])] = !showGrouped;\r\n            return props.setGroup(groupHide);\r\n          }}\r\n        >\r\n          <ListItemIcon>\r\n            <CustomIcon\r\n              class={`${showGrouped ? 'icn_arrow_right' : 'icn_arrow_down'}`}\r\n              tip={`${showGrouped ? 'Показать' : 'Свернуть'}`}\r\n              action={() => props.setGroup(groupHide)}\r\n            />\r\n          </ListItemIcon>\r\n\r\n          <Typography variant=\"inherit\" noWrap style={{ fontSize: 'var(--font-size-table)' }}>\r\n            {props.headCells[groupBy].value}: {groupValue}\r\n          </Typography>\r\n        </MenuItem>\r\n      </TableCell>\r\n      {props.tableName === 'discussion' && (\r\n        <>\r\n          <TableCell colSpan={3} className=\"data-table__row-title_right\">\r\n            {currentWeek === row.week ? (\r\n              <>\r\n                <PopupConfirmChoice\r\n                  class=\"icn_notification\"\r\n                  id={row.week}\r\n                  options={dayOptionsChoice}\r\n                  action={props.sendNotification}\r\n                  actionName=\"отправка уведомлений об обсуждениях\"\r\n                />\r\n                &emsp;&emsp;\r\n              </>\r\n            ) : (\r\n              <span style={{ width: '50px', display: 'inline-block' }}>&nbsp;</span>\r\n            )}\r\n            <CustomIcon\r\n              class=\"icn_description\"\r\n              tip=\"Показать все обсуждения недели\"\r\n              action={props.toggleDescription}\r\n            />\r\n            &emsp;&emsp;\r\n            <PopupConfirmChoice\r\n              class=\"icn_discussionCopy\"\r\n              id={row[groupBy]}\r\n              options={weekOptionsChoice}\r\n              action={props.copyPreviousWeekDiscussions}\r\n              actionName=\"копирование обсуждений недели\"\r\n            />\r\n          </TableCell>\r\n        </>\r\n      )}\r\n    </TableRow>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { TableRow, TableCell } from '@material-ui/core';\r\n\r\nfunction TblRowText({ showCondition, colSpan, text, className }) {\r\n  return showCondition ? (\r\n    <TableRow>\r\n      <TableCell colSpan={colSpan} className={className}>\r\n        {text}\r\n      </TableCell>\r\n    </TableRow>\r\n  ) : null;\r\n}\r\n\r\nexport default React.memo(TblRowText);\r\n","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nfunction TblLoading() {\r\n  return (\r\n    <div className=\"data-table__loading\">\r\n      <CircularProgress style={{ width: '100px', height: '100px' }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(TblLoading);\r\n","import React, { Fragment, Suspense, lazy } from 'react';\r\nimport { Table, TableHead, TableBody, TableRow, TableCell } from '@material-ui/core';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ru';\r\n\r\nimport { dataTable, metaData } from '../../config/data';\r\nimport { filters, filterTasks } from '../../utils/filters';\r\nimport { doData, getData } from '../../utils/apiFunctions';\r\nimport storage from '../../storages/commonStorage';\r\nimport TblHeadEnhanced from '../Table/TblHeadEnhanced/TblHeadEnhanced';\r\nimport CustomIcon from '../../SharedComponents/CustomIcon';\r\nimport CustomSuspenseFallback from '../../SharedComponents/CustomSuspenseFallback';\r\nimport TblCell from '../Table/TblCell/TblCell';\r\nimport TblCellInput from '../Table/TblCellInput/TblCellInput';\r\nimport TblCellIcon from '../Table/TblCellIcon/TblCellIcon';\r\nimport TblHeader from '../Table/TblHeader/TblHeader';\r\nimport TblGroupRow from '../Table/TblGroupRow/TblGroupRow';\r\nimport TblRowText from '../Table/TblRowText/TblRowText';\r\nimport TblLoading from '../Table/TblLoading/TblLoading';\r\nimport getDefaultValues from '../../utils/defaultData';\r\nimport './DataTable.css';\r\n\r\nconst TblSecondaryList = lazy(() => import('../Table/TblSecondaryList/TblSecondaryList'));\r\nconst TblFullTextRow = lazy(() => import('../Table/TblFullTextRow/TblFullTextRow'));\r\n\r\nconst descSort = (a, b, sort) => {\r\n  let desc = 0;\r\n\r\n  for (let i = 0; i < sort.length; i++) {\r\n    const field = sort[i];\r\n    const orderBy = field.field;\r\n    let valA = Number.isInteger(a[orderBy]) ? a[orderBy] : a[orderBy] ? a[orderBy].toString() : '';\r\n    let valB = Number.isInteger(b[orderBy]) ? b[orderBy] : b[orderBy] ? b[orderBy].toString() : '';\r\n\r\n    if (metaData.dataTable[orderBy].type === 'select') {\r\n      if (valA !== '' && typeof valA === 'string') {\r\n        valA = metaData[`${orderBy}List`][valA].value;\r\n      }\r\n      if (valB !== '' && typeof valB === 'string') {\r\n        valB = metaData[`${orderBy}List`][valB].value;\r\n      }\r\n\r\n      if (typeof valA !== 'string') valA = '';\r\n      if (typeof valB !== 'string') valB = '';\r\n    }\r\n\r\n    desc = 0;\r\n    if (valB < valA) desc = -1;\r\n    if (valB > valA) desc = 1;\r\n    if (field.order === 'asc') desc *= -1;\r\n    if (desc !== 0) break;\r\n  }\r\n  return desc;\r\n};\r\n\r\nconst stableSort = (array, cmp) => {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n\r\n  return stabilizedThis.map((el) => el[0]);\r\n};\r\n\r\nconst getSorting = (sort) => (a, b) => descSort(a, b, sort);\r\n\r\nconst getHasMenuCell = () => {\r\n  let hasMenuCell = false;\r\n  if (\r\n    metaData.specificParameters &&\r\n    (metaData.specificParameters.hasSpecAction ||\r\n      metaData.specificParameters.hasSpecNotes ||\r\n      metaData.specificParameters.hasEditMenu ||\r\n      metaData.specificParameters.hasDeleteButton ||\r\n      metaData.specificParameters.hasDoneButton)\r\n  ) {\r\n    hasMenuCell = true;\r\n  }\r\n\r\n  return hasMenuCell;\r\n};\r\n\r\nexport default class DataTable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadData: false,\r\n      page: 0,\r\n      rowsPerPage: 100,\r\n      sort: [{ field: 'id', order: 'asc' }],\r\n      groupBy: '',\r\n      groupHide: {},\r\n      editItem: { id: -1, property: '', value: '' },\r\n      showFullTextID: -1,\r\n      showAddRows: -1,\r\n      data: dataTable,\r\n      headCells: metaData.dataTable,\r\n      titleRow: '',\r\n      secDataList: [],\r\n      weekDescription: undefined,\r\n    };\r\n\r\n    this.setSearch = this.setSearch.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe = storage.state.subscribe(() => {\r\n      const { dataLoading } = storage.state.getState().STATE;\r\n      if (dataLoading && dataLoading === 'data') {\r\n        // default sort\r\n        const order = metaData.specificParameters.defaultSortDirection || 'desc';\r\n        const orderBy = metaData.specificParameters.defaultSortField || 'id';\r\n        const sort = [];\r\n        orderBy.split(',').map((field, i) => sort.push({ field, order: order.split(',')[i] }));\r\n\r\n        let groupBy = '';\r\n        if (metaData.specificParameters && metaData.specificParameters.defaultGroupField) {\r\n          groupBy = metaData.specificParameters.defaultGroupField;\r\n        }\r\n\r\n        this.setState({\r\n          headCells: metaData.dataTable,\r\n          sort,\r\n          groupBy,\r\n          editItem: { id: -1, property: '', value: '' },\r\n          data: filterTasks(true),\r\n          loadData: true,\r\n        });\r\n      } else if (dataLoading && dataLoading === 'meta') {\r\n        this.setState({\r\n          headCells: metaData.dataTable,\r\n          loadData: true,\r\n        });\r\n      }\r\n    });\r\n\r\n    this.unsubscribeData = storage.data.subscribe(() => {\r\n      if (storage.data.getState().DATA.redraw) {\r\n        this.setData(filterTasks());\r\n        this.setPage(0);\r\n      }\r\n    });\r\n\r\n    this.unsubscribeTable = storage.table.subscribe(() => {\r\n      this.setState({ loadData: false, secDataList: [], titleRow: '' });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe();\r\n    this.unsubscribeData();\r\n    this.unsubscribeTable();\r\n  }\r\n\r\n  setData = (data) => {\r\n    this.setEditItem({ id: -1, property: '', value: '' });\r\n    this.setState({ data });\r\n  };\r\n\r\n  setPage = (page) => {\r\n    this.setEditItem({ id: -1, property: '', value: '' });\r\n    this.setState({ page });\r\n  };\r\n\r\n  setOrder = (order) => this.setState({ order });\r\n\r\n  setOrderBy = (orderBy) => this.setState({ orderBy });\r\n\r\n  setEditItem = (editItem) => this.setState({ editItem });\r\n\r\n  setShowFullTextID = (showFullTextID) => this.setState({ showFullTextID });\r\n\r\n  setRowsPerPage = (rowsPerPage) => this.setState({ rowsPerPage });\r\n\r\n  setHeadCells = (headCells) => this.setState({ headCells });\r\n\r\n  setWeekDescription = (weekDescription) => this.setState({ weekDescription });\r\n\r\n  /* handle search */\r\n  setSearch = (search) => {\r\n    filters.data.commonFieldSearch = search;\r\n    this.setData(filterTasks());\r\n  };\r\n\r\n  /* handle change sort order */\r\n  setSort = (field) => {\r\n    const { sort } = this.state;\r\n    const sortFieldIndex = sort.map((f) => f.field).indexOf(field);\r\n    if (sortFieldIndex !== -1) {\r\n      if (sort[sortFieldIndex].order === 'asc') {\r\n        sort[sortFieldIndex].order = 'desc';\r\n      } else {\r\n        sort.splice(sortFieldIndex, 1);\r\n      }\r\n    } else {\r\n      sort.push({ field, order: 'asc' });\r\n    }\r\n    this.setState({ sort });\r\n  };\r\n\r\n  /* handle sort click */\r\n  handleRequestSort = (event, field) => this.setSort(field);\r\n\r\n  /* handle group click */\r\n  handleRequestGroup = (event, field) => {\r\n    const { sort } = this.state;\r\n    if (field && field !== '' && sort.field !== field) {\r\n      if (field === 'week') {\r\n        this.setState({\r\n          sort: [\r\n            { field, order: 'desc' },\r\n            { field: 'date', order: 'asc' },\r\n            { field: 'time', order: 'asc' },\r\n          ],\r\n        });\r\n      } else {\r\n        this.setState({ sort: [{ field, order: 'asc' }] });\r\n      }\r\n    }\r\n    this.setState({ groupBy: field, byWeek: false });\r\n  };\r\n\r\n  /* handle change page click */\r\n  handleChangePage = (event, newPage) => {\r\n    this.setPage(newPage);\r\n  };\r\n\r\n  /* handle change row per page click */\r\n  handleChangeRowsPerPage = (event) => {\r\n    this.setRowsPerPage(parseInt(event.target.value, 10));\r\n    this.setPage(0);\r\n  };\r\n\r\n  /* set sort/group to default options */\r\n  defaultSort = (order = 'desc', orderBy = 'id') => {\r\n    const sort = [];\r\n    orderBy.split(',').forEach((field, i) => {\r\n      sort.push({ field, order: order.split(',')[i] });\r\n    });\r\n\r\n    this.setState({\r\n      sort,\r\n      groupBy: '',\r\n      // search: ''\r\n    });\r\n\r\n    if (metaData.specificParameters && metaData.specificParameters.defaultGroupField) {\r\n      this.setState({ groupBy: metaData.specificParameters.defaultGroupField });\r\n    }\r\n  };\r\n\r\n  /* get array index (main data table) from given main task/theme (etc) ID */\r\n  realID = (id) => dataTable.map((task) => task.id).indexOf(id);\r\n\r\n  /* called after OK click in edit dialog */\r\n  editTableRow = (id, rowData) => {\r\n    let errorResult = false;\r\n    doData('patch', rowData, id, metaData.dataTableName)\r\n      .then(([error]) => {\r\n        if (error) {\r\n          errorResult = true;\r\n        } else {\r\n          const realID = this.realID(id);\r\n          Object.keys(rowData).forEach((key) => {\r\n            dataTable[realID][key] = rowData[key];\r\n          });\r\n          this.setData(filterTasks());\r\n          storage.upd.dispatch({ type: 'UPDATE', update: true });\r\n        }\r\n      })\r\n      .then(() => {\r\n        if (errorResult) {\r\n          storage.alert.dispatch({\r\n            type: 'SHOW_ALERT',\r\n            status: 'fail',\r\n            message: 'Ошибка при изменении',\r\n          });\r\n        } else {\r\n          storage.alert.dispatch({\r\n            type: 'SHOW_ALERT',\r\n            status: 'success',\r\n            message: 'Изменение успешно',\r\n          });\r\n        }\r\n      });\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n  };\r\n\r\n  /* called if you click 'SAVE AS NEW' button */\r\n  addTableRow = (rowData, updateTable = true) => {\r\n    this.addTableRowArray([rowData], updateTable);\r\n  };\r\n\r\n  addTableRowArray = (rowDataArray, updateTable = true) => {\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n\r\n    Promise.all(\r\n      rowDataArray.map((rowData) => doData('put', rowData, undefined, metaData.dataTableName))\r\n    ).then((returnDataArray) => {\r\n      let error = 0;\r\n      let jsonOk = 1;\r\n      returnDataArray.forEach((returnData) => {\r\n        const returnError = returnData[0];\r\n        const returnJson = returnData[1];\r\n        if (returnError) error = 1;\r\n        if (!returnJson || !returnJson.data || !returnJson.data.id) jsonOk = 0;\r\n      });\r\n\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при добавлении',\r\n        });\r\n      } else if (jsonOk) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Добавление успешно',\r\n        });\r\n\r\n        for (let i = 0; i < rowDataArray.length; i++) {\r\n          const rowData = rowDataArray[i];\r\n          const json = returnDataArray[i][1];\r\n\r\n          rowData.id = json.data.id;\r\n          rowData.value = rowData[metaData.specificParameters.mainValue];\r\n          if (metaData[`${metaData.dataTableName}List`]) {\r\n            metaData[`${metaData.dataTableName}List`][rowData.id] = rowData;\r\n          }\r\n          dataTable.push(rowData);\r\n        }\r\n\r\n        if (updateTable) this.setData(filterTasks());\r\n      }\r\n    });\r\n  };\r\n\r\n  /* called after OK click in DELETE dialog */\r\n  deleteTableRow = (id) => {\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n    let errorResult = false;\r\n    doData('delete', {}, id, metaData.dataTableName)\r\n      .then(([error]) => {\r\n        if (error) {\r\n          errorResult = true;\r\n        } else {\r\n          this.setShowFullTextID(-1);\r\n          const realID = this.realID(id);\r\n          dataTable.splice(realID, 1);\r\n          this.setData(filterTasks());\r\n\r\n          storage.upd.dispatch({ type: 'UPDATE', update: true });\r\n        }\r\n      })\r\n      .then(() => {\r\n        if (errorResult) {\r\n          storage.alert.dispatch({\r\n            type: 'SHOW_ALERT',\r\n            status: 'fail',\r\n            message: 'Ошибка при изменении',\r\n          });\r\n        } else {\r\n          storage.alert.dispatch({\r\n            type: 'SHOW_ALERT',\r\n            status: 'success',\r\n            message: 'Удаление успешно',\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  /* called after inline edit of something */\r\n  handleInlineEditOk = (id) => (editProperty, editValue) => {\r\n    const realID = this.realID(id);\r\n    const rowData = {};\r\n    Object.keys(dataTable[realID]).forEach((key) => {\r\n      rowData[key] = dataTable[realID][key];\r\n    });\r\n    rowData[editProperty] = editValue;\r\n\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n    doData('patch', rowData, id, metaData.dataTableName).then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при изменении',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Изменение успешно',\r\n        });\r\n\r\n        dataTable[realID][editProperty] = rowData[editProperty];\r\n        this.setData(filterTasks());\r\n      }\r\n    });\r\n  };\r\n\r\n  handleInlineEditClose = () => this.setEditItem({ id: -1, property: '', value: '' });\r\n\r\n  dialogEditOk = (id, editProperty, editPropertyValue) => {\r\n    const realID = this.realID(id);\r\n    const rowData = {};\r\n    Object.keys(dataTable[realID]).forEach((key) => {\r\n      rowData[key] = dataTable[realID][key];\r\n    });\r\n    rowData[editProperty] = editPropertyValue;\r\n\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n    doData('patch', rowData, id, metaData.dataTableName).then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при изменении',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Изменение успешно',\r\n        });\r\n\r\n        dataTable[realID][editProperty] = editPropertyValue;\r\n        this.setData(filterTasks());\r\n      }\r\n    });\r\n  };\r\n\r\n  /* called after set task/theme etc status as DONE */\r\n  completeTableRow = (id) => {\r\n    const realID = this.realID(id);\r\n    const task = {};\r\n    Object.keys(dataTable[realID]).forEach((key) => {\r\n      task[key] = dataTable[realID][key];\r\n    });\r\n    task.status = 'done';\r\n\r\n    const today = new Date();\r\n    task.dateEnd = today.toISOString().replace(/(.+)T(.+)/, '$1');\r\n\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n    doData('patch', task, id).then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при изменении',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Изменение успешно',\r\n        });\r\n\r\n        dataTable[realID].status = task.status;\r\n        dataTable[realID].dateEnd = task.dateEnd;\r\n        this.setData(filterTasks());\r\n      }\r\n    });\r\n  };\r\n\r\n  setStatusTableRow = (id, status) => {\r\n    const realID = this.realID(id);\r\n    const task = {};\r\n    Object.keys(dataTable[realID]).forEach((key) => {\r\n      task[key] = dataTable[realID][key];\r\n    });\r\n    task.status = status;\r\n\r\n    if (status === 'done') {\r\n      const today = new Date();\r\n      task.dateEnd = today.toISOString().replace(/(.+)T(.+)/, '$1');\r\n    }\r\n\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n    doData('patch', task, id, metaData.dataTableName).then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при изменении',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Изменение успешно',\r\n        });\r\n\r\n        dataTable[realID].status = task.status;\r\n        dataTable[realID].dateEnd = task.dateEnd;\r\n        this.setData(filterTasks());\r\n      }\r\n    });\r\n  };\r\n\r\n  /* handle show full text row */\r\n  showFullText = (id) => () => {\r\n    if (this.state.showFullTextID === id) {\r\n      return this.setShowFullTextID(-1);\r\n    }\r\n    return this.setShowFullTextID(id);\r\n  };\r\n\r\n  /* go to linked table (questions, discussion) for given task */\r\n  loadLinked = async (id, loadTableName) => {\r\n    const mainTable = metaData.dataTableName;\r\n    storage.table.dispatch({ type: 'SET_TABLE', tableName: metaData.dataTableName });\r\n\r\n    const data = await getData(mainTable, 'direct', { id });\r\n\r\n    this.props.reloadDataTable(loadTableName, () => {\r\n      filters.data.idTask = id;\r\n      filters.perm.mainTable = mainTable;\r\n\r\n      this.setState({ titleRow: `${data[0].id} - ${data[0].value}` });\r\n    });\r\n  };\r\n\r\n  /* show results */\r\n  showResults = async (id, loadTableName = 'discussion') => {\r\n    const data = await getData(loadTableName, 'direct', {\r\n      idTask: id,\r\n      mainTable: metaData.dataTableName,\r\n    });\r\n\r\n    this.setState({\r\n      showAddRows: id,\r\n      secDataList: data\r\n        .sort((a, b) => (a.date.toString() > b.date.toString() ? -1 : 1))\r\n        .map((task) => {\r\n          const result = [];\r\n          result.push(moment(task.date).format('DD MMMM YYYY'));\r\n          result.push(\r\n            task.participants\r\n              .split(',')\r\n              .map((d) => (metaData.developerList[d]?.value ? metaData.developerList[d].value : d))\r\n              .join(', ')\r\n          );\r\n          result.push(task.result);\r\n          return { string: result.join('\\n') };\r\n        }),\r\n    });\r\n  };\r\n\r\n  /* add 'linked' data: question for tasks, discussion for theme, etc */\r\n  addLinkedData = (id, type, infoData) => {\r\n    const realID = this.realID(id);\r\n    const linkedData = {};\r\n    const metaTable = metaData.tables[`${type}_meta`];\r\n\r\n    Object.keys(metaTable.dataTable).forEach((prop) => {\r\n      if (metaTable.dataTable[prop].defaultValue) {\r\n        linkedData[prop] = getDefaultValues(realID, prop, metaTable.dataTable);\r\n      }\r\n    });\r\n\r\n    Object.keys(infoData).forEach((prop) => {\r\n      linkedData[prop] = infoData[prop];\r\n    });\r\n\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт обновление информации в БД...',\r\n    });\r\n    doData('put', linkedData, undefined, type).then(([error, json]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при добавлении',\r\n        });\r\n      } else if (json && json.id) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Добавление успешно',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при добавлении записи в БД',\r\n        });\r\n      }\r\n    });\r\n\r\n    return false;\r\n  };\r\n\r\n  /* create and show sub list data (tasks for theme, etc) */\r\n  loadSecondaryList = async (id, field, dataListName) => {\r\n    if (this.state.showAddRows === id) {\r\n      this.setState({ showAddRows: -1, secDataList: [] });\r\n    } else {\r\n      this.setState({ showAddRows: id });\r\n\r\n      const secDataList = [];\r\n      field = 'taskgroup';\r\n\r\n      if (metaData.dataTableName === 'discussion') {\r\n        const realID = this.realID(id);\r\n        id = dataTable[realID].idTask;\r\n      }\r\n\r\n      const data = await getData(dataListName, 'direct', { [field]: id });\r\n      data\r\n        .filter((task) => parseInt(task[field], 10) === parseInt(id, 10) && task.status !== 'done')\r\n        .sort((a, b) => (a.value <= b.value ? -1 : 1))\r\n        .forEach((info) => {\r\n          secDataList.push({ id: info.id, value: info.value });\r\n        });\r\n\r\n      this.setState({ secDataList: secDataList.map((task) => ({ string: ` ${task.value}` })) });\r\n    }\r\n  };\r\n\r\n  menuActionLoadDiscussions = (id) => this.loadLinked(id, 'discussion');\r\n\r\n  menuActionLoadThemeTasks = (id) => this.loadSecondaryList(id, metaData.dataTableName, 'task');\r\n\r\n  /* handle send notifiction */\r\n  sendNotification = (id) => {\r\n    const rowData = {\r\n      id,\r\n      mode: 'notify',\r\n      feature: metaData.dataTableName,\r\n    };\r\n\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт отправка уведомлений...',\r\n    });\r\n    doData('notify', rowData, id, 'notification').then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при отправке уведомления',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Уведомление послано успешно',\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  sendNotificationWeekDate = (notifyWeek, date) => {\r\n    storage.alert.dispatch({\r\n      type: 'SHOW_ALERT',\r\n      status: 'warn',\r\n      message: 'Идёт отправка уведомлений...',\r\n    });\r\n    const data = {\r\n      week: notifyWeek,\r\n      mode: 'done',\r\n      feature: 'discussion',\r\n    };\r\n    if (date) data.date = date;\r\n    doData('notify', data, undefined, 'notification').then(([error]) => {\r\n      if (error) {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'fail',\r\n          message: 'Ошибка при отправке уведомления',\r\n        });\r\n      } else {\r\n        storage.alert.dispatch({\r\n          type: 'SHOW_ALERT',\r\n          status: 'success',\r\n          message: 'Уведомление послано успешно',\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  /* create action menu list (edit/delete/done, etc) */\r\n  actionMenuList = () => {\r\n    const menuList = [];\r\n    // if (metaData.specificParameters.hasQuestions) {\r\n    // }\r\n    if (metaData.specificParameters.haveDiscussion) {\r\n      const action = {\r\n        id: 'discussion',\r\n        value: 'Добавить обсуждение',\r\n        type: 'discussion',\r\n        action: this.addLinkedData,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n    if (metaData.specificParameters.hasGoToDiscussion) {\r\n      const action = {\r\n        id: 'goToDiscussion',\r\n        value: 'Связанные обсуждения',\r\n        type: 'discussion',\r\n        action: this.menuActionLoadDiscussions,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n    if (metaData.specificParameters.hasSublistData) {\r\n      const action = {\r\n        id: 'secDataList',\r\n        value: 'Связанные задачи',\r\n        action: this.menuActionLoadThemeTasks,\r\n      };\r\n      menuList.push(action);\r\n      menuList.push({ id: 'divider' });\r\n    }\r\n    if (metaData.specificParameters.hasEditMenu) {\r\n      const action = {\r\n        id: 'tasks_edit',\r\n        value: 'Редактировать',\r\n        actionName: 'Редактирование',\r\n        action: this.editTableRow,\r\n        actionNew: this.addTableRow,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n    if (metaData.specificParameters.hasSetStatusMenu) {\r\n      const action = {\r\n        id: 'tasks_status',\r\n        value: 'Изменить статус',\r\n        actionName: 'Изменить статус',\r\n        isListOfItems: true,\r\n        listItems: metaData.statusList,\r\n        action: this.setStatusTableRow,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n    if (metaData.specificParameters.hasDeleteButton) {\r\n      const action = {\r\n        id: 'tasks_delete',\r\n        value: 'Удалить',\r\n        actionName: 'Удаление',\r\n        action: this.deleteTableRow,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n    if (metaData.specificParameters.hasNotificationButton) {\r\n      menuList.push({ id: 'divider' });\r\n      const action = {\r\n        id: 'notification',\r\n        value: 'Отправить уведомление',\r\n        action: this.sendNotification,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n    if (metaData.specificParameters.hasShowResults) {\r\n      const action = {\r\n        id: 'showThemeResults',\r\n        value: 'История обсуждений',\r\n        type: 'discussion',\r\n        action: this.showResults,\r\n      };\r\n      menuList.push(action);\r\n    }\r\n\r\n    return menuList;\r\n  };\r\n\r\n  getDateGroup = (date) => {\r\n    const weekNum = this.state.byWeek ? moment(date, 'YYYY-MM-DD').week() : date;\r\n    return weekNum;\r\n  };\r\n\r\n  toggleDescription = (week) => () => {\r\n    const { weekDescription } = this.state;\r\n    if (weekDescription && weekDescription === week) {\r\n      this.setWeekDescription(undefined);\r\n    } else {\r\n      this.setWeekDescription(week);\r\n    }\r\n  };\r\n\r\n  getYouTubeLink = (videoConf) => {\r\n    let youTubeLink = '';\r\n    if (videoConf && /youtu\\.?be/.test(videoConf)) {\r\n      const url = videoConf.replace(/^[\\s\\S]*(https:\\/\\/(www\\.)?youtu\\.?be.+\\b)[\\s\\S]*/, '$1');\r\n      youTubeLink = <CustomIcon type=\"link\" class=\"icn_youtube\" href={url} />;\r\n    }\r\n    return youTubeLink;\r\n  };\r\n\r\n  getZoomLink = (videoConf) => {\r\n    let zoomLink = '';\r\n    if (videoConf && /https:\\/\\/us02web\\.zoom\\.us\\/j\\/\\d+\\?pwd=.+/.test(videoConf)) {\r\n      const url = videoConf.replace(\r\n        /^[\\s\\S]*(https:\\/\\/us02web\\.zoom\\.us\\/j\\/\\d+\\?pwd=\\S+\\b)[\\s\\S]*/,\r\n        '$1'\r\n      );\r\n      const tip = url.replace(/^https:\\/\\/us02web\\.zoom\\.us\\/j\\/\\d{7}(\\d{4}).+/, '$1');\r\n      zoomLink = <CustomIcon type=\"link\" class=\"icn_zoom\" tip={tip} href={url} />;\r\n    }\r\n    return zoomLink;\r\n  };\r\n\r\n  getRowClass = (row) => {\r\n    const date = new Date().toLocaleDateString().replace(/(\\d+).(\\d+).(\\d+)/, '$3-$2-$1');\r\n    let rowClass = '';\r\n    if (row.status === 'new') rowClass = 'task_alert';\r\n    if (metaData.dataTableName === 'discussion' && row.status === 'new' && row.date >= date) {\r\n      rowClass = '';\r\n    }\r\n    if (row.priority === 'hard') rowClass = 'task_bad';\r\n    if (row.status === 'rejected') rowClass = 'task_bad';\r\n    if (row.status === 'done') rowClass = 'task_good';\r\n    if (metaData.dataTableName === 'discussion' && !row.result && row.status === 'done') {\r\n      rowClass = 'task_noresult';\r\n    }\r\n    return rowClass;\r\n  };\r\n\r\n  getGroupRowNames = (groupBy, row, headCells) => {\r\n    let groupValue = '';\r\n    let dayName = '';\r\n\r\n    if (groupBy && groupBy !== '') {\r\n      let date = '';\r\n      if (headCells[groupBy].type === 'date') {\r\n        date = moment(row[groupBy], 'YYYY-MM-DD');\r\n      } else if (groupBy === 'week') {\r\n        date = moment(row.date, 'YYYY-MM-DD');\r\n      }\r\n\r\n      if (headCells[groupBy].type === 'date') {\r\n        dayName = `${date.format('dddd')}\r\n${date.format('DD MMMM')}`;\r\n        // dayName = date.format('dddd') + '<br>' + date.format('DD MMMM');\r\n        groupValue = date.format('DD MMMM YYYY');\r\n      } else if (groupBy === 'week') {\r\n        dayName = `${date.format('dddd')}\r\n${date.format('DD MMMM')}`;\r\n        groupValue = `${date.startOf('week').format('DD MMMM YYYY')} - ${date\r\n          .endOf('week')\r\n          .format('DD MMMM YYYY')}`;\r\n      } else {\r\n        groupValue = metaData[`${groupBy}List`]\r\n          ? metaData[`${groupBy}List`][row[groupBy]].value\r\n          : row[groupBy];\r\n      }\r\n    }\r\n\r\n    return { groupValue, dayName };\r\n  };\r\n\r\n  getFullText = (row, headCells) => {\r\n    const fullText = { display: false, element: null };\r\n    Object.values(headCells).forEach((property) => {\r\n      if (\r\n        property.type === 'fulltext' &&\r\n        row[property.id] !== '' &&\r\n        typeof row[property.id] === 'string'\r\n      ) {\r\n        fullText.value = row[property.id];\r\n        fullText.title = property.value;\r\n        fullText.id = property.id;\r\n        fullText.display = true;\r\n        fullText.fullTextIndexCell = property.tableIndex;\r\n\r\n        fullText.element =\r\n          fullText.display && metaData.dataTable[property.id].hasFullTextLink ? (\r\n            <CustomIcon class=\"icn_description\" action={this.showFullText(row.id)} />\r\n          ) : null;\r\n      }\r\n    });\r\n\r\n    return fullText;\r\n  };\r\n\r\n  getFullTextIcon = (fullText, property, row) => {\r\n    const element =\r\n      fullText.display && metaData.dataTable[property].hasFullTextLink ? (\r\n        <CustomIcon class=\"icn_description\" action={this.showFullText(row.id)} />\r\n      ) : null;\r\n    return element;\r\n  };\r\n\r\n  getCellValue = (row, groupBy, headCell, dayName) => {\r\n    let value =\r\n      groupBy && (headCell.id === groupBy || (headCell.id === 'date' && groupBy === 'week'))\r\n        ? dayName\r\n        : row[headCell.id];\r\n    if (headCell.type === 'time') {\r\n      value = value.replace(/(\\d\\d:\\d\\d):\\d\\d/, '$1');\r\n    } else if (headCell.id === 'mainTable') {\r\n      value = metaData.tables[`${value}_meta`].specificParameters.tableName;\r\n    } else if (headCell.type === 'select' && metaData[`${headCell.id}List`]) {\r\n      ({ value } = metaData[`${headCell.id}List`][value]);\r\n    } else if (headCell.type === 'multi-select') {\r\n      value = value\r\n        .split(',')\r\n        .map((_d) => metaData[`${headCell.id}List`][_d]?.value || _d)\r\n        .join(', ');\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  getWhiteSpace = (headCell, groupBy) => {\r\n    let whiteSpace = '';\r\n    if (['datetime', 'date', 'time'].includes(headCell.type)) {\r\n      whiteSpace = 'nowrap';\r\n    }\r\n    if (groupBy && (headCell.id === groupBy || (headCell.id === 'date' && groupBy === 'week'))) {\r\n      whiteSpace = 'pre';\r\n    }\r\n    return whiteSpace;\r\n  };\r\n\r\n  getRowDisplayIfGroup = (row, groupBy) => {\r\n    const display =\r\n      groupBy && this.state.groupHide[this.getDateGroup(row[groupBy])] ? 'none' : 'table-row';\r\n    return display;\r\n  };\r\n\r\n  // chosenWeek = 0 - this week, 1 - next week, 2 - ...\r\n  copyPreviousWeekDiscussions(selectedWeek, chosenWeek) {\r\n    const weekData = dataTable.filter((row) => row.week === selectedWeek);\r\n\r\n    const infoArray = [];\r\n    weekData.forEach((data) => {\r\n      const info = { ...data };\r\n      info.result = '';\r\n      info.status = 'new';\r\n      info.videoConf = '';\r\n\r\n      const newWeekDate = moment()\r\n        .startOf('week')\r\n        .day(moment(info.date).day() + 7 * chosenWeek);\r\n\r\n      info.date = moment(newWeekDate).format('YYYY-MM-DD');\r\n      info.week = moment(newWeekDate).format('YYYY.WW');\r\n\r\n      infoArray.push(info);\r\n    });\r\n\r\n    this.addTableRowArray(infoArray);\r\n  }\r\n\r\n  render() {\r\n    const { page, order, orderBy, sort, groupBy, headCells, weekDescription, secDataList, groupHide } =\r\n      this.state;\r\n    const groupList = {};\r\n    let { rowsPerPage, data } = this.state;\r\n    const { tableName } = metaData?.specificParameters || {};\r\n\r\n    // for `noPagination` parameter (print PDF click)\r\n    if (this.props.noPagination) {\r\n      data = filterTasks();\r\n      rowsPerPage = data.length;\r\n    }\r\n\r\n    const hasMenuCell = getHasMenuCell();\r\n    const fullColsNum =\r\n      Object.values(headCells).filter((a) => a.showInTable).length + (hasMenuCell ? 1 : 0);\r\n\r\n    return this.state.loadData ? (\r\n      <Table size=\"small\" stickyHeader className=\"data-table__table\">\r\n        <TableHead>\r\n          {/* Table head */}\r\n          <TblHeadEnhanced\r\n            order={order}\r\n            sort={sort}\r\n            orderBy={orderBy}\r\n            groupBy={groupBy}\r\n            onRequestSort={this.handleRequestSort}\r\n            onRequestGroup={this.handleRequestGroup}\r\n            rowCount={data.length}\r\n            onFilter={(_data) => {\r\n              this.setData(_data);\r\n              this.setPage(0);\r\n            }}\r\n            headCells={headCells}\r\n          />\r\n          {/* Search & pagination options row */}\r\n          <TblHeader\r\n            showCondition={!this.props.noPagination}\r\n            colSpan={hasMenuCell ? fullColsNum + 1 : fullColsNum}\r\n            count={data.length}\r\n            onSearch={this.setSearch}\r\n            page={page}\r\n            rowsPerPage={rowsPerPage}\r\n            onChangePage={this.handleChangePage}\r\n            onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n          />\r\n          {/* Title row (for questions mode) */}\r\n          <TblRowText\r\n            showCondition={metaData.specificParameters?.hasTitleRow && this.state.titleRow !== ''}\r\n            className=\"data-table__row-title\"\r\n            colSpan={fullColsNum}\r\n            text={this.state.titleRow}\r\n          />\r\n        </TableHead>\r\n\r\n        <TableBody>\r\n          {data.length > 0 &&\r\n            stableSort(data, getSorting(sort))\r\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              .map((row) => {\r\n                // It`s about how to show while 'group rows by' mode\r\n                let showGroupByRow = false;\r\n                const { groupValue, dayName } = this.getGroupRowNames(groupBy, row, headCells);\r\n\r\n                if (groupBy) {\r\n                  const groupField = this.getDateGroup(row[groupBy]);\r\n                  if (!groupList[groupField]) {\r\n                    groupList[groupField] = 1;\r\n                    showGroupByRow = true;\r\n                  }\r\n                }\r\n\r\n                const fullText = this.getFullText(row, headCells);\r\n                const zoomLink = this.getZoomLink(row.videoConf);\r\n                const youTubeLink = this.getYouTubeLink(row.videoConf);\r\n\r\n                return (\r\n                  <Fragment key={`${row.id}`}>\r\n                    {groupBy && groupBy !== '' && showGroupByRow ? (\r\n                      <TblGroupRow\r\n                        tableName={metaData.dataTableName}\r\n                        fullColsNum={hasMenuCell ? fullColsNum + 2 : fullColsNum}\r\n                        headCells={headCells}\r\n                        groupBy={groupBy}\r\n                        groupValue={groupValue}\r\n                        groupHide={groupHide}\r\n                        setGroup={(_groupHide) => {\r\n                          this.setState({ groupHide: _groupHide });\r\n                        }}\r\n                        row={row}\r\n                        weekData={dataTable.filter((r) => r.week === row.week)}\r\n                        getDateGroup={this.getDateGroup}\r\n                        sendNotification={(id, day) => {\r\n                          this.sendNotificationWeekDate(id, day);\r\n                        }}\r\n                        toggleDescription={this.toggleDescription(row.week)}\r\n                        copyPreviousWeekDiscussions={(id, week) => {\r\n                          this.copyPreviousWeekDiscussions(id, week);\r\n                        }}\r\n                      />\r\n                    ) : null}\r\n                    <TableRow\r\n                      hover\r\n                      tabIndex={-1}\r\n                      key={`row-main-${row.id}`}\r\n                      className={`${this.getRowClass(row)} data-table__row`}\r\n                      style={{ display: this.getRowDisplayIfGroup(row, groupBy) }}\r\n                    >\r\n                      {Object.values(headCells)\r\n                        .filter((a) => a.showInTable)\r\n                        .sort((a, b) => (a.tableIndex >= b.tableIndex ? 1 : -1))\r\n                        .map((headCell) => {\r\n                          const { id } = row;\r\n\r\n                          const property = headCell.id;\r\n                          const value = this.getCellValue(row, groupBy, headCell, dayName);\r\n                          const whiteSpace = this.getWhiteSpace(headCell, groupBy);\r\n                          const fullTextIcon = this.getFullTextIcon(fullText, headCell.id, row);\r\n\r\n                          return (\r\n                            <Fragment key={`td-${property}-${id}`}>\r\n                              <TableCell\r\n                                className=\"data-table__cell\"\r\n                                align=\"left\"\r\n                                padding=\"none\"\r\n                                style={{ whiteSpace }}\r\n                              >\r\n                                {(this.state.editItem.id !== id ||\r\n                                  this.state.editItem.property !== property) && (\r\n                                  <TblCell\r\n                                    value={value}\r\n                                    headCell={headCell}\r\n                                    zoomLink={zoomLink}\r\n                                    youTubeLink={youTubeLink}\r\n                                    fullTextIcon={fullTextIcon}\r\n                                  />\r\n                                )}\r\n\r\n                                {/* edit item textbox */}\r\n                                {this.state.editItem.id === id &&\r\n                                  this.state.editItem.property === property && (\r\n                                    <TblCellInput\r\n                                      defaultValue={this.state.editItem}\r\n                                      actionOk={this.handleInlineEditOk(id)}\r\n                                      actionCancel={this.handleInlineEditClose}\r\n                                    />\r\n                                  )}\r\n                              </TableCell>\r\n                              <TblCellIcon\r\n                                showCell={headCell.isInlineEditable && headCell.type === 'string'}\r\n                                showInner={this.state.editItem.id !== id}\r\n                                type=\"data-table__cell_inline-edit\"\r\n                                action={() => this.setEditItem({ id, property, value })}\r\n                                tip={`Изменить: ${metaData.dataTable[property].value}`}\r\n                                style={{ whiteSpace }}\r\n                              />\r\n                            </Fragment>\r\n                          );\r\n                        })}\r\n                      <TblCellIcon\r\n                        showCell={hasMenuCell}\r\n                        showInner\r\n                        type=\"data-table__hover-icon\"\r\n                        action={this.handleInlineEditClose}\r\n                        row={row}\r\n                        actionMenuList={this.actionMenuList}\r\n                        style={{ paddingLeft: metaData.mobile ? '10px' : '' }}\r\n                      />\r\n                    </TableRow>\r\n\r\n                    {/* Full text row - if click to show */}\r\n                    {(this.state.showFullTextID === row.id ||\r\n                      (weekDescription && weekDescription === row.week)) &&\r\n                      fullText.display && (\r\n                        <Suspense fallback={<CustomSuspenseFallback type=\"row\" />}>\r\n                          <TblFullTextRow data={fullText} headCells={headCells} id={row.id} />\r\n                        </Suspense>\r\n                      )}\r\n\r\n                    {/* Secondary List: show and hide */}\r\n                    {this.state.showAddRows === row.id && !groupHide[row[groupBy]] && (\r\n                      <Suspense fallback={<CustomSuspenseFallback type=\"row\" />}>\r\n                        <TblSecondaryList\r\n                          secDataList={secDataList}\r\n                          fullColsNum={fullColsNum}\r\n                          loadSecondaryList={() => this.loadSecondaryList(row.id, 'task')}\r\n                        />\r\n                      </Suspense>\r\n                    )}\r\n                  </Fragment>\r\n                );\r\n              })}\r\n          <TblRowText\r\n            showCondition={data.length === 0}\r\n            colSpan={fullColsNum}\r\n            text={tableName ? `${tableName}: отсутствуют` : 'Данные загружаются...'}\r\n          />\r\n        </TableBody>\r\n      </Table>\r\n    ) : (\r\n      <TblLoading />\r\n    );\r\n  }\r\n}\r\n","import React, { Suspense, lazy } from 'react';\r\nimport CustomSuspenseFallback from '../../SharedComponents/CustomSuspenseFallback';\r\n\r\nimport storage from '../../storages/commonStorage';\r\nimport DataTable from '../DataTable/DataTable';\r\nimport './Content.css';\r\n\r\nconst MainCalendar = lazy(() => import('../MainCalendar/MainCalendar'));\r\nconst DataAdd = lazy(() => import('../DataAdd/DataAdd'));\r\n\r\nexport default function Content({ dataRef, reloadDataTable, dataTable, dataTableName }) {\r\n  const [tableName, setTableName] = React.useState(dataTableName);\r\n\r\n  const subscribe = storage.table.subscribe(() => {\r\n    const storageTableName = storage.table.getState().TABLE.tableName;\r\n    if (storageTableName) {\r\n      setTableName(storageTableName);\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    subscribe();\r\n    return subscribe();\r\n  }, [tableName]);\r\n\r\n  return (\r\n    <section className=\"content\">\r\n      {tableName !== 'calendar' ? (\r\n        <div className=\"content__table\">\r\n          <Suspense fallback={<CustomSuspenseFallback type=\"loading\" />}>\r\n            <DataTable reloadDataTable={reloadDataTable} ref={dataRef} />\r\n          </Suspense>\r\n        </div>\r\n      ) : (\r\n        <div className=\"content__calendar\">\r\n          <Suspense fallback={<CustomSuspenseFallback type=\"loading\" />}>\r\n            <MainCalendar dates={dataTable} />\r\n          </Suspense>\r\n        </div>\r\n      )}\r\n\r\n      <Suspense fallback={<CustomSuspenseFallback type=\"loading\" />}>\r\n        <DataAdd />\r\n      </Suspense>\r\n    </section>\r\n  );\r\n}\r\n","import React, { Suspense, lazy } from 'react';\r\n\r\nimport { metaData, dataTable } from './config/data';\r\nimport { mainModes } from './config/constants';\r\nimport { filters } from './utils/filters';\r\nimport { getData } from './utils/apiFunctions';\r\nimport storage from './storages/commonStorage';\r\nimport Header from './Components/Header/Header';\r\nimport HeaderLogin from './Components/HeaderLogin/HeaderLogin';\r\nimport MainLeftSide from './Components/MainLeftSide/MainLeftSide';\r\nimport Content from './Components/Content/Content';\r\nimport CustomSuspenseFallback from './SharedComponents/CustomSuspenseFallback';\r\nimport './App.css';\r\n\r\nconst Hint = lazy(() => import('./SharedComponents/Hint'));\r\n\r\nexport default function App() {\r\n  const [developers, setDevelopers] = React.useState([]);\r\n  const _divDataTable = React.useRef(null);\r\n\r\n  const reloadDataTable = (dataTableName, cb, resetFilter = true) => {\r\n    metaData.dataTableName = dataTableName;\r\n    storage.table.dispatch({ type: 'SET_TABLENAME', tableName: dataTableName });\r\n\r\n    if (resetFilter) filters.clear();\r\n\r\n    Promise.all([getData(`${dataTableName}_meta`), getData(metaData.dataTableName)])\r\n      .then(() => {\r\n        if (typeof cb === 'function') cb();\r\n      })\r\n      .then(() => {\r\n        storage.state.dispatch({ type: 'SET_DATALOADING', stage: 'data' });\r\n      });\r\n  };\r\n\r\n  const { pathname } = document.location;\r\n  const hostpath = window.location.href.search(/localhost:3000/) !== -1 ? '' : 'smisplan2';\r\n  // const hostpath = '';\r\n  const pathArray = pathname.split('/').slice(1);\r\n  if (pathArray[0] === hostpath) {\r\n    pathArray.shift();\r\n  }\r\n\r\n  const tableName = pathArray[0];\r\n  const inputFilter = { data: {} };\r\n  if (pathArray[1] !== '') {\r\n    inputFilter.developer = pathArray[1];\r\n  }\r\n\r\n  metaData.dataTableName = mainModes.includes(tableName) ? tableName : 'task';\r\n\r\n  if (\r\n    navigator.userAgent.match(/Android/i) ||\r\n    navigator.userAgent.match(/webOS/i) ||\r\n    navigator.userAgent.match(/iPhone/i) ||\r\n    navigator.userAgent.match(/iPad/i) ||\r\n    navigator.userAgent.match(/iPod/i) ||\r\n    navigator.userAgent.match(/BlackBerry/i) ||\r\n    navigator.userAgent.match(/Windows Phone/i)\r\n  ) {\r\n    metaData.mobile = true;\r\n\r\n    const root = document.documentElement;\r\n    root.style.setProperty('--font-size-table-title', '16px');\r\n    root.style.setProperty('--font-size-table', '14px');\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    getData('developer').then((developersList) => {\r\n      setDevelopers(developersList);\r\n      Promise.all([\r\n        ...mainModes.map((mode) => getData(`${mode}_meta`)),\r\n        getData(metaData.dataTableName),\r\n      ]).then(() => {\r\n        storage.state.dispatch({ type: 'SET_DATALOADING', stage: 'data' });\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"mainTable\" style={{ width: '100%', height: '100%' }}>\r\n      <header style={{ display: 'flex' }}>\r\n        <HeaderLogin reloadDataTable={reloadDataTable} dataRef={_divDataTable} />\r\n        <div className=\"divSpacingUp\" />\r\n        <Header\r\n          reloadDataTable={reloadDataTable}\r\n          projectList={metaData.projectList}\r\n          dataTable={dataTable}\r\n        />\r\n      </header>\r\n\r\n      <main style={{ display: 'flex' }} className=\"divBottom\">\r\n        <MainLeftSide\r\n          developer={inputFilter.developer}\r\n          developers={developers}\r\n          metaData={metaData}\r\n          dataTable={dataTable}\r\n        />\r\n        <Content\r\n          dataRef={_divDataTable}\r\n          reloadDataTable={reloadDataTable}\r\n          dataTable={dataTable}\r\n          dataTableName={metaData.dataTableName}\r\n        />\r\n\r\n        <Suspense fallback={<CustomSuspenseFallback type=\"textNode\" />}>\r\n          <Hint />\r\n        </Suspense>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","// import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nconst basepath = window.location.href.search(/localhost:3000/) !== -1 ? '/' : '/smisplan2';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter basename={basepath}>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.querySelector('#root')\r\n);\r\n","export const dataTable = [];\r\nexport const metaData = {\r\n  mobile: false,\r\n  user: {},\r\n  dataTableName: 'task',\r\n  projectList: {},\r\n  developerList: {},\r\n  dataTable: {},\r\n  tables: {},\r\n};\r\n\r\nexport const resetDataTable = () => {\r\n  dataTable.splice(0);\r\n};\r\n","import { createStore, combineReducers } from 'redux';\r\n\r\n// reducers\r\nfunction ALERT(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'SHOW_ALERT':\r\n      state.alert = { status: action.status, message: action.message };\r\n      return state;\r\n    case 'HIDE_ALERT':\r\n      delete state.alert;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction STATE(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'SET_DATALOADING':\r\n      state.dataLoading = action.stage; // chain: root, meta, data => clear\r\n      return state;\r\n    case 'UNSET_DATALOADING':\r\n      delete state.dataLoading;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction TABLE(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'SET_TABLENAME':\r\n      state.tableName = action.tableName;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction META(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'INCREASE':\r\n      state.count++;\r\n      return state;\r\n    case 'ZERO':\r\n      state.count = 0;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction DATA(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'REDRAW':\r\n      state.redraw = action.redraw;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction UPD(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'UPDATE':\r\n      state.update = action.update;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst storage = {\r\n  state: createStore(combineReducers({ STATE })),\r\n  alert: createStore(combineReducers({ ALERT })),\r\n  data: createStore(combineReducers({ DATA })),\r\n  upd: createStore(combineReducers({ UPD })),\r\n  meta: createStore(combineReducers({ META }), { META: { count: 0 } }),\r\n  table: createStore(combineReducers({ TABLE })),\r\n};\r\n\r\nexport default storage;\r\n","// import MomentUtils from '@date-io/moment';\r\n\r\nexport default class DateW extends Date {\r\n  constructor(...props) {\r\n    if (props.length === 0) props[0] = new Date();\r\n    super(props);\r\n  }\r\n\r\n  getWeek = (dowOffset = 1) => {\r\n    dowOffset = dowOffset && typeof dowOffset === 'number' ? dowOffset : 0; // default dowOffset to zero\r\n    const newYear = new Date(this.getFullYear(), 0, 1);\r\n    let day = newYear.getDay() - dowOffset; // the day of week the year begins on\r\n    day = day >= 0 ? day : day + 7;\r\n    const daynum =\r\n      Math.floor(\r\n        (this.getTime() -\r\n          newYear.getTime() -\r\n          (this.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) /\r\n          86400000\r\n      ) + 1;\r\n    let weeknum;\r\n    // if the year starts before the middle of a week\r\n    if (day < 4) {\r\n      weeknum = Math.floor((daynum + day - 1) / 7) + 1;\r\n      if (weeknum > 52) {\r\n        const nYear = new Date(this.getFullYear() + 1, 0, 1);\r\n        let nday = nYear.getDay() - dowOffset;\r\n        nday = nday >= 0 ? nday : nday + 7;\r\n        // if the next year starts before the middle of\r\n        // the week, it is week #1 of that year\r\n        weeknum = nday < 4 ? 1 : 53;\r\n      }\r\n    } else {\r\n      weeknum = Math.floor((daynum + day - 1) / 7);\r\n    }\r\n    return weeknum;\r\n  };\r\n\r\n  getWeekStr = (dayOffset = 1) => {\r\n    const week = this.getWeek(dayOffset);\r\n    return week < 10 ? `0${week}` : week;\r\n  };\r\n\r\n  getYearWeekStr = (dayOffset = 1) => `${this.getFullYear()}.${this.getWeekStr(dayOffset)}`;\r\n\r\n  static toDateTimeStr = (mode, value) => {\r\n    let date;\r\n    if (typeof value === 'string') {\r\n      date = value;\r\n      if (mode === 'time') date = value.split('T')[1];\r\n    } else if (typeof value === 'object' && value && value._isAMomentObject) {\r\n      switch (mode) {\r\n        case 'date':\r\n          date = value.format('YYYY-MM-DD');\r\n          break;\r\n        case 'time':\r\n          date = value.format('HH:mm:00');\r\n          break;\r\n        case 'datetime':\r\n          date = value.format('YYYY-MM-DD HH:mm:00');\r\n          break;\r\n        default:\r\n          date = undefined;\r\n      }\r\n    } else if (typeof value === 'object' && value instanceof Date) {\r\n      switch (mode) {\r\n        case 'date':\r\n          date = value.toLocaleDateString('ru-RU').replace(/(\\d+)\\.(\\d+)\\.(\\d+)/, '$3-$2-$1');\r\n          break;\r\n        case 'time':\r\n          date = value.toLocaleTimeString('ru-RU').replace(/(\\d+):(\\d+):(\\d+)/, '$1:$2:00');\r\n          break;\r\n        case 'datetime':\r\n          date = `${value\r\n            .toLocaleDateString('ru-RU')\r\n            .replace(/(\\d+?)\\.(\\d+?)\\.(\\d+?)/, '$3-$2-$1')}  ${value\r\n            .toLocaleTimeString('ru-RU')\r\n            .replace(/(\\d+?):(\\d+?):(\\d+?)/, '$1:$2:00')}`;\r\n          break;\r\n        default:\r\n          date = undefined;\r\n      }\r\n    }\r\n    return date;\r\n  };\r\n\r\n  // static\r\n}\r\n"],"sourceRoot":""}