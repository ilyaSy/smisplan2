(this.webpackJsonpsmisplan2=this.webpackJsonpsmisplan2||[]).push([[6],{355:function(t,e,a){"use strict";a.d(e,"a",(function(){return j}));var n=a(31),i=a(56),s=a(76),c=a(77),l=a(78),o=a(0),r=a.n(o),u=a(21),d=a.n(u),p=a(375),b=a(365),f=a(2),j=function(t){Object(c.a)(a,t);var e=Object(l.a)(a);function a(t){var n;Object(i.a)(this,a),(n=e.call(this,t)).handleChange=function(t){t&&""!==t&&"null"!==t&&Array.isArray(t)?(n.setState({valueErr:!1}),n.setState({value:t}),"function"===typeof n.props.setValue&&n.props.setValue(t.map((function(t){return t.value})).join(","))):t&&""!==t&&"null"!==t?(n.setState({valueErr:!1}),n.setState({value:t}),"function"===typeof n.props.setValue&&n.props.setValue(t.value)):(n.setState({value:t}),"function"===typeof n.props.setValue&&n.props.setValue(""))},n.setFocus=function(){return n.selectRef.focus()},n.filterValues=function(t,e){var a=n.optionsCounter<n.maxOptions;e&&""!==e&&(new RegExp(e,"i").test(t.label)||(a=!1));return a&&n.optionsCounter++,n.optionsCounter!==n.props.options.length&&n.optionsCounter!==n.maxOptions||(n.optionsCounter=0),a};var s="";return n.props.defaultValue?s=n.props.defaultValue:n.props.defaultValue&&(s=[]),n.state={value:s,valueErr:!1,offsetTop:0},n.maxOptions=n.props.maxOptions?n.props.maxOptions:60,n.optionsCounter=0,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({offsetTop:d.a.findDOMNode(this).offsetTop})}},{key:"render",value:function(){var t=this,e=this.props.isCreatable?b.a:p.a,a={input:function(t){return Object(n.a)(Object(n.a)({},t),{},{height:"25px",fontFamily:"var(--font-main)",marginTop:"-0.75px",fontSize:"15px",backgroundColor:"transparent"})},control:function(e,a){return Object(n.a)(Object(n.a)({},e),{},{minHeight:"25px",height:"fit-content",fontFamily:"var(--font-main)",fontSize:"15px",backgroundColor:"transparent",border:"0px",borderRadius:"0px",borderBottom:t.state.valueErr||a.selectProps.menuIsOpen?"2px solid":"1px solid",borderColor:t.state.valueErr?"#f44336 !important":a.selectProps.menuIsOpen?"#3f51b5 !important":"rgba(0, 0, 0, 0.42) !important",boxShadow:"none","&:hover":{borderBottom:(a.selectProps.menuIsOpen,"2px solid"),borderColor:t.state.valueErr?"#f44336":a.selectProps.menuIsOpen?"#3f51b5":"black"}})},placeholder:function(e,a){return Object(n.a)(Object(n.a)({},e),{},{height:"25px",fontFamily:"var(--font-main)",fontSize:"15px",color:t.state.valueErr?"#f44336":a.selectProps.menuIsOpen?"#3f51b5":"",backgroundColor:"transparent"})},option:function(t){return Object(n.a)(Object(n.a)({},t),{},{fontFamily:"var(--font-main)",fontSize:"15px",marginTop:"-3px",color:"rgba(0, 0, 0, 0.87)"})},valueContainer:function(t){return Object(n.a)(Object(n.a)({},t),{},{minHeight:"24px",height:"fit-content",marginTop:"-5px",paddingLeft:"0px",marginLeft:"-2px"})},indicatorsContainer:function(t){return Object(n.a)(Object(n.a)({},t),{},{minHeight:"25px !important",padding:"0px !important"})},clearIndicator:function(t){return Object(n.a)(Object(n.a)({},t),{},{padding:"0px 5px 0px 5px !important"})},dropdownIndicator:function(t){return Object(n.a)(Object(n.a)({},t),{},{padding:"0px 5px 0px 5px !important"})}};return Object(f.jsx)("div",{style:this.props.style,children:Object(f.jsx)(e,{allowCreate:this.props.allowCreate,ref:this.selectRef,options:this.props.options,styles:a,menuPlacement:this.props.bottom||this.state.offsetTop<250?"bottom":"top",value:this.state.value,placeholder:this.props.label,defaultValue:this.props.defaultValue,defaultInputValue:this.props.defaultInputValue,onChange:this.handleChange,onMenuOpen:function(){t.optionsCounter=0},noOptionsMessage:function(){return"\u041d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"},isClearable:!0,isSearchable:!0,required:!0,isMulti:!!this.props.isMulti,style:{width:"200px"},filterOption:this.filterValues})})}}]),a}(r.a.Component)},357:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var n=a(31),i=a(10),s=a(0),c=a.n(s),l=a(37),o=a(433),r=a(135),u=(a(203),a(2));function d(t){var e=c.a.useState(),a=Object(i.a)(e,2),n=a[0],s=a[1];return Object(u.jsx)(l.a,{utils:r.a,children:Object(u.jsx)(o.a,{format:"YYYY-MM-DD HH:mm",fullWidth:!0,ampm:!1,minutesStep:5,margin:"normal",onChange:function(e){s(e._d),t.onChange(e._d)},value:n})})}var p=a(427);function b(t){var e=c.a.useState(null===t||void 0===t?void 0:t.value),a=Object(i.a)(e,2),n=a[0],s=a[1],o="no"!==t.fullWidth;return Object(u.jsx)(l.a,{utils:r.a,children:Object(u.jsx)(p.a,{format:"HH:mm",fullWidth:o,margin:"normal",ampm:!1,minutesStep:5,onChange:function(e){s(e._d),t.onChange(e._d)},value:n,style:t.style,className:t.className})})}var f=a(333);function j(t){var e=c.a.useState(null===t||void 0===t?void 0:t.value),a=Object(i.a)(e,2),n=a[0],s=a[1],o="no"!==t.fullWidth;return Object(u.jsx)(l.a,{utils:r.a,children:Object(u.jsx)(f.a,{format:"YYYY-MM-DD",fullWidth:o,margin:"normal",onChange:function(e){s(e._d),t.onChange(e._d)},value:n,style:t.style})})}function m(t){return Object(u.jsxs)(u.Fragment,{children:["datetime"===t.type&&Object(u.jsx)(d,Object(n.a)({},t)),"date"===t.type&&Object(u.jsx)(j,Object(n.a)({},t)),"time"===t.type&&Object(u.jsx)(b,Object(n.a)({},t))]})}},414:function(t,e,a){},416:function(t,e,a){},417:function(t,e,a){},418:function(t,e,a){},430:function(t,e,a){"use strict";a.r(e);var n=a(97),i=a(88),s=a(10),c=a(0),l=a.n(c),o=a(196),r=a(328),u=a(324),d=a(326),p=a(51),b=a(155),f=a.n(b),j=a(22),m=a(56),h=a(76),O=a(102),v=a(77),x=a(78),y=a(282),g=a(336),k=a(288),T=a(117),C=a(283),_=a(334),S=a(201),E=a(284),N=a(96),I=a(286),w=a(104),V=a.n(w),D=a(98),P=a.n(D),M=a(136),A=a.n(M),F=a(415),L=a.n(F),R=a(153),W=a.n(R),H=a(156),Y=a.n(H),z=a(357),B=(a(203),a(5)),K=a(23),U=a(8),q=a(355),J=a(396),$=a(413);var G=a(99),Q=(a(414),a(2)),X=function(t){Object(v.a)(a,t);var e=Object(x.a)(a);function a(t){var c;return Object(m.a)(this,a),(c=e.call(this,t)).setOpenConfirm=function(t){return c.setState({openConfirm:t})},c.setOpen=function(t){c.setState({open:t}),t?Object.keys(B.b.dataTable).forEach((function(t){if(B.b.dataTable[t].isEditable&&["select","multi-select"].includes(B.b.dataTable[t].type)){c.task[t]=B.a[c.realId][t];var e=B.b.dataTable[t].vocabulary?B.b.dataTable[t].vocabulary:t;B.b["".concat(e,"List")]||Object(K.c)(e,"direct").then((function(t){var a={};t.forEach((function(t){a[t.id]=t})),c.setState(Object(n.a)({},"".concat(e,"List"),a))}))}})):c.props.onClose()},c.handleDateTimeChange=function(t){return function(e){return c.setState(Object(n.a)({},t,e))}},c.getRealId=function(){return B.a.map((function(t){return t.id})).indexOf(c.props.id)},c.handleOk=function(){var t=B.a[c.getRealId()],e={};Object.keys(B.b.dataTable).forEach((function(a){var n;"specificParameters"!==a&&"undefined"!==a&&("mainTable"===a?e[a]=t[a]:(e[a]=c.state[a]?c.state[a]:(null===(n=c[a])||void 0===n?void 0:n.value)||null,["datetime","date","time"].includes(B.b.dataTable[a].type)&&(e[a]=G.a.toDateTimeStr(B.b.dataTable[a].type,c.state[a]))))}));var a=!1;Object.keys(e).forEach((function(n){var i=B.b.dataTable[n],s="int"===i.type?parseInt(e[n],10):e[n];"int"!==i.type&&s!==t[n]&&(a=!0)})),"discussion"===B.b.dataTableName&&(e.participants.split(",").includes(e.responsible)||(e.participants="".concat(e.responsible,",").concat(e.participants))),a?c.props.action(c.props.id,e):console.log("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0432\u043d\u0435\u0441\u0435\u043d\u043e \u043d\u0435 \u0431\u044b\u043b\u043e"),c.setOpen(!1)},c.handleSaveAsNew=function(){var t=B.a[c.getRealId()];t.date===c.state.date&&t.time===c.state.time&&c.setState({confirmMessage:"(\u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043d\u0435 \u0431\u044b\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b!)"}),c.setOpenConfirm(!0)},c.confirmSaveAsNew=function(){var t=B.a[c.getRealId()],e={};Object.keys(B.b.dataTable).forEach((function(a){var n;"specificParameters"!==a&&"undefined"!==a&&(e[a]=c.state[a]?c.state[a]:(null===(n=c[a])||void 0===n?void 0:n.value)||null,"mainTable"===a&&(e[a]=t[a]),["datetime","date","time"].includes(B.b.dataTable[a].type)&&(e[a]=G.a.toDateTimeStr(B.b.dataTable[a].type,c.state[a])))})),e.week&&(e.week=parseFloat(new G.a(e.date).getYearWeekStr())),c.props.actionNew(e),c.setOpen(!1)},c.handleUpload=function(t,e){U.a.alert.dispatch({type:"SHOW_ALERT",status:"warn",message:"\u0424\u0430\u0439\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."}),Object(K.b)(t.target.files[0]).then((function(t){var a=Object(s.a)(t,2),l=a[0];if(a[1])U.a.alert.dispatch({type:"SHOW_ALERT",status:"fail",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"});else{U.a.alert.dispatch({type:"SHOW_ALERT",status:"success",message:"\u0424\u0430\u0439\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e, \u0441\u0441\u044b\u043b\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"});var o="http://".concat(window.location.host,"/smisplan-docs/").concat(l.fileName);c[e].value="{this[property].value}\n".concat(o);var r=[];c.state["".concat(e,"FilesAttached")]&&r.push.apply(r,Object(i.a)(c.state["".concat(e,"FilesAttached")])),r.push(o),c.setState(Object(n.a)({},"".concat(e,"FilesAttached"),r))}}))},c.openUrl=function(t){return window.open(t,"_blank","")},c.filterValidKeys=function(t){return"specificParameters"!==t&&"undefined"!==t},c.sortValidKeys=function(t,e){return B.b.dataTable[t].tableIndex>=B.b.dataTable[e].tableIndex?1:-1},c.getDefaultValue=function(t){var e=B.b.dataTable[t],a=B.b.dataTable[t].vocabulary||t,n=B.b["".concat(a,"List")]||c.state["".concat(a,"List")],i=c.task[t];return"multi-select"!==e.type&&"select"!==e.type||(i=c.task[t]?c.task[t].split(",").map((function(t){var e;return{value:t,label:(null===(e=n[t])||void 0===e?void 0:e.value)||t}})):null),"mainTable"===t&&B.b.tables["".concat(i,"_meta")].specificParameters&&(i=B.b.tables["".concat(i,"_meta")].specificParameters.tableName),i},c.state={openConfirm:!1,confirmMessage:"",printPDF:!1,tasksList:[]},c._dataRef=l.a.createRef(),c.setOpen=c.setOpen.bind(Object(O.a)(c)),c.props.id&&(c.realId=B.a.map((function(t){return t.id})).indexOf(c.props.id),c.task=B.a[c.realId],Object.keys(B.b.dataTable).forEach((function(t){-1!==["datetime","date"].indexOf(B.b.dataTable[t].type)?c.state[t]=c.task[t]&&""!==c.task[t]?c.task[t]:null:-1!==["time"].indexOf(B.b.dataTable[t].type)?c.state[t]=c.task[t]&&""!==c.task[t]?"2000-01-01T".concat(c.task[t]):null:-1!==["select","multi-select"].indexOf(B.b.dataTable[t].type)&&(c.state[t]=c.task[t]);var e=[];/\b(http:.+?)(txt|docx?|xlsx?|pptx?|pdf|png|bmp|img|jpg|jpeg)\b/im.test(c.task[t])&&(e.push(c.task[t].match(/\b(http:.+?)(txt|doc|docx|ppt|pptx|xls|xlsx|pdf|png|bpm|img|jpg|jpeg)\b/gi)),c.state["".concat(t,"FilesAttached")]=e[0])}))),c}return Object(h.a)(a,[{key:"render",value:function(){var t=this,e=[].concat(Object.keys(B.b.dataTable).filter(this.filterValidKeys).filter((function(t){return B.b.dataTable[t].isEditable})).sort(this.sortValidKeys),Object.keys(B.b.dataTable).filter(this.filterValidKeys).filter((function(t){return!B.b.dataTable[t].isEditable})).sort(this.sortValidKeys));return this.task&&Object(Q.jsxs)(y.a,{open:this.props.isOpened,onClose:this.props.onClose,"aria-labelledby":"dialog-title",fullWidth:!0,classes:{paper:"dialog-edit"},children:[Object(Q.jsxs)("div",{className:"popup-edit__header",children:[Object(Q.jsx)(g.a,{id:"dialog-title",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Q.jsxs)("div",{className:"popup-edit__print-doc",children:[Object(Q.jsx)(W.a,{trigger:function(){return Object(Q.jsx)(k.a,{title:"\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c",children:Object(Q.jsx)(T.a,{className:"icn",style:{padding:"0px"},children:Object(Q.jsx)(V.a,{fontSize:"large"})})})},content:function(){return t.setState({printPDF:!0}),t._dataRef.current},onAfterPrint:function(){t.setState({printPDF:!1})}}),"discussion"===B.b.dataTableName&&Object(Q.jsx)(j.a,{class:"icn_save",tip:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 MS Word",fontSize:"large",action:function(){return function(t){U.a.alert.dispatch({type:"SHOW_ALERT",status:"warn",message:"\u0418\u0434\u0451\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430..."});var e=new J.Document,a=[];try{t.forEach((function(t){a.push(new J.Paragraph({children:[new J.TextRun({text:t,size:"24",font:"Arial"})]}))})),e.addSection({children:a}),J.Packer.toBlob(e).then((function(t){Object($.saveAs)(t,"SMISPlan document.docx"),U.a.alert.dispatch({type:"SHOW_ALERT",status:"success",message:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d"})}))}catch(n){U.a.alert.dispatch({type:"SHOW_ALERT",status:"fail",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0438/\u0438\u043b\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438"}),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0438/\u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: ".concat(n))}return!0}(function(t,e){var a=["\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0437\u0430\u0434\u0430\u0447",B.b.specificParameters.tableName,""],n=[];if(Object.keys(B.b.dataTable).filter((function(t){return"specificParameters"!==t&&"undefined"!==t&&B.b.dataTable[t].isEditable})).sort((function(t,e){return B.b.dataTable[t].tableIndex>=B.b.dataTable[e].tableIndex?1:-1})).forEach((function(t){return n.push(t)})),Object.keys(B.b.dataTable).filter((function(t){return"specificParameters"!==t&&"undefined"!==t&&!B.b.dataTable[t].isEditable})).sort((function(t,e){return B.b.dataTable[t].tableIndex>=B.b.dataTable[e].tableIndex?1:-1})).forEach((function(t){return n.push(t)})),n.forEach((function(e){var n=B.b.dataTable[e],i=B.b.dataTable[e].vocabulary?B.b["".concat(B.b.dataTable[e].vocabulary,"List")]:B.b["".concat(e,"List")],s=t[e]?t[e]:"";if("mainTable"===e&&B.b.tables["".concat(s,"_meta")].specificParameters&&(s=B.b.tables["".concat(s,"_meta")].specificParameters.tableName),-1!==["select","multi-select"].indexOf(B.b.dataTable[e].type)&&""!==s){var c=s;s="",c.split(",").forEach((function(t){var e,a;s+=""===s?(null===(e=i[t])||void 0===e?void 0:e.value)||t:",".concat((null===(a=i[t])||void 0===a?void 0:a.value)||t)}))}a.push("".concat(n.value,":   ").concat(s))})),"discussion"===B.b.dataTableName){var i=e;a.push(""),i.length>0?(a.push("\u041d\u0435\u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438:"),i.forEach((function(t){return a.push(t)}))):a.push("\u041d\u0435\u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438: \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")}return a}(t.task,t.state.tasksList),B.b)}})]})]}),Object(Q.jsx)(C.a,{ref:this._dataRef,children:e.map((function(e){var a=B.b.dataTable[e],i=B.b.dataTable[e].vocabulary?B.b.dataTable[e].vocabulary:e,s=B.b["".concat(i,"List")]?B.b["".concat(i,"List")]:t.state["".concat(i,"List")],c=t.task[e];return"mainTable"===e&&B.b.tables["".concat(c,"_meta")].specificParameters&&(c=B.b.tables["".concat(c,"_meta")].specificParameters.tableName),Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{className:"popup-edit__row",children:[Object(Q.jsx)("div",{style:{color:a.isEditable?"":"var(--font-color-disabled)"},children:a.value}),a.isEditable&&("multi-select"===a.type||"select"===a.type)&&s&&Object(Q.jsx)(q.a,{style:{width:"100%",minHeight:"30px",marginTop:"5px"},options:Object.keys(s).sort((function(t,e){return s[t].value>=s[e].value?1:-1})).map((function(t){return{value:t,label:s[t].value}})),bottom:!0,ref:e,inputRef:function(a){t[e]=a},refName:e,defaultValue:t.getDefaultValue(e),setValue:function(a){t.setState(Object(n.a)({},e,a))},label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c...",isMulti:"multi-select"===a.type,isCreatable:a.isSelectCreatable}),a.isEditable&&["string","int","fulltext"].includes(a.type)&&Object(Q.jsx)(_.a,{defaultValue:t.getDefaultValue(e),fullWidth:!0,multiline:!0,onKeyDown:function(t){return t.stopPropagation()},inputRef:function(a){t[e]=a},inputProps:{style:{maxHeight:t.state.printPDF?"2000px":"200px",overflow:"unset !important"}},endAdornment:a.hasFileUploader&&!t.state.printPDF&&Object(Q.jsx)("div",{className:"popup-edit__upload-file",children:Object(Q.jsxs)(I.a,{position:"end",children:[Object(Q.jsx)("input",{id:"editDialog-fileUploader",type:"file",style:{display:"none"},multiple:!0,onChange:function(a){return t.handleUpload(a,e)}}),Object(Q.jsx)("label",{htmlFor:"editDialog-fileUploader",children:Object(Q.jsx)(k.a,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",children:Object(Q.jsx)(T.a,{color:"default",component:"span",children:Object(Q.jsx)(Y.a,{})})})})]})})}),a.isEditable&&["datetime","date","time"].includes(a.type)&&Object(Q.jsx)(z.a,{type:a.type,value:t.state[e],onChange:t.handleDateTimeChange(e)}),!a.isEditable&&Object(Q.jsx)(S.a,{defaultValue:t.getDefaultValue(e),inputRef:function(a){t[e]=a},fullWidth:!0,disabled:!0})]},"dialogEdit-".concat(e,"-subMain")),t.state["".concat(e,"FilesAttached")]&&t.state["".concat(e,"FilesAttached")].length>0&&Object(Q.jsx)("div",{className:"popup-edit__attached-file",children:t.state["".concat(e,"FilesAttached")].map((function(e){return Object(Q.jsx)(j.a,{class:"icn_attachment",tip:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c: ".concat(e.replace(/^.+\/(.+)$/,"$1")),type:"material-ui",fontSize:"large",action:function(){return t.openUrl(e)}},"".concat(e))}))})]},"dialogEdit-".concat(e,"-main"))}))}),Object(Q.jsxs)(E.a,{className:"popup-edit__actions",children:[Object(Q.jsx)(N.a,{variant:"outlined",onClick:this.handleOk,color:"primary",className:"MuiButton-outlinedOk",startIcon:Object(Q.jsx)(P.a,{}),children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}),B.b.specificParameters.hasEditMenuSaveAsNew&&Object(Q.jsx)(N.a,{variant:"outlined",onClick:this.handleSaveAsNew,color:"default",className:"MuiButton-outlinedDefault",startIcon:Object(Q.jsx)(L.a,{}),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u043e\u0432\u0443\u044e"}),Object(Q.jsx)(N.a,{variant:"outlined",onClick:this.props.onClose,color:"secondary",startIcon:Object(Q.jsx)(A.a,{}),children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(Q.jsxs)(y.a,{open:this.state.openConfirm,onClose:function(){return t.setOpenConfirm(!1)},"aria-labelledby":"dialog-title",fullWidth:!0,children:[Object(Q.jsxs)(g.a,{id:"dialog-title",children:["\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 ",this.state.confirmMessage," ?"]}),Object(Q.jsxs)(E.a,{className:"popup-edit__actions",children:[Object(Q.jsx)(N.a,{variant:"outlined",onClick:this.confirmSaveAsNew,color:"primary",className:"MuiButton-outlinedOk",startIcon:Object(Q.jsx)(P.a,{}),children:"\u0414\u0430"}),Object(Q.jsx)(N.a,{variant:"outlined",onClick:function(){return t.setOpenConfirm(!1)},color:"secondary",startIcon:Object(Q.jsx)(A.a,{}),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})]})}}]),a}(l.a.Component);a(416);function Z(t){var e=t.id,a=t.action,n=t.actionName,i=t.actionText,s=t.isOpened,c=t.onClose;return Object(Q.jsxs)(y.a,{open:s,onClose:c,"aria-labelledby":"dialog-title",fullWidth:!0,children:[Object(Q.jsxs)(g.a,{id:"dialog-title",children:["\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 ",n," ?"]}),Object(Q.jsxs)(C.a,{children:[i&&Object(Q.jsx)("div",{className:"popup-confirm__content",children:i}),Object(Q.jsx)("span",{className:"popup-confirm__content",children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c!"})]}),Object(Q.jsxs)(E.a,{className:"popup-confirm__actions",children:[Object(Q.jsx)(N.a,{variant:"outlined",onClick:function(){a(e),c()},color:"primary",className:"MuiButton-outlinedOk",startIcon:Object(Q.jsx)(P.a,{}),children:"\u0414\u0430"}),Object(Q.jsx)(N.a,{variant:"outlined",onClick:c,color:"secondary",startIcon:Object(Q.jsx)(A.a,{}),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}var tt=l.a.memo(Z),et=a(141),at=(a(417),function(t){Object(v.a)(a,t);var e=Object(x.a)(a);function a(t){var i;Object(m.a)(this,a),(i=e.call(this,t)).handleDateTimeChange=function(t){return function(e){return i.setState(Object(n.a)({},t,e))}},i.handleOk=function(){var t={};Object.keys(i.state.fields).forEach((function(e){t[e]=""}));var e=0,a=i.props.type,n=B.b.tables["".concat(a,"_meta")];Object.keys(t).forEach((function(a){var s;t[a]=i.state[a]?i.state[a]:(null===(s=i[a])||void 0===s?void 0:s.value)||null,["datetime","date","time"].includes(n.dataTable[a].type)&&(t[a]=G.a.toDateTimeStr(n.dataTable[a].type,i.state[a])),"week"===a||t[a]&&""!==t[a]||e++})),n.dataTable.week&&(t.week=new G.a(t.date).getYearWeekStr()),e?i.setState({emptyDataError:!0}):(i.setState({emptyDataError:!1}),i.props.action(i.props.id,i.props.type,t),i.props.onClose())},i.state={open:i.props.isOpened,emptyDataError:!1};var s=i.props.type,c={},l=B.b.tables["".concat(s,"_meta")],o=B.a.map((function(t){return t.id})).indexOf(i.props.id);return Object.keys(l.dataTable).forEach((function(t){"id"!==t&&""===l.dataTable[t].defaultValue&&(c[t]={type:l.dataTable[t].type,value:l.dataTable[t].value},l.dataTable[t].initialValue&&(c[t].initialValue=Object(et.a)(o,t,l.dataTable,"initialValue")),["select","multi-select"].includes(l.dataTable[t].type)&&(c[t].list=l.dataTable[t].vocabulary||t))})),i.state.fields=c,Object.keys(c).forEach((function(t){c[t].initialValue?i.state[t]=c[t].initialValue:["datetime","date","time"].includes(c[t].type)?i.state[t]=null:i.state[t]=void 0})),i}return Object(h.a)(a,[{key:"render",value:function(){var t=this,e=this.state.fields;return Object(Q.jsxs)(y.a,{open:this.props.isOpened,onClose:function(){t.setState({emptyDataError:!1}),t.props.onClose()},"aria-labelledby":"dialog-title",fullWidth:!0,style:{overflow:"visible"},classes:{paper:"dialog-linked-data"},children:[Object(Q.jsx)(g.a,{id:"dialog-title",children:Object(Q.jsxs)("div",{className:"popup-add-linked-info__title",children:[Object(Q.jsx)("div",{children:this.props.title?this.props.title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438"}),Object(Q.jsx)(N.a,{variant:"outlined",onClick:this.props.onClose,color:"secondary",startIcon:Object(Q.jsx)(A.a,{}),children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})}),Object(Q.jsxs)(C.a,{children:[this.state.emptyDataError&&Object(Q.jsx)("div",{className:"popup-add-linked-info__err-no-data",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"}),Object.keys(e).filter((function(t){return"week"!==t})).sort((function(t,a){return e[t].value>=e[a].value?1:-1})).map((function(a){var i=e[a],s=B.b["".concat(i.list,"List")],c=i.initialValue;return Object(Q.jsxs)("div",{className:"popup-add-linked-info__row",children:[Object(Q.jsx)("div",{className:"popup-add-linked-info__value",children:i.value}),["select","multi-select"].includes(i.type)&&Object(Q.jsx)(q.a,{style:{width:"100%",minHeight:"30px",marginTop:"5px"},options:Object.keys(s).sort((function(t,e){return s[t].value>=s[e].value?1:-1})).map((function(t){return{value:t,label:s[t].value}})),defaultValue:c?c.split(",").map((function(t){return{value:t,label:s[t].value}})):null,ref:a,inputRef:function(e){t[a]=e},setValue:function(e){return t.setState(Object(n.a)({},a,e))},label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c...",isMulti:"multi-select"===i.type}),["fulltext","string","id"].includes(i.type)&&Object(Q.jsx)(S.a,{fullWidth:!0,value:c,onChange:t.handleDateTimeChange(a),multiline:"fulltext"===i.type}),["datetime","date","time"].includes(i.type)&&Object(Q.jsx)(z.a,{type:i.type,onChange:t.handleDateTimeChange(a)})]},a)}))]}),Object(Q.jsx)(E.a,{className:"popup-add-linked-info__actions",children:Object(Q.jsx)(N.a,{variant:"outlined",onClick:this.handleOk,color:"primary",className:"MuiButton-outlinedOk",startIcon:Object(Q.jsx)(P.a,{}),children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"})})]})}}]),a}(l.a.Component));a(418);function nt(t){var e=l.a.useState(!1),a=Object(s.a)(e,2),c=a[0],b=a[1],m=l.a.useState(null),h=Object(s.a)(m,2),O=h[0],v=h[1],x=l.a.useState(null),y=Object(s.a)(x,2),g=y[0],k=y[1],T=l.a.useState([]),C=Object(s.a)(T,2),_=C[0],S=C[1],E=l.a.useState(!1),N=Object(s.a)(E,2),I=N[0],w=N[1],V=l.a.useState(!1),D=Object(s.a)(V,2),P=D[0],M=D[1],A=l.a.useState({}),F=Object(s.a)(A,2),L=F[0],R=F[1],W=l.a.useRef(null),H=function(){O.parentElement.style.display="",b(!1)},Y=function(t){O.parentElement.style.display="flex",k(t.currentTarget),W.current.style.marginLeft=-1*"".concat(W.current.children[1].offsetWidth+5,"px")},z=function(t,e){b(!1),t.action.apply(t,Object(i.a)(e))},B=function(t){return R(Object(n.a)({},t,!0))},K=function(t){R({}),w(!1),M(!1),v(null),b(!1),t&&t.stopPropagation()},U=function(){return k(null)},q=function(t,e){return function(){v(null),"tasks_edit"===t.id?M(!0):"tasks_delete"===t.id?w(!0):"discussion"===t.id||"question"===t.id?B(t.id):t.action(e)}};return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(j.a,{class:"icn_moreH",tip:"\u041c\u0435\u043d\u044e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439",action:function(e){t.onBeforeClick(),R({}),I&&w(!1),P&&M(!1),v(e.currentTarget),b(!0),S(t.list)}}),c&&Object(Q.jsx)(o.a,{keepMounted:!0,anchorEl:O,open:!!O,onClose:function(){H(),v(null)},className:"tbl-action-menu",children:_.map((function(e,a){var n,i;return Object(Q.jsxs)("div",{children:["divider"===e.id&&Object(Q.jsx)(r.a,{},"menu-divider-".concat(a)),"divider"!==e.id&&!e.isListOfItems&&Object(Q.jsxs)(u.a,{onClick:q(e,t.id),children:[Object(Q.jsxs)(d.a,{children:["tasks_edit"===e.id&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(j.a,{class:"icn_".concat(e.id),tip:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(Q.jsx)(X,{isOpened:P,onClose:K,id:t.id,action:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return z(e,a)},actionNew:e.actionNew,task:t.task})]}),["discussion","question"].includes(e.id)&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(j.a,{class:"icn_".concat(e.id),tip:e.value,type:"material-ui"}),Object(Q.jsx)(at,{isOpened:L[e.id]||!1,onClose:K,id:t.id,action:e.action,type:e.type})]}),"tasks_delete"===e.id&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(j.a,{class:"icn_".concat(e.id),tip:e.actionName}),Object(Q.jsx)(tt,{isOpened:I,onClose:K,id:t.id,action:e.action,actionText:"\u0422\u0435\u043c\u0430: ".concat(null===(n=t.task)||void 0===n?void 0:n.value)})]}),["tasks_edit","tasks_delete","discussion","question"].includes(e.id)?null:Object(Q.jsx)(j.a,{class:"icn_".concat(e.id),action:e.actionName,actionName:e.actionName,actionText:null===(i=t.task)||void 0===i?void 0:i.value,tip:e.value})]}),Object(Q.jsx)(p.a,{variant:"inherit",noWrap:!0,children:e.value})]},"menu-".concat(e.id,"-menuItem")),"divider"!==e.id&&e.isListOfItems&&Object(Q.jsxs)(u.a,{onClick:Y,children:[Object(Q.jsx)(d.a,{children:Object(Q.jsx)(f.a,{fontSize:"medium"})}),Object(Q.jsx)(p.a,{variant:"inherit",noWrap:!0,children:e.value})]},"menu-".concat(e.id,"-menuItem")),"divider"!==e.id&&e.isListOfItems&&Object(Q.jsx)(o.a,{keepMounted:!0,anchorEl:g,ref:W,open:!!g,onClose:U,children:Object.keys(e.listItems).map((function(a){return Object(Q.jsx)(u.a,{onClick:function(){H(),v(null),k(null),e.action(t.id,a)},children:e.listItems[a].value},"menu".concat(e.id,"-menuItem-sub-").concat(a))}))},"menu".concat(e.id,"-menuItem-sub"))]},"".concat(a))}))})]})}e.default=l.a.memo(nt)}}]);
//# sourceMappingURL=6.f9f0adb1.chunk.js.map