(this.webpackJsonpsmisplan2=this.webpackJsonpsmisplan2||[]).push([[8],{401:function(t,e,a){},447:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return S}));var n=a(20),i=a(25),o=a(18),l=a(26),p=a(27),s=a(0),c=a.n(s),r=a(432),u=a(376),d=a(396),m=a(398),f=a(400),h=a(2),v=a(7),b=a(21),g=a(285),k=a(350),T=a(286),C=a(287),E=a(95),O=a(131),y=a.n(O);a(401);function D(t){return c.a.createElement(g.a,{open:t.isOpened,onClose:t.onClose,"aria-labelledby":"dialog-title",fullWidth:!0},c.a.createElement(k.a,{id:"dialog-title"},t.title),c.a.createElement(T.a,null,t.format&&"listOfData"===t.format&&t.text.split("\n").map((function(t,e){var a=t.split(";"),n=Object(b.a)(a,2),i=n[0],o=n[1];return c.a.createElement("div",{key:"simpleOutputDialog-field-".concat(e),className:"popup-simple-output__content"},c.a.createElement("div",{className:"popup-simple-output__title"},i,":"),c.a.createElement("div",{className:"popup-simple-output__info"},o))})),!t.format&&c.a.createElement("span",{className:"popup-simple-output__text"},t.text)),c.a.createElement(C.a,{className:"popup-simple-output__actions"},c.a.createElement(E.a,{variant:"outlined",onClick:t.onClose,color:"secondary",startIcon:c.a.createElement(y.a,null)},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}var S=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleClosePopup=function(){return i.setState({popupIsOpened:!1})},i.handleDayClick=function(t){var e=i.state.dates.filter((function(e){return e.date===t.dateStr})).sort((function(t,e){return t.time>e.time?1:-1})),a=e.length>0?e.map((function(t){return"".concat(t.time.replace(/(\d+):(\d+):(\d+)/,"$1:$2"),"\n").concat(t.description)})).join("\n\n"):"\u041d\u0435\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0445 \u0441\u043e\u0432\u0435\u0449\u0430\u043d\u0438\u0439";i.setState({popupText:a,popupFormat:void 0,popupTitle:"\u0421\u043e\u0432\u0435\u0449\u0430\u043d\u0438\u044f \u0437\u0430 \u0434\u0435\u043d\u044c",popupIsOpened:!0})},i.handleEventClick=function(t){var e={title:t.event.title,date:t.event.start.toLocaleDateString().replace(/(\d+).(\d+).(\d+)/,"$3-$2-$1"),time:t.event.start.toLocaleTimeString(),fullDate:t.event.start},a=i.state.dates.filter((function(t){return t.date===e.date&&t.time===e.time&&t.description===e.title}))[0],n="";n+="\u0422\u0435\u043c\u0430;".concat(a.description),n+="\n\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439;".concat(h.e.developerList[a.responsible].value),n+="\n\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438;".concat(a.participants.split(",").map((function(t){return h.e.developerList[t].value})).join(", ")),n+="\n\u0414\u0430\u0442\u0430;".concat(e.fullDate.getDate()," ").concat(["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"][e.fullDate.getMonth()],", ").concat(["\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430","\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u0438\u0435"][e.fullDate.getDay()-1]),n+="\n\u0412\u0440\u0435\u043c\u044f;".concat(e.time.replace(/(\d+):(\d+):(\d+)/,"$1:$2")),i.setState({popupText:n,popupFormat:"listOfData",popupTitle:"\u0421\u043e\u0432\u0435\u0449\u0430\u043d\u0438e",popupIsOpened:!0})},i.state={date:new Date,dates:i.props.dates,popupText:"",popupFormat:void 0,popupTitle:"",popupIsOpened:!1},i.handleClosePopup=i.handleClosePopup.bind(Object(o.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.unsubscribe=v.a.state.subscribe((function(){var e=v.a.state.getState().STATE.dataLoading;v.a.state.getState().STATE.tableName&&!e&&t.setState({dates:[]}),e&&"data"===e&&t.setState({dates:h.a})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t=this.state.dates.map((function(t){return{title:t.description,start:"".concat(t.date,"T").concat(t.time),end:"".concat(t.date,"T").concat(t.time),backgroundColor:"rejected"===t.status?"red":"done"===t.status||"postponed"===t.status?"green":t.result?"":"gold"}})),e="dayGridMonth";return/\/calendar\/list/.test(document.location.pathname)&&(e="listWeek"),c.a.createElement(c.a.Fragment,null,c.a.createElement(r.a,{events:t,eventTimeFormat:{hour:"2-digit",minute:"2-digit"},plugins:[u.b,d.a,m.a,f.a],initialView:e,dateClick:this.handleDayClick,eventClick:this.handleEventClick,locale:"ru",selectable:!0,weekNumberCalculation:"ISO",weekends:!1,slotMinTime:"08:00:00",headerToolbar:{left:"dayGridMonth,timeGridWeek,timeGridDay,listWeek",center:"title",right:"today prev,next"},buttonText:{today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",month:"\u041c\u0435\u0441\u044f\u0446",week:"\u041d\u0435\u0434\u0435\u043b\u044f",day:"\u0414\u0435\u043d\u044c",list:"\u0421\u043f\u0438\u0441\u043e\u043a"}}),c.a.createElement(D,{isOpened:this.state.popupIsOpened,text:this.state.popupText,format:this.state.popupFormat,title:this.state.popupTitle,onClose:this.handleClosePopup}))}}]),a}(c.a.Component)}}]);
//# sourceMappingURL=8.29d1f3e6.chunk.js.map