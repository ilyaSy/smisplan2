(this.webpackJsonpsmisplan2=this.webpackJsonpsmisplan2||[]).push([[7],{369:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(87),r=a(20),s=a(25),i=a(26),o=a(27),l=a(0),u=a.n(l),p=a(17),d=a.n(p),c=a(387),f=a(377),m=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChange=function(e){e&&""!==e&&"null"!==e&&Array.isArray(e)?(n.setState({valueErr:!1}),n.setState({value:e}),"function"===typeof n.props.setValue&&n.props.setValue(e.map((function(e){return e.value})).join(","))):e&&""!==e&&"null"!==e?(n.setState({valueErr:!1}),n.setState({value:e}),"function"===typeof n.props.setValue&&n.props.setValue(e.value)):(n.setState({value:e}),"function"===typeof n.props.setValue&&n.props.setValue(""))},n.setFocus=function(){n.refs[n.props.refName].focus()},n.filterValues=function(e,t){var a=n.optionsCounter<n.maxOptions;t&&""!==t&&(new RegExp(t,"i").test(e.label)||(a=!1));return a&&n.optionsCounter++,n.optionsCounter!==n.props.options.length&&n.optionsCounter!==n.maxOptions||(n.optionsCounter=0),a},n.state={value:n.props.defaultValue?n.props.defaultValue:n.props.isMulti?[]:"",valueErr:!1,offsetTop:0},n.maxOptions=n.props.maxOptions?n.props.maxOptions:60,n.optionsCounter=0,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({offsetTop:d.a.findDOMNode(this).offsetTop})}},{key:"render",value:function(){var e=this,t={input:function(e){return Object(n.a)(Object(n.a)({},e),{},{height:"25px",fontFamily:"var(--font-main)",marginTop:"-0.75px",fontSize:"15px",backgroundColor:"transparent"})},control:function(t,a){return Object(n.a)(Object(n.a)({},t),{},{minHeight:"25px",height:"fit-content",fontFamily:"var(--font-main)",fontSize:"15px",backgroundColor:"transparent",border:"0px",borderRadius:"0px",borderBottom:e.state.valueErr||a.selectProps.menuIsOpen?"2px solid":"1px solid",borderColor:e.state.valueErr?"#f44336 !important":a.selectProps.menuIsOpen?"#3f51b5 !important":"rgba(0, 0, 0, 0.42) !important",boxShadow:"none","&:hover":{borderBottom:(a.selectProps.menuIsOpen,"2px solid"),borderColor:e.state.valueErr?"#f44336":a.selectProps.menuIsOpen?"#3f51b5":"black"}})},placeholder:function(t,a){return Object(n.a)(Object(n.a)({},t),{},{height:"25px",fontFamily:"var(--font-main)",fontSize:"15px",color:e.state.valueErr?"#f44336":a.selectProps.menuIsOpen?"#3f51b5":"",backgroundColor:"transparent"})},option:function(e){return Object(n.a)(Object(n.a)({},e),{},{fontFamily:"var(--font-main)",fontSize:"15px",marginTop:"-3px",color:"rgba(0, 0, 0, 0.87)"})},valueContainer:function(e){return Object(n.a)(Object(n.a)({},e),{},{minHeight:"24px",height:"fit-content",marginTop:"-5px",paddingLeft:"0px",marginLeft:"-2px"})},indicatorsContainer:function(e){return Object(n.a)(Object(n.a)({},e),{},{minHeight:"25px !important",padding:"0px !important"})},clearIndicator:function(e){return Object(n.a)(Object(n.a)({},e),{},{padding:"0px 5px 0px 5px !important"})},dropdownIndicator:function(e){return Object(n.a)(Object(n.a)({},e),{},{padding:"0px 5px 0px 5px !important"})}};return u.a.createElement("div",{style:this.props.style},!this.props.isCreatable&&u.a.createElement(c.a,{allowCreate:this.props.allowCreate,ref:this.selectRef,options:this.props.options,styles:t,menuPlacement:this.props.bottom||this.state.offsetTop<250?"bottom":"top",value:this.state.value,placeholder:this.props.label,defaultValue:this.props.defaultValue,defaultInputValue:this.props.defaultInputValue,onChange:this.handleChange,onMenuOpen:function(){return e.optionsCounter=0},noOptionsMessage:function(){return"\u041d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"},isClearable:!0,isSearchable:!0,required:!0,isMulti:!!this.props.isMulti,style:{width:"200px"},filterOption:this.filterValues}),this.props.isCreatable&&u.a.createElement(f.a,{allowCreate:this.props.allowCreate,ref:this.selectRef,options:this.props.options,styles:t,menuPlacement:this.props.bottom||this.state.offsetTop<250?"bottom":"top",value:this.state.value,placeholder:this.props.label,defaultValue:this.props.defaultValue,defaultInputValue:this.props.defaultInputValue,onChange:this.handleChange,onMenuOpen:function(){return e.optionsCounter=0},noOptionsMessage:function(){return"\u041d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"},isClearable:!0,isSearchable:!0,required:!0,isMulti:!!this.props.isMulti,style:{width:"200px"},filterOption:this.filterValues}))}}]),a}(l.Component)},408:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var n=a(21),r=a(96),s=a(20),i=a(25),o=a(26),l=a(27),u=a(0),p=a.n(u),d=a(198),c=a(291),f=a(95),m=a(151),b=a.n(m),h=a(134),v=a(28),O=a.n(v),x=a(36),g=a(345),T=a(441),E=a(2),y=a(19),j=a(7),S=a(369),C=a(98),M=a(137),k=(a(408),function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;for(var i in Object(s.a)(this,a),(e=t.call(this)).addTask=function(){j.a.alert.dispatch({type:"SHOW_ALERT",status:"warn",message:"\u0418\u0434\u0451\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0432 \u0411\u0414..."});var t={id:parseInt(E.a.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0])+1},a=!1;for(var s in E.e.dataTable){var i=E.e.dataTable[s];if(i.addMenuIndex&&0!==parseInt(i.addMenuIndex)){var o="_addTask".concat(i.id);e[o]?""===e[o].value?(e.setState(Object(r.a)({},"".concat(s,"Err"),!0)),e[o].focus(),a=!0):(e.setState(Object(r.a)({},"".concat(s,"Err"),!1)),t[s]=e[o].value):e.refs[o]&&(e.state[s]&&""!==e.state[s]?(e.setState(Object(r.a)({},"".concat(s,"Err"),!1)),e.refs[o].setState({valueErr:!1}),t[s]=e.state[s]):(e.setState(Object(r.a)({},"".concat(s,"Err"),!0)),e.refs[o].setState({valueErr:!0}),e.refs[o].setFocus(),a=!0))}}if(!a){if("discussion"===E.e.dataTableName){t.mainTable="task",t.idTask=42,t.participants=t.responsible;var l=O()();t.date=C.a.toDateTimeStr("date",e.state.date||l),t.time=C.a.toDateTimeStr("time",e.state.time||l),t.week=new C.a(e.state.date||l).getYearWeekStr()}Object.keys(E.e.dataTable).forEach((function(e){if("undefined"===typeof t[e]||""===t[e])if(["datetime","date","time"].includes(E.e.dataTable[e].type))t[e]=void 0,["datetime","date","time"].includes(E.e.dataTable[e].defaultValue)&&(t[e]=Object(M.a)(void 0,e,E.e.dataTable));else switch(e){case"author":t[e]=E.e.user.login;break;case"mainTable":t[e]=E.e.dataTableName;break;default:t[e]="empty"===E.e.dataTable[e].defaultValue?"":E.e.dataTable[e].defaultValue}})),Object(y.a)("put",t,void 0,E.e.dataTableName).then((function(a){var s=Object(n.a)(a,2),i=s[0],o=s[1];if(i)j.a.alert.dispatch({type:"SHOW_ALERT",status:"fail",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438"});else if(o&&o.data&&o.data.id)for(var l in j.a.alert.dispatch({type:"SHOW_ALERT",status:"success",message:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"}),t.id=o.data.id,t.value=t[E.e.specificParameters.mainValue],E.e["".concat(E.e.dataTableName,"List")]&&(E.e["".concat(E.e.dataTableName,"List")][t.id]=t),E.a.push(t),j.a.data.dispatch({type:"REDRAW",redraw:!0}),E.e.dataTable){var u=E.e.dataTable[l];if(u.addMenuIndex&&0!==parseInt(u.addMenuIndex)){var p="_addTask".concat(u.id);e.setState(Object(r.a)({},"".concat(l,"Err"),!1)),e.setState(Object(r.a)({},l,"")),e[p]?e[p].value="":e.refs[p]&&(e.refs[p].setState({valueErr:!1}),e.refs[p].setState({value:null}))}}else j.a.alert.dispatch({type:"SHOW_ALERT",status:"fail",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0411\u0414"})}))}},e.handleChange=function(t){t&&""!==t&&"null"!==t&&e.setDeveloperErr(!1),e.setState({developer:t})},e.handleDateClick=function(t){return function(a){e.setState(Object(r.a)({},t,a))}},e.state={hasAddMenu:!0,addMenuTitle:" ",developers:"",selectDialogOptions:[]},e._dialogSelect=p.a.createRef(),E.e.dataTable){var o=E.e.dataTable[i];o.addMenuIndex&&0!==parseInt(o.addMenuIndex)&&(e.state[i]="",e.state["".concat(i,"Err")]=!1,"select"===E.e.dataTable[i].type&&(e.state["".concat(i,"s")]=""))}return e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=j.a.state.subscribe((function(){var t=j.a.state.getState().STATE.dataLoading;t&&"root"===t&&e.setState({developers:E.e.developerList}),t&&"data"===t&&e.setState({developers:E.e.developerList,hasAddMenu:E.e.specificParameters.hasAddMenu,addMenuTitle:E.e.specificParameters.addMenuTitle})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.state,a=t.developers,n=t.addMenuTitle,s="data-add__text-field".concat("discussion"===E.e.dataTableName&&"_discussion");return p.a.createElement(p.a.Fragment,null,this.state.hasAddMenu&&p.a.createElement("div",{className:"data-add"},p.a.createElement("div",{className:"data-add__title"},p.a.createElement("b",null,n)),Object.values(E.e.dataTable).filter((function(e){return e.addMenuIndex&&parseInt(e.addMenuIndex)>0})).sort((function(e,t){return parseInt(e.addMenuIndex)-parseInt(t.addMenuIndex)})).map((function(t){var n="_addTask".concat(t.id);return p.a.createElement(u.Fragment,{key:t.id},"select"===t.type&&p.a.createElement(S.a,{style:{width:"200px",marginTop:"-4px"},options:Object.values(a).sort((function(e,t){return e.value>=t.value?1:-1})).map((function(e){return{value:e.id,label:e.value}})),refName:n,ref:n,inputRef:function(t){return e[n]=t},setValue:function(a){return e.setState(Object(r.a)({},t.id,a))},label:"".concat(t.value,"*")}),"string"===t.type&&p.a.createElement("div",{className:s},p.a.createElement(d.a,{required:!0,fullWidth:!0,placeholder:t.value,error:!!e.state["".concat(t.id,"Err")],ref:n,inputRef:function(t){return e[n]=t}})),"date"===t.type&&p.a.createElement(x.a,{utils:h.a},p.a.createElement(g.a,{format:"YYYY-MM-DD",margin:"normal",value:e.state[t.id]||new Date,onChange:e.handleDateClick(t.id),style:{width:"140px",margin:"0 0 9px 0"},className:"tbl-header-btn-menu__datepicker",inputRef:function(t){return e[n]=t}})),"time"===t.type&&p.a.createElement(x.a,{utils:h.a},p.a.createElement(T.a,{format:"HH:mm:ss",ampm:!1,minutesStep:5,margin:"normal",value:e.state[t.id]||new Date,onChange:e.handleDateClick(t.id),style:{width:"97px",margin:"0 0 9px 0"},className:"tbl-header-btn-menu__datepicker",inputRef:function(t){return e[n]=t}})))})),p.a.createElement("div",{className:"data-add__button"},p.a.createElement(c.a,{title:n},p.a.createElement(f.a,{variant:"outlined",component:"span",color:"primary",onClick:this.addTask,style:{paddingBottom:"0px",paddingTop:"0px"},startIcon:p.a.createElement(b.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))}}]),a}(p.a.PureComponent))}}]);
//# sourceMappingURL=7.2d0726e3.chunk.js.map