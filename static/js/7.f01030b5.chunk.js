(this.webpackJsonpsmisplan2=this.webpackJsonpsmisplan2||[]).push([[7],{355:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var n=a(31),r=a(56),s=a(76),i=a(77),o=a(78),u=a(0),l=a.n(u),c=a(21),d=a.n(c),p=a(375),b=a(365),f=a(2),m=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(t){var n;Object(r.a)(this,a),(n=e.call(this,t)).handleChange=function(t){t&&""!==t&&"null"!==t&&Array.isArray(t)?(n.setState({valueErr:!1}),n.setState({value:t}),"function"===typeof n.props.setValue&&n.props.setValue(t.map((function(t){return t.value})).join(","))):t&&""!==t&&"null"!==t?(n.setState({valueErr:!1}),n.setState({value:t}),"function"===typeof n.props.setValue&&n.props.setValue(t.value)):(n.setState({value:t}),"function"===typeof n.props.setValue&&n.props.setValue(""))},n.setFocus=function(){return n.selectRef.focus()},n.filterValues=function(t,e){var a=n.optionsCounter<n.maxOptions;e&&""!==e&&(new RegExp(e,"i").test(t.label)||(a=!1));return a&&n.optionsCounter++,n.optionsCounter!==n.props.options.length&&n.optionsCounter!==n.maxOptions||(n.optionsCounter=0),a};var s="";return n.props.defaultValue?s=n.props.defaultValue:n.props.defaultValue&&(s=[]),n.state={value:s,valueErr:!1,offsetTop:0},n.maxOptions=n.props.maxOptions?n.props.maxOptions:60,n.optionsCounter=0,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({offsetTop:d.a.findDOMNode(this).offsetTop})}},{key:"render",value:function(){var t=this,e=this.props.isCreatable?b.a:p.a,a={input:function(t){return Object(n.a)(Object(n.a)({},t),{},{height:"25px",fontFamily:"var(--font-main)",marginTop:"-0.75px",fontSize:"15px",backgroundColor:"transparent"})},control:function(e,a){return Object(n.a)(Object(n.a)({},e),{},{minHeight:"25px",height:"fit-content",fontFamily:"var(--font-main)",fontSize:"15px",backgroundColor:"transparent",border:"0px",borderRadius:"0px",borderBottom:t.state.valueErr||a.selectProps.menuIsOpen?"2px solid":"1px solid",borderColor:t.state.valueErr?"#f44336 !important":a.selectProps.menuIsOpen?"#3f51b5 !important":"rgba(0, 0, 0, 0.42) !important",boxShadow:"none","&:hover":{borderBottom:(a.selectProps.menuIsOpen,"2px solid"),borderColor:t.state.valueErr?"#f44336":a.selectProps.menuIsOpen?"#3f51b5":"black"}})},placeholder:function(e,a){return Object(n.a)(Object(n.a)({},e),{},{height:"25px",fontFamily:"var(--font-main)",fontSize:"15px",color:t.state.valueErr?"#f44336":a.selectProps.menuIsOpen?"#3f51b5":"",backgroundColor:"transparent"})},option:function(t){return Object(n.a)(Object(n.a)({},t),{},{fontFamily:"var(--font-main)",fontSize:"15px",marginTop:"-3px",color:"rgba(0, 0, 0, 0.87)"})},valueContainer:function(t){return Object(n.a)(Object(n.a)({},t),{},{minHeight:"24px",height:"fit-content",marginTop:"-5px",paddingLeft:"0px",marginLeft:"-2px"})},indicatorsContainer:function(t){return Object(n.a)(Object(n.a)({},t),{},{minHeight:"25px !important",padding:"0px !important"})},clearIndicator:function(t){return Object(n.a)(Object(n.a)({},t),{},{padding:"0px 5px 0px 5px !important"})},dropdownIndicator:function(t){return Object(n.a)(Object(n.a)({},t),{},{padding:"0px 5px 0px 5px !important"})}};return Object(f.jsx)("div",{style:this.props.style,children:Object(f.jsx)(e,{allowCreate:this.props.allowCreate,ref:this.selectRef,options:this.props.options,styles:a,menuPlacement:this.props.bottom||this.state.offsetTop<250?"bottom":"top",value:this.state.value,placeholder:this.props.label,defaultValue:this.props.defaultValue,defaultInputValue:this.props.defaultInputValue,onChange:this.handleChange,onMenuOpen:function(){t.optionsCounter=0},noOptionsMessage:function(){return"\u041d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"},isClearable:!0,isSearchable:!0,required:!0,isMulti:!!this.props.isMulti,style:{width:"200px"},filterOption:this.filterValues})})}}]),a}(l.a.Component)},357:function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var n=a(31),r=a(10),s=a(0),i=a.n(s),o=a(37),u=a(433),l=a(135),c=(a(203),a(2));function d(t){var e=i.a.useState(),a=Object(r.a)(e,2),n=a[0],s=a[1];return Object(c.jsx)(o.a,{utils:l.a,children:Object(c.jsx)(u.a,{format:"YYYY-MM-DD HH:mm",fullWidth:!0,ampm:!1,minutesStep:5,margin:"normal",onChange:function(e){s(e._d),t.onChange(e._d)},value:n})})}var p=a(427);function b(t){var e=i.a.useState(null===t||void 0===t?void 0:t.value),a=Object(r.a)(e,2),n=a[0],s=a[1],u="no"!==t.fullWidth;return Object(c.jsx)(o.a,{utils:l.a,children:Object(c.jsx)(p.a,{format:"HH:mm",fullWidth:u,margin:"normal",ampm:!1,minutesStep:5,onChange:function(e){s(e._d),t.onChange(e._d)},value:n,style:t.style,className:t.className})})}var f=a(333);function m(t){var e=i.a.useState(null===t||void 0===t?void 0:t.value),a=Object(r.a)(e,2),n=a[0],s=a[1],u="no"!==t.fullWidth;return Object(c.jsx)(o.a,{utils:l.a,children:Object(c.jsx)(f.a,{format:"YYYY-MM-DD",fullWidth:u,margin:"normal",onChange:function(e){s(e._d),t.onChange(e._d)},value:n,style:t.style})})}function h(t){return Object(c.jsxs)(c.Fragment,{children:["datetime"===t.type&&Object(c.jsx)(d,Object(n.a)({},t)),"date"===t.type&&Object(c.jsx)(m,Object(n.a)({},t)),"time"===t.type&&Object(c.jsx)(b,Object(n.a)({},t))]})}},395:function(t,e,a){},426:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return M}));var n=a(10),r=a(97),s=a(56),i=a(76),o=a(77),u=a(78),l=a(0),c=a.n(l),d=a(201),p=a(288),b=a(96),f=a(154),m=a.n(f),h=a(29),j=a.n(h),v=a(357),O=a(5),x=a(23),g=a(8),T=a(355),y=a(99),S=a(141),C=(a(395),a(2)),M=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).componentWillUnmount=function(){return t.unsubscribe()},t.addTask=function(){g.a.alert.dispatch({type:"SHOW_ALERT",status:"warn",message:"\u0418\u0434\u0451\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0432 \u0411\u0414..."});var e={id:parseInt(O.a.map((function(t){return t.id})).sort((function(t,e){return e-t}))[0],10)+1},a=!1;if(Object.keys(O.b.dataTable).forEach((function(n){var s=O.b.dataTable[n],i=t.state[n];if(s.addMenuIndex&&+s.addMenuIndex>=0){var o="_addTask".concat(s.id);t[o]?""===t[o].value?(t.setState(Object(r.a)({},"".concat(n,"Err"),!0)),t[o].focus(),a=!0):(t.setState(Object(r.a)({},"".concat(n,"Err"),!1)),e[n]=t[o].value):i&&""!==i?(t.setState(Object(r.a)({},"".concat(n,"Err"),!1)),e[n]=i):(t.setState(Object(r.a)({},"".concat(n,"Err"),!0)),a=!0)}})),!a){if("discussion"===O.b.dataTableName){e.mainTable="task",e.idTask=42,e.participants=e.responsible;var s=j()(),i=t.state,o=i.date,u=i.time;e.date=y.a.toDateTimeStr("date",o||s),e.time=y.a.toDateTimeStr("time",u||s),e.week=new y.a(o||s).getYearWeekStr()}Object.keys(O.b.dataTable).forEach((function(t){if("undefined"===typeof e[t]||""===e[t])if(["datetime","date","time"].includes(O.b.dataTable[t].type))e[t]=void 0,["datetime","date","time"].includes(O.b.dataTable[t].defaultValue)&&(e[t]=Object(S.a)(void 0,t,O.b.dataTable));else switch(t){case"author":e[t]=O.b.user.login;break;case"mainTable":e[t]=O.b.dataTableName;break;default:e[t]="empty"===O.b.dataTable[t].defaultValue?"":O.b.dataTable[t].defaultValue}})),Object(x.a)("put",e,void 0,O.b.dataTableName).then((function(a){var s=Object(n.a)(a,2),i=s[0],o=s[1];i?g.a.alert.dispatch({type:"SHOW_ALERT",status:"fail",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438"}):o&&o.id?(g.a.alert.dispatch({type:"SHOW_ALERT",status:"success",message:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"}),e.id=o.id,e.value=e[O.b.specificParameters.mainValue],O.b["".concat(O.b.dataTableName,"List")]&&(O.b["".concat(O.b.dataTableName,"List")][e.id]=e),O.a.push(e),g.a.data.dispatch({type:"REDRAW",redraw:!0}),Object.keys(O.b.dataTable).forEach((function(e){var a=O.b.dataTable[e];if(!a.addMenuIndex||0===parseInt(a.addMenuIndex,10)){var n="_addTask".concat(a.id);t.setState(Object(r.a)({},"".concat(e,"Err"),!1)),t.setState(Object(r.a)({},e,"")),t[n]&&(t[n].value="")}}))):g.a.alert.dispatch({type:"SHOW_ALERT",status:"fail",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0411\u0414"})}))}},t.handleChange=function(e){e&&""!==e&&"null"!==e&&t.setDeveloperErr(!1),t.setState({developer:e})},t.handleDateClick=function(e){return function(a){return t.setState(Object(r.a)({},e,a))}},t.state={hasAddMenu:!0,addMenuTitle:" ",developers:"",selectDialogOptions:[]},Object.keys(O.b.dataTable).forEach((function(e){var a=O.b.dataTable[e];a.addMenuIndex&&!parseInt(a.addMenuIndex,10)&&(t.state[e]="",t.state["".concat(e,"Err")]=!1,"select"===O.b.dataTable[e].type&&(t.state["".concat(e,"s")]=""))})),t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.unsubscribe=g.a.state.subscribe((function(){var e=g.a.state.getState().STATE.dataLoading;e&&"root"===e&&t.setState({developers:O.b.developerList}),e&&"data"===e&&t.setState({developers:O.b.developerList,hasAddMenu:O.b.specificParameters.hasAddMenu,addMenuTitle:O.b.specificParameters.addMenuTitle})}))}},{key:"render",value:function(){var t=this,e=this.state,a=e.developers,n=e.addMenuTitle,s=e.hasAddMenu,i="data-add__text-field".concat("discussion"===O.b.dataTableName&&"_discussion");return s&&Object(C.jsxs)("div",{className:"data-add",children:[Object(C.jsx)("div",{className:"data-add__title",children:Object(C.jsx)("b",{children:n})}),Object.values(O.b.dataTable).filter((function(t){return t.addMenuIndex&&parseInt(t.addMenuIndex,10)>0})).sort((function(t,e){return parseInt(t.addMenuIndex,10)-parseInt(e.addMenuIndex,10)})).map((function(e){return Object(C.jsxs)(l.Fragment,{children:["select"===e.type&&Object(C.jsx)(T.a,{style:{width:"200px",marginTop:"-4px"},options:Object.values(a).sort((function(t,e){return t.value>=e.value?1:-1})).map((function(t){return{value:t.id,label:t.value}})),setValue:function(a){return t.setState(Object(r.a)({},e.id,a))},label:"".concat(e.value,"*")}),"string"===e.type&&Object(C.jsx)("div",{className:i,children:Object(C.jsx)(d.a,{required:!0,fullWidth:!0,placeholder:e.value,error:!!t.state["".concat(e.id,"Err")],value:t.state[e.id],onChange:function(a){t.setState(Object(r.a)({},e.id,a.target.value))}})}),["datetime","date","time"].includes(e.type)&&Object(C.jsx)(v.a,{type:e.type,onChange:t.handleDateClick(e.id),fullWidth:"no",style:{width:"date"===e.type?"140px":"97px",margin:"0 0 9px 0"},className:"tbl-header-btn-menu__datepicker"})]},e.id)})),Object(C.jsx)("div",{className:"data-add__button",children:Object(C.jsx)(p.a,{title:n,children:Object(C.jsx)(b.a,{variant:"outlined",component:"span",color:"primary",onClick:this.addTask,style:{paddingBottom:"0px",paddingTop:"0px"},startIcon:Object(C.jsx)(m.a,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})})]})}}]),a}(c.a.PureComponent)}}]);
//# sourceMappingURL=7.f01030b5.chunk.js.map