(this.webpackJsonpsmisplan2=this.webpackJsonpsmisplan2||[]).push([[8],{388:function(t,e,n){},432:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return N}));var a=n(56),i=n(76),o=n(102),s=n(77),p=n(78),c=n(0),l=n.n(c),r=n(419),u=n(363),d=n(383),m=n(385),h=n(387),f=n(5),b=n(8),v=n(10),j=n(282),O=n(336),g=n(283),x=n(284),k=n(96),C=n(136),T=n.n(C),y=(n(388),n(2));function D(t){var e=t.isOpened,n=t.onClose,a=t.title,i=t.format,o=t.text;return Object(y.jsxs)(j.a,{open:e,onClose:n,"aria-labelledby":"dialog-title",fullWidth:!0,children:[Object(y.jsx)(O.a,{id:"dialog-title",children:a}),Object(y.jsxs)(g.a,{children:[i&&"listOfData"===i&&o.split("\n").map((function(t){var e=t.split(";"),n=Object(v.a)(e,2),a=n[0],i=n[1];return Object(y.jsxs)("div",{className:"popup-simple-output__content",children:[Object(y.jsxs)("div",{className:"popup-simple-output__title",children:[a,":"]}),Object(y.jsx)("div",{className:"popup-simple-output__info",children:i})]},"simpleOutputDialog-field-".concat(a))})),!i&&Object(y.jsx)("span",{className:"popup-simple-output__text",children:o})]}),Object(y.jsx)(x.a,{className:"popup-simple-output__actions",children:Object(y.jsx)(k.a,{variant:"outlined",onClick:n,color:"secondary",startIcon:Object(y.jsx)(T.a,{}),children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})})]})}var S=l.a.memo(D),I=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],_=["\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430","\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u0438\u0435"],E={today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",month:"\u041c\u0435\u0441\u044f\u0446",week:"\u041d\u0435\u0434\u0435\u043b\u044f",day:"\u0414\u0435\u043d\u044c",list:"\u0421\u043f\u0438\u0441\u043e\u043a"},N=function(t){Object(s.a)(n,t);var e=Object(p.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).componentWillUnmount=function(){return i.unsubscribe()},i.handleClosePopup=function(){return i.setState({popupIsOpened:!1})},i.dayEventsInfo=function(t){var e=i.state.dates.filter((function(e){return e.date===t.dateStr})).sort((function(t,e){return t.time>e.time?1:-1}));return e.length>0?e.map((function(t){return"".concat(t.time.replace(/(\d+):(\d+):(\d+)/,"$1:$2"),"\n").concat(t.description)})).join("\n\n"):"\u041d\u0435\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0445 \u0441\u043e\u0432\u0435\u0449\u0430\u043d\u0438\u0439"},i.detailedEventInfo=function(t){var e={title:t.event.title,date:t.event.start.toLocaleDateString().replace(/(\d+).(\d+).(\d+)/,"$3-$2-$1"),time:t.event.start.toLocaleTimeString(),fullDate:t.event.start},n=i.state.dates.filter((function(t){return t.date===e.date&&t.time===e.time&&t.description===e.title}))[0],a="";return a+="\u0422\u0435\u043c\u0430;".concat(n.description),a+="\n\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439;".concat(f.b.developerList[n.responsible].value),a+="\n\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438;".concat(n.participants.split(",").map((function(t){return f.b.developerList[t].value})).join(", ")),a+="\n\u0414\u0430\u0442\u0430;".concat(e.fullDate.getDate()," ").concat(I[e.fullDate.getMonth()],", ").concat(_[e.fullDate.getDay()-1]),a+="\n\u0412\u0440\u0435\u043c\u044f;".concat(e.time.replace(/(\d+):(\d+):(\d+)/,"$1:$2"))},i.handleDayClick=function(t){i.setState({popupText:i.dayEventsInfo(t),popupFormat:void 0,popupTitle:"\u0421\u043e\u0432\u0435\u0449\u0430\u043d\u0438\u044f \u0437\u0430 \u0434\u0435\u043d\u044c",popupIsOpened:!0})},i.handleEventClick=function(t){i.setState({popupText:i.detailedEventInfo(t),popupFormat:"listOfData",popupTitle:"\u0421\u043e\u0432\u0435\u0449\u0430\u043d\u0438e",popupIsOpened:!0})},i.getBackgroundColorByDate=function(t){var e="";return"rejected"===t.status?e="red":["done","postponed"].includes(t.status)?e="green":t.result||(e="green"),e},i.state={dates:i.props.dates,popupText:"",popupFormat:void 0,popupTitle:"",popupIsOpened:!1},i.handleClosePopup=i.handleClosePopup.bind(Object(o.a)(i)),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.unsubscribe=b.a.state.subscribe((function(){var e=b.a.state.getState().STATE.dataLoading;b.a.state.getState().STATE.tableName&&!e&&t.setState({dates:[]}),e&&"data"===e&&t.setState({dates:f.a})}))}},{key:"render",value:function(){var t=this,e=this.state.dates.map((function(e){return{title:e.description,start:"".concat(e.date,"T").concat(e.time),end:"".concat(e.date,"T").concat(e.time),backgroundColor:t.getBackgroundColorByDate(e)}})),n="dayGridMonth";return/\/calendar\/list/.test(document.location.pathname)&&(n="listWeek"),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(r.a,{events:e,eventTimeFormat:{hour:"2-digit",minute:"2-digit"},plugins:[u.b,d.a,m.a,h.a],initialView:n,dateClick:this.handleDayClick,eventClick:this.handleEventClick,locale:"ru",selectable:!0,weekNumberCalculation:"ISO",weekends:!1,slotMinTime:"08:00:00",headerToolbar:{left:"dayGridMonth,timeGridWeek,timeGridDay,listWeek",center:"title",right:"today prev,next"},buttonText:E}),Object(y.jsx)(S,{isOpened:this.state.popupIsOpened,text:this.state.popupText,format:this.state.popupFormat,title:this.state.popupTitle,onClose:this.handleClosePopup})]})}}]),n}(l.a.Component)}}]);
//# sourceMappingURL=8.4daf0da9.chunk.js.map